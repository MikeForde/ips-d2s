{"version":3,"sources":["pages/Components/FormIPS.js","PatientContext.js","contexts/LoadingContext.js","pages/Components/generatePDF.js","pages/Components/IPS.js","pages/HomePage.js","pages/QRPage.js","pages/DataUploadPage.js","pages/AboutPage.js","appcomp/PatientSearch.js","appcomp/NavigationBar.js","pages/ChangelogPage.js","pages/AboutWebappPage.js","pages/APIGETPage.js","pages/UnifiedPostPage.js","pages/UnifiedIPSGetPage.js","pages/BEERGardenPage.js","pages/APIDocumentationPage.js","components/LoadingSpinner.js","App.js","index.js"],"names":["formatDate","dateString","datePart","timePart","split","time","FormIPS","_ref","add","showForm","setShowForm","useState","formData","setFormData","packageUUID","uuidv4","timeStamp","Date","patient","name","given","dob","gender","nationality","practitioner","organization","medication","code","system","date","dosage","allergies","criticality","conditions","observations","value","immunizations","showAlert","setShowAlert","handlePatientChange","e","target","handleMedicationChange","index","updatedMedication","handleAllergyChange","updatedAllergies","handleConditionChange","updatedConditions","handleObservationChange","updatedObservations","handleImmunizationChange","updatedImmunizations","React","createElement","Button","className","onClick","Form","onSubmit","preventDefault","setTimeout","nation","Group","Label","Control","type","readOnly","onChange","placeholder","as","defaultValue","handleAddMedication","map","med","key","handleAddAllergy","allergy","handleAddCondition","condition","handleAddObservation","observation","handleAddImmunization","immunization","variant","Toast","show","onClose","bg","Body","PatientContext","createContext","PatientProvider","children","selectedPatients","setSelectedPatients","selectedPatient","setSelectedPatient","Provider","LoadingContext","useLoading","useContext","LoadingProvider","isLoading","setIsLoading","startLoading","stopLoading","IPS","ips","remove","update","expanded","setExpanded","showConfirmModal","setShowConfirmModal","showEditModal","setShowEditModal","editIPS","setEditIPS","handleCancelDelete","handleSelection","handleEditChange","prev","handleAddItem","handleRemoveItem","filter","_","i","handleChangeItem","item","renderTooltip","text","Tooltip","id","Fragment","length","OverlayTrigger","placement","overlay","Link","to","FontAwesomeIcon","icon","faFileMedical","faQrcode","faBeer","faUpload","handleGeneratePDF","async","pdfDoc","PDFDocument","create","page","addPage","width","height","getSize","font","embedFont","StandardFonts","Helvetica","boldFont","HelveticaBold","yOffset","drawText","size","x","y","lines","forEach","line","color","rgb","maxWidth","lineHeight","detail","title","items","formatItem","section","fontSize","pdfBytes","save","blob","Blob","url","URL","createObjectURL","newWindow","window","open","document","downloadLink","href","download","body","appendChild","parentNode","removeChild","generatePDF","faFileExport","handleEdit","faEdit","handleRemove","faTrash","Modal","onHide","Header","closeButton","Title","Footer","handleConfirmDelete","_id","dialogClassName","Row","Col","controlId","handleSaveEdit","axios","put","then","response","data","catch","error","console","finally","server","process","REACT_APP_API_BASE_URL","baseURL","HomePage","searchTerm","setSearchTerm","delete","removedId","newIPS","findIndex","c","splice","log","updatedIPS","cleanedMedication","trim","cleanedAllergies","cleanedConditions","cleanedObservations","cleanedImmunizations","cleanedFormData","JSON","stringify","post","createdIPS","event","get","ipss","Card","QRPage","qrData","setQRData","mode","setMode","showNotification","setShowNotification","responseSize","setResponseSize","useEffect","endpoint","location","origin","responseData","TextEncoder","encode","qrSize","Math","min","innerWidth","innerHeight","DropdownButton","onSelect","recordId","record","find","Dropdown","Item","eventKey","active","selectedMode","Alert","QRCode","handleDownloadQR","pngUrl","getElementById","toDataURL","click","DataUploadPage","setData","validatedRecords","setValidatedRecords","showConfirmationModal","setShowConfirmationModal","showNoRecordsPassed","setShowNoRecordsPassed","isValidUUID","uuid","test","rows","handleUpload","ipsRecords","fields","rest","genderFinal","genderFull","f","m","u","o","toLowerCase","toISOString","medications","medicationName","medicationDate","medicationDosage","slice","push","allergiesData","allergyName","allergyCriticality","allergyDate","allergyTrimName","conditionsData","conditionName","conditionDate","conditionTrimName","handleSubmit","AboutPage","Container","Text","PatientSearch","collapseNavbar","inline","NavigationBar","useLocation","handleNavItemSelect","startLoad","isHostedOnD2S","includes","Navbar","expand","fixed","Brand","src","alt","style","marginRight","Toggle","aria-controls","Collapse","Nav","NavDropdown","faCloud","faDownload","Divider","currentPath","pathname","handlePatientSelect","ChangeLogPage","rel","AboutWebAppPage","APIGETPage","modeText","setModeText","useCompressionAndEncryption","setUseCompressionAndEncryption","useIncludeKey","setUseIncludeKey","headers","formatXML","fetchData","xml","replace","checked","htmlFor","handleDownloadData","link","setAttribute","UnifiedPostPage","message","setMessage","setTarget","setEndpoint","dataFormat","setDataFormat","hl7Wrapper","setHl7Wrapper","getEndpoint","Check","label","ipsData","parse","ipsBundle","UnifiedIPSGetPage","setName","givenName","setGivenName","setIpsData","setError","params","err","required","selectedTarget","BEERGardenPage","mongoData","setMongoData","beerData","setBeerData","isConvertingRef","useRef","mongoSize","setMongoSize","beerSize","setBEERSize","selectedFormat","setSelectedFormat","displayFormat","setDisplayFormat","current","handleRecordChange","handleConvertToBEERFromIPS","format","APIDocumentationPage","encodingEncryptionInstructions","feature","incoming","outgoing","Table","striped","bordered","hover","responsive","method","description","request","row","LoadingSpinner","role","App","Router","paddingTop","Routes","Route","path","element","ReactDOM","render"],"mappings":"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","file":"static/js/main.59686e24.chunk.js","sourcesContent":["import React, { useState } from \"react\";\nimport { Button, Form, Toast } from \"react-bootstrap\";\nimport { v4 as uuidv4 } from 'uuid';\nimport \"./components.css\";\n\nconst formatDate = (dateString) => {\n  if (!dateString) return \"\";\n  const [datePart, timePart] = dateString.split(\"T\");\n  const time = timePart.split(\".\")[0];\n  return time === \"00:00:00\" ? datePart : `${datePart} ${time}`;\n};\n\nexport function FormIPS({ add }) {\n  const [showForm, setShowForm] = useState(false);\n  const [formData, setFormData] = useState({\n    packageUUID: uuidv4(),\n    timeStamp: new Date(),\n    patient: {\n      name: \"\",\n      given: \"\",\n      dob: \"\",\n      gender: \"\",\n      nationality: \"\",\n      practitioner: \"\",\n      organization: \"\",\n    },\n    medication: [{ name: \"\", code: \"\", system: \"\", date: \"\", dosage: \"\" }],\n    allergies: [{ name: \"\", code: \"\", system: \"\", criticality: \"\", date: \"\" }],\n    conditions: [{ name: \"\", code: \"\", system: \"\", date: \"\" }],\n    observations: [{ name: \"\", code: \"\", system: \"\", date: \"\", value: \"\" }],\n    immunizations: [{ name: \"\", code: \"\", system: \"\", date: \"\" }]\n  });\n\n  const [showAlert, setShowAlert] = useState(false);\n\n  const handlePatientChange = (e) => {\n    const { name, value } = e.target;\n    setFormData({\n      ...formData,\n      patient: {\n        ...formData.patient,\n        [name]: value,\n      },\n    });\n  };\n\n  const handleMedicationChange = (index, e) => {\n    const { name, value } = e.target;\n    const updatedMedication = [...formData.medication];\n    updatedMedication[index][name] = value;\n    setFormData({\n      ...formData,\n      medication: updatedMedication,\n    });\n  };\n\n  const handleAllergyChange = (index, e) => {\n    const { name, value } = e.target;\n    const updatedAllergies = [...formData.allergies];\n    updatedAllergies[index][name] = value;\n    setFormData({\n      ...formData,\n      allergies: updatedAllergies,\n    });\n  };\n\n  const handleConditionChange = (index, e) => {\n    const { name, value } = e.target;\n    const updatedConditions = [...formData.conditions];\n    updatedConditions[index][name] = value;\n    setFormData({\n      ...formData,\n      conditions: updatedConditions,\n    });\n  };\n\n  const handleObservationChange = (index, e) => {\n    const { name, value } = e.target;\n    const updatedObservations = [...formData.observations];\n    updatedObservations[index][name] = value;\n    setFormData({\n      ...formData,\n      observations: updatedObservations,\n    });\n  };\n\n  const handleImmunizationChange = (index, e) => {\n    const { name, value } = e.target;\n    const updatedImmunizations = [...formData.immunizations];\n    updatedImmunizations[index][name] = value;\n    setFormData({\n      ...formData,\n      immunizations: updatedImmunizations,\n    });\n  };\n\n  const handleAddMedication = () => {\n    setFormData({\n      ...formData,\n      medication: [...formData.medication, { name: \"\", code: \"\", system: \"\", date: \"\", dosage: \"\" }],\n    });\n  };\n\n  const handleAddAllergy = () => {\n    setFormData({\n      ...formData,\n      allergies: [...formData.allergies, { name: \"\", code: \"\", system: \"\", criticality: \"\", date: \"\" }],\n    });\n  };\n\n  const handleAddCondition = () => {\n    setFormData({\n      ...formData,\n      conditions: [...formData.conditions, { name: \"\", code: \"\", system: \"\", date: \"\" }],\n    });\n  };\n\n  const handleAddObservation = () => {\n    setFormData({\n      ...formData,\n      observations: [...formData.observations, { name: \"\", code: \"\", system: \"\", date: \"\", value: \"\" }],\n    });\n  };\n\n  const handleAddImmunization = () => {\n    setFormData({\n      ...formData,\n      immunizations: [...formData.immunizations, { name: \"\", code: \"\", system: \"\",  date: \"\" }],\n    });\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n\n    // Check if any of the required fields are missing\n    if (!formData.patient.name || !formData.patient.given || !formData.patient.dob) {\n      // If any required field is missing, show the alert\n      setShowAlert(true);\n\n      // Hide the alert after 3 seconds\n      setTimeout(() => {\n        setShowAlert(false);\n      }, 3000);\n\n      return;\n    }\n\n    if (!formData.patient.gender) { formData.patient.gender = \"Unknown\"; }\n    if (!formData.patient.nation) { formData.patient.nation = \"UK\"; }\n    if (!formData.patient.practitioner) { formData.patient.practitioner = \"Dr No\"; }\n    if (!formData.patient.organization) { formData.patient.organization = \"UK DMS\"; }\n\n    // Proceed with the submission if all required fields are filled\n    if (!formData.packageUUID) return;\n    add(formData);\n    setFormData({\n      packageUUID: uuidv4(),\n      timeStamp: new Date(),\n      patient: {\n        name: \"\",\n        given: \"\",\n        dob: \"\",\n        gender: \"\",\n        nation: \"\",\n        practitioner: \"\",\n        organization: \"\",\n      },\n      medication: [{ name: \"\", code: \"\", system: \"\", date: \"\", dosage: \"\" }],\n      allergies: [{ name: \"\", code: \"\", system: \"\", criticality: \"\", date: \"\" }],\n      conditions: [{ name: \"\", code: \"\", system: \"\", date: \"\" }],\n      observations: [{ name: \"\", code: \"\", system: \"\", date: \"\", value: \"\" }],\n      immunizations: [{ name: \"\", code: \"\", system: \"\", date: \"\" }]\n    });\n  };\n\n\n  return (\n    <div>\n      <Button className=\"mb-3\" onClick={() => setShowForm(!showForm)}>\n        {showForm ? \"Hide Form\" : \"Manually Add New IPS Entry\"}\n      </Button>\n      {showForm && (\n        <Form onSubmit={handleSubmit}>\n          <Form.Group>\n            <Form.Label>\n              <h3>Add IPS Entry</h3>\n            </Form.Label>\n            <Form.Group className=\"row\">\n              <Form.Label className=\"col-sm-2\"><b>Package UUID</b></Form.Label>\n              <div className=\"col-sm-10\">\n                <Form.Control\n                  type=\"text\"\n                  readOnly\n                  value={formData.packageUUID} />\n              </div>\n            </Form.Group>\n          </Form.Group>\n          <Form.Group className=\"row\">\n            <Form.Label className=\"col-sm-2\">Time Stamp</Form.Label>\n            <div className=\"col-sm-10\">\n              <Form.Control\n                type=\"text\"\n                readOnly\n                value={formData.timeStamp} />\n            </div>\n          </Form.Group>\n          <Form.Group>\n            <Form.Label>\n              <b>Patient Information</b>\n            </Form.Label>\n            <Form.Group className=\"row\">\n              <Form.Label className=\"col-sm-2\">Name</Form.Label>\n              <div className=\"col-sm-10\">\n                <Form.Control\n                  type=\"text\"\n                  name=\"name\"\n                  value={formData.patient.name}\n                  onChange={handlePatientChange}\n                  placeholder=\"Patient Name\" />\n              </div>\n            </Form.Group>\n            <Form.Group className=\"row\">\n              <Form.Label className=\"col-sm-2\">Given Name</Form.Label>\n              <div className=\"col-sm-10\">\n                <Form.Control\n                  type=\"text\"\n                  name=\"given\"\n                  value={formData.patient.given}\n                  onChange={handlePatientChange}\n                  placeholder=\"Given Name\" />\n              </div>\n            </Form.Group>\n            <Form.Group className=\"row\">\n              <Form.Label className=\"col-sm-2\">Date of Birth</Form.Label>\n              <div className=\"col-sm-10\">\n                <Form.Control\n                  type=\"date\"\n                  name=\"dob\"\n                  value={formData.patient.dob}\n                  onChange={handlePatientChange} />\n              </div>\n            </Form.Group>\n            <Form.Group className=\"row\">\n              <Form.Label className=\"col-sm-2\">Gender</Form.Label>\n              <div className=\"col-sm-10\">\n                <Form.Control\n                  as=\"select\"\n                  name=\"gender\"\n                  value={formData.patient.gender}\n                  onChange={handlePatientChange} >\n                  <option value=\"\">Select Gender</option>\n                  <option value=\"Male\">Male</option>\n                  <option value=\"Female\">Female</option>\n                  <option value=\"Other\">Other</option>\n                  <option value=\"Unknown\">Unknown</option>\n                </Form.Control>\n              </div>\n            </Form.Group>\n            <Form.Group className=\"row\">\n              <Form.Label className=\"col-sm-2\">Country</Form.Label>\n              <div className=\"col-sm-4\">\n                <Form.Control\n                  type=\"text\"\n                  name=\"nation\"\n                  defaultValue=\"UK\"\n                  value={formData.patient.nation}\n                  onChange={handlePatientChange}\n                  placeholder=\"Country - default UK\" />\n              </div>\n              <Form.Label className=\"col-sm-2\">Practitioner</Form.Label>\n              <div className=\"col-sm-4\">\n                <Form.Control\n                  type=\"text\"\n                  name=\"practitioner\"\n                  value={formData.patient.practitioner}\n                  onChange={handlePatientChange}\n                  placeholder=\"Practitioner - default Dr No\" />\n              </div>\n              <Form.Label className=\"col-sm-2\">Organization</Form.Label>\n              <div className=\"col-sm-4\">\n                <Form.Control\n                  type=\"text\"\n                  name=\"organization\"\n                  value={formData.patient.organization}\n                  onChange={handlePatientChange}\n                  placeholder=\"Organization - default UK DMS\" />\n              </div>\n            </Form.Group>\n          </Form.Group>\n          <Button className=\"mb-3 minor-button\" onClick={handleAddMedication}>Add Medication</Button>\n          {formData.medication.map((med, index) => (\n            <div key={index}>\n              <Form.Group className=\"row\">\n                <Form.Label className=\"col-sm-2\">Medication</Form.Label>\n                <div className=\"col-sm-10\">\n                  <Form.Control\n                    type=\"text\"\n                    name=\"name\"\n                    value={med.name}\n                    onChange={(e) => handleMedicationChange(index, e)}\n                    placeholder=\"Medication Name\" />\n                </div>\n              </Form.Group>\n              <Form.Group className=\"row\">\n                <Form.Label className=\"col-sm-2\">Code</Form.Label>\n                <div className=\"col-sm-10\">\n                  <Form.Control\n                    type=\"text\"\n                    name=\"code\"\n                    value={med.code}\n                    onChange={(e) => handleMedicationChange(index, e)}\n                    placeholder=\"Medication Code\" />\n                </div>\n              </Form.Group>\n              <Form.Group className=\"row\">\n                <Form.Label className=\"col-sm-2\">System</Form.Label>\n                <div className=\"col-sm-10\">\n                  <Form.Control\n                    type=\"text\"\n                    name=\"system\"\n                    value={med.system}\n                    onChange={(e) => handleMedicationChange(index, e)}\n                    placeholder=\"Medication Code System\" />\n                </div>\n              </Form.Group>\n              <Form.Group className=\"row\">\n                <Form.Label className=\"col-sm-2\">Date</Form.Label>\n                <div className=\"col-sm-10\">\n                  <Form.Control\n                    type=\"datetime-local\"\n                    name=\"date\"\n                    value={formatDate(med.date)}\n                    onChange={(e) => handleMedicationChange(index, e)}\n                    placeholder=\"Date\" />\n                </div>\n              </Form.Group>\n              <Form.Group className=\"row\">\n                <Form.Label className=\"col-sm-2\">Dosage</Form.Label>\n                <div className=\"col-sm-10\">\n                  <Form.Control\n                    type=\"text\"\n                    name=\"dosage\"\n                    defaultValue=\"Stat\"\n                    value={med.dosage}\n                    onChange={(e) => handleMedicationChange(index, e)}\n                    placeholder=\"Dosage\" />\n                </div>\n              </Form.Group>\n            </div>\n          ))}\n          <Button className=\"mb-3 minor-button\" onClick={handleAddAllergy}>Add Allergy</Button>\n          {formData.allergies.map((allergy, index) => (\n            <div key={index}>\n              <Form.Group className=\"row\">\n                <Form.Label className=\"col-sm-2\">Allergy</Form.Label>\n                <div className=\"col-sm-10\">\n                  <Form.Control\n                    type=\"text\"\n                    name=\"name\"\n                    value={allergy.name}\n                    onChange={(e) => handleAllergyChange(index, e)}\n                    placeholder=\"Allergy Name\" />\n                </div>\n              </Form.Group>\n              <Form.Group className=\"row\">\n                <Form.Label className=\"col-sm-2\">Code</Form.Label>\n                <div className=\"col-sm-10\">\n                  <Form.Control\n                    type=\"text\"\n                    name=\"code\"\n                    value={allergy.code}\n                    onChange={(e) => handleAllergyChange(index, e)}\n                    placeholder=\"Allergy Code\" />\n                </div>\n              </Form.Group>\n              <Form.Group className=\"row\">\n                <Form.Label className=\"col-sm-2\">System</Form.Label>\n                <div className=\"col-sm-10\">\n                  <Form.Control\n                    type=\"text\"\n                    name=\"system\"\n                    value={allergy.system}\n                    onChange={(e) => handleAllergyChange(index, e)}\n                    placeholder=\"Allergy Code System\" />\n                </div>\n              </Form.Group>\n              <Form.Group className=\"row\">\n                <Form.Label className=\"col-sm-2\">Criticality</Form.Label>\n                <div className=\"col-sm-10\">\n                  <Form.Control\n                    as=\"select\"\n                    name=\"criticality\"\n                    value={allergy.criticality}\n                    onChange={(e) => handleAllergyChange(index, e)}\n                    placeholder=\"Criticality\" >\n                    <option value=\"\">Select Criticality</option>\n                    <option value=\"high\">High</option>\n                    <option value=\"medium\">Medium</option>\n                    <option value=\"low\">Low</option>\n                  </Form.Control>\n                </div>\n              </Form.Group>\n              <Form.Group className=\"row\">\n                <Form.Label className=\"col-sm-2\">Date</Form.Label>\n                <div className=\"col-sm-10\">\n                  <Form.Control\n                    type=\"date\"\n                    name=\"date\"\n                    value={allergy.date}\n                    onChange={(e) => handleAllergyChange(index, e)}\n                    placeholder=\"Date\" />\n                </div>\n              </Form.Group>\n            </div>\n          ))}\n          <Button className=\"mb-3 minor-button\" onClick={handleAddCondition}>Add Condition</Button>\n          {formData.conditions.map((condition, index) => (\n            <div key={index}>\n              <Form.Group className=\"row\">\n                <Form.Label className=\"col-sm-2\">Condition</Form.Label>\n                <div className=\"col-sm-10\">\n                  <Form.Control\n                    type=\"text\"\n                    name=\"name\"\n                    value={condition.name}\n                    onChange={(e) => handleConditionChange(index, e)}\n                    placeholder=\"Condition/Problem Name\" />\n                </div>\n              </Form.Group>\n              <Form.Group className=\"row\">\n                <Form.Label className=\"col-sm-2\">Code</Form.Label>\n                <div className=\"col-sm-10\">\n                  <Form.Control\n                    type=\"text\"\n                    name=\"code\"\n                    value={condition.code}\n                    onChange={(e) => handleConditionChange(index, e)}\n                    placeholder=\"Condition/Problem Code\" />\n                </div>\n              </Form.Group>\n              <Form.Group className=\"row\">\n                <Form.Label className=\"col-sm-2\">System</Form.Label>\n                <div className=\"col-sm-10\">\n                  <Form.Control\n                    type=\"text\"\n                    name=\"system\"\n                    value={condition.system}\n                    onChange={(e) => handleConditionChange(index, e)}\n                    placeholder=\"Condition/Problem Code System\" />\n                </div>\n              </Form.Group>\n              <Form.Group className=\"row\">\n                <Form.Label className=\"col-sm-2\">Date</Form.Label>\n                <div className=\"col-sm-10\">\n                  <Form.Control\n                    type=\"date\"\n                    name=\"date\"\n                    value={condition.date}\n                    onChange={(e) => handleConditionChange(index, e)}\n                    placeholder=\"Date\" />\n                </div>\n              </Form.Group>\n            </div>\n          ))}\n          <Button className=\"mb-3 minor-button\" onClick={handleAddObservation}>Add Observation</Button>\n          {formData.observations.map((observation, index) => (\n            <div key={index}>\n              <Form.Group className=\"row\">\n                <Form.Label className=\"col-sm-2\">Observation</Form.Label>\n                <div className=\"col-sm-10\">\n                  <Form.Control\n                    as=\"select\"\n                    name=\"name\"\n                    value={observation.name}\n                    onChange={(e) => handleObservationChange(index, e)}\n                  >\n                    <option value=\"\">Select an observation or enter custom</option>\n                    <option value=\"Blood Pressure\">Blood Pressure</option>\n                    <option value=\"Pulse\">Pulse</option>\n                    <option value=\"Resp Rate\">Resp Rate</option>\n                    <option value=\"Temperature\">Temperature</option>\n                    <option value=\"Oxygen Sats\">Oxygen Sats</option>\n                    <option value=\"AVPU\">AVPU</option>\n                    <option value=\"Weight\">Weight</option>\n                    <option value=\"Blood Group\">Blood Group</option>\n                  </Form.Control>\n                  <Form.Control\n                    type=\"text\"\n                    name=\"name\"\n                    value={observation.name}\n                    onChange={(e) => handleObservationChange(index, e)}\n                    placeholder=\"Custom Observation\"\n                    className=\"mt-2\"\n                  />\n                </div>\n              </Form.Group>\n              <Form.Group className=\"row\">\n                <Form.Label className=\"col-sm-2\">Code</Form.Label>\n                <div className=\"col-sm-10\">\n                  <Form.Control\n                    type=\"text\"\n                    name=\"code\"\n                    value={formatDate(observation.code)}\n                    onChange={(e) => handleObservationChange(index, e)}\n                    placeholder=\"Observation Code\" />\n                </div>\n              </Form.Group>\n              <Form.Group className=\"row\">\n                <Form.Label className=\"col-sm-2\">System</Form.Label>\n                <div className=\"col-sm-10\">\n                  <Form.Control\n                    type=\"text\"\n                    name=\"system\"\n                    value={formatDate(observation.system)}\n                    onChange={(e) => handleObservationChange(index, e)}\n                    placeholder=\"Observation Code System\" />\n                </div>\n              </Form.Group>\n              <Form.Group className=\"row\">\n                <Form.Label className=\"col-sm-2\">Date</Form.Label>\n                <div className=\"col-sm-10\">\n                  <Form.Control\n                    type=\"datetime-local\"\n                    name=\"date\"\n                    value={formatDate(observation.date)}\n                    onChange={(e) => handleObservationChange(index, e)}\n                    placeholder=\"Date\" />\n                </div>\n              </Form.Group>\n              <Form.Group className=\"row\">\n                <Form.Label className=\"col-sm-2\">Value</Form.Label>\n                <div className=\"col-sm-10\">\n                  <Form.Control\n                    type=\"text\"\n                    name=\"value\"\n                    value={observation.value}\n                    onChange={(e) => handleObservationChange(index, e)}\n                    placeholder=\"Value\" />\n                </div>\n              </Form.Group>\n            </div>\n          ))}\n          <Button className=\"mb-3 minor-button\" onClick={handleAddImmunization}>Add Immunization</Button>\n          {formData.immunizations.map((immunization, index) => (\n            <div key={index}>\n              <Form.Group className=\"row\">\n                <Form.Label className=\"col-sm-2\">Immunization</Form.Label>\n                <div className=\"col-sm-10\">\n                  <Form.Control\n                    type=\"text\"\n                    name=\"name\"\n                    value={immunization.name}\n                    onChange={(e) => handleImmunizationChange(index, e)}\n                    placeholder=\"Immunization Name or Code\" />\n                </div>\n              </Form.Group>\n              <Form.Group className=\"row\">\n                <Form.Label className=\"col-sm-2\">System</Form.Label>\n                <div className=\"col-sm-10\">\n                  <Form.Control\n                    type=\"text\"\n                    name=\"system\"\n                    value={immunization.system}\n                    onChange={(e) => handleImmunizationChange(index, e)}\n                    placeholder=\"Coding System (e.g., LOINC, SNOMED) or url\" />\n                </div>\n              </Form.Group>\n              <Form.Group className=\"row\">\n                <Form.Label className=\"col-sm-2\">Date</Form.Label>\n                <div className=\"col-sm-10\">\n                  <Form.Control\n                    type=\"datetime-local\"\n                    name=\"date\"\n                    value={formatDate(immunization.date)}\n                    onChange={(e) => handleImmunizationChange(index, e)}\n                    placeholder=\"Date\" />\n                </div>\n              </Form.Group>\n            </div>\n          ))}\n\n          <Button className=\"submit\" variant=\"primary\" type=\"submit\">Submit IPS Data</Button>\n          <Toast show={showAlert} onClose={() => setShowAlert(false)} bg=\"danger\" className=\"fixed-bottom m-3\">\n            <Toast.Body>Please fill in all required fields.</Toast.Body>\n          </Toast>\n        </Form>\n      )}\n      <br />\n    </div>\n  );\n}","// src/PatientContext.js\nimport React, { createContext, useState } from 'react';\n\nexport const PatientContext = createContext();\n\nexport const PatientProvider = ({ children }) => {\n  const [selectedPatients, setSelectedPatients] = useState([]);\n  const [selectedPatient, setSelectedPatient] = useState(null);\n\n  return (\n    <PatientContext.Provider value={{ selectedPatients, setSelectedPatients, selectedPatient, setSelectedPatient }}>\n      {children}\n    </PatientContext.Provider>\n  );\n};\n","// src/contexts/LoadingContext.js\nimport React, { createContext, useState, useContext } from 'react';\n\nconst LoadingContext = createContext();\n\nexport const useLoading = () => useContext(LoadingContext);\n\nexport const LoadingProvider = ({ children }) => {\n  const [isLoading, setIsLoading] = useState(false);\n\n  const startLoading = () => setIsLoading(true);\n  const stopLoading = () => setIsLoading(false);\n\n  return (\n    <LoadingContext.Provider value={{ isLoading, startLoading, stopLoading }}>\n      {children}\n    </LoadingContext.Provider>\n  );\n};\n","import { PDFDocument, rgb, StandardFonts } from 'pdf-lib';\n\nconst formatDate = (dateString) => {\n  if (!dateString) return \"\";\n  const [datePart, timePart] = dateString.split(\"T\");\n  const time = timePart.split(\".\")[0];\n  return `${datePart} ${time}`;\n};\n\nexport const generatePDF = async (ips) => {\n  const pdfDoc = await PDFDocument.create();\n  const page = pdfDoc.addPage([595.28, 841.89]); // A4 size in points\n  const { width, height } = page.getSize();\n\n  const font = await pdfDoc.embedFont(StandardFonts.Helvetica);\n  const boldFont = await pdfDoc.embedFont(StandardFonts.HelveticaBold);\n\n  const fontSize = 10;\n  const margin = 50;\n  let yOffset = height - margin;\n\n  // Modified drawText function to handle text wrapping\n  const drawText = (text, font, size, x, y) => {\n    const lines = text.split('\\n');\n    lines.forEach((line, index) => {\n      page.drawText(line, {\n        x,\n        y: y - (index * size * 1.2), // Adjust line height for wrapped text\n        size,\n        font,\n        color: rgb(0, 0, 0),\n        maxWidth: width - 2 * margin,\n        lineHeight: size * 1.2, // Line height adjustment\n      });\n    });\n\n    return y - (lines.length * size * 1.2); // Return the new yOffset after drawing text\n  };\n  // Add title\n  drawText(`Patient Report: ${ips.patient.given} ${ips.patient.name}`, boldFont, 12, margin, yOffset);\n  yOffset -= 20;\n\n  const details = [\n    `Name: ${ips.patient.name}`,\n    `Given Name: ${ips.patient.given}`,\n    `DOB: ${ips.patient.dob.split(\"T\")[0]}`,\n    `Gender: ${ips.patient.gender}`,\n    `Country: ${ips.patient.nation}`,\n    `Practitioner: ${ips.patient.practitioner}`,\n    `Organization: ${ips.patient.organization}`\n  ];\n\n  // Add patient details\n  details.forEach(detail => {\n    if (yOffset < margin) {\n      yOffset = height - margin;\n      pdfDoc.addPage();\n    }\n    drawText(detail, font, fontSize, margin, yOffset);\n    yOffset -= 15;\n  });\n\n  yOffset -= 5;\n\n  const sections = [\n    { title: \"Medications\", items: ips.medication, formatItem: (item, index) => `${index + 1}. ${item.name} - Date: ${formatDate(item.date)} - Dosage: ${item.dosage}` },\n    { title: \"Allergies\", items: ips.allergies, formatItem: (item, index) => `${index + 1}. ${item.name} - Criticality: ${item.criticality} - Date: ${item.date.split(\"T\")[0]}` },\n    { title: \"Conditions\", items: ips.conditions, formatItem: (item, index) => `${index + 1}. ${item.name} - Date: ${formatDate(item.date)}` },\n    { title: \"Observations\", items: ips.observations, formatItem: (item, index) => `${index + 1}. ${item.name} - Date: ${formatDate(item.date)} - Value: ${item.value}` },\n    { title: \"Immunizations\", items: ips.immunizations, formatItem: (item, index) => `${index + 1}. ${item.name} - Date: ${item.date.split(\"T\")[0]} - System: ${item.system}` }\n  ];\n\n  // Adjust yOffset calculation when drawing text\n  sections.forEach(section => {\n    yOffset -= 15;\n    if (yOffset < margin) {\n      yOffset = height - margin;\n      pdfDoc.addPage();\n    }\n    drawText(section.title, boldFont, fontSize + 2, margin, yOffset);\n    yOffset -= 15;\n\n    section.items.forEach((item, index) => {\n      if (yOffset < margin) {\n        yOffset = height - margin;\n        pdfDoc.addPage();\n      }\n      const text = section.formatItem(item, index);\n      yOffset = drawText(text, font, fontSize, margin, yOffset);\n      yOffset -= 5; // Adjust spacing between items\n    });\n  });\n\n  const pdfBytes = await pdfDoc.save();\n\n  const blob = new Blob([pdfBytes], { type: 'application/pdf' });\n  const url = URL.createObjectURL(blob);\n\n  const newWindow = window.open(url);\n\n  setTimeout(() => {\n    newWindow.document.title = `Patient_${ips.patient.given}_${ips.patient.name}_Report.pdf`;\n    const downloadLink = newWindow.document.createElement('a');\n    downloadLink.href = url;\n    downloadLink.download = `Patient_${ips.patient.given}_${ips.patient.name}_Report.pdf`;\n    newWindow.document.body.appendChild(downloadLink);\n\n    setTimeout(() => {\n      downloadLink.parentNode.removeChild(downloadLink);\n    }, 1000);\n  }, 500);\n};\n","import React, { useContext, useState } from \"react\";\nimport { Button, Modal, Form, OverlayTrigger, Tooltip, Row, Col } from \"react-bootstrap\";\nimport { Link } from \"react-router-dom\";\nimport { faFileMedical, faQrcode, faTrash, faBeer, faEdit, faFileExport, faUpload } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport axios from 'axios';\nimport { PatientContext } from '../../PatientContext';\nimport { useLoading } from '../../contexts/LoadingContext';\nimport \"./components.css\";\nimport { generatePDF } from './generatePDF';\n\nconst formatDate = (dateString) => {\n  if (!dateString) return \"\";\n  const [datePart, timePart] = dateString.split(\"T\");\n  const time = timePart.split(\".\")[0];\n  //return time === \"00:00:00\" ? datePart : `${datePart} ${time}`;\n  return `${datePart} ${time}`;\n};\n\nexport function IPS({ ips, remove, update }) {\n  const [expanded, setExpanded] = useState(false);\n  const [showConfirmModal, setShowConfirmModal] = useState(false);\n  const [showEditModal, setShowEditModal] = useState(false);\n  const [editIPS, setEditIPS] = useState({ ...ips });\n  const { setSelectedPatient } = useContext(PatientContext);\n  const { startLoading, stopLoading } = useLoading();\n\n  const handleRemove = () => setShowConfirmModal(true);\n\n  const handleConfirmDelete = () => {\n    remove(ips._id);\n    setShowConfirmModal(false);\n  };\n\n  const handleCancelDelete = () => setShowConfirmModal(false);\n\n  const handleSelection = () => {\n    setSelectedPatient([ips])\n    startLoading();\n  };\n\n  const handleEdit = () => {\n    setEditIPS({ ...ips });  // Reset the form with the current IPS data\n    setShowEditModal(true);\n  };\n\n\n  const handleEditChange = (e) => {\n    const { name, value } = e.target;\n    setEditIPS((prev) => ({\n      ...prev,\n      patient: {\n        ...prev.patient,\n        [name]: value,\n      }\n    }));\n  };\n\n  const handleSaveEdit = () => {\n    startLoading();\n    axios.put(`/ips/${ips._id}`, editIPS)\n      .then(response => {\n        update(response.data);\n        setShowEditModal(false);\n      })\n      .catch(error => console.error(\"There was an error updating the IPS record!\", error))\n      .finally(() => stopLoading());\n  };\n\n  const handleAddItem = (type) => {\n    setEditIPS((prev) => ({\n      ...prev,\n      [type]: [...prev[type], { name: '', date: '', dosage: '', criticality: '', value: '', system: '', code: '' }],\n    }));\n  };\n\n  const handleRemoveItem = (type, index) => {\n    setEditIPS((prev) => ({\n      ...prev,\n      [type]: prev[type].filter((_, i) => i !== index),\n    }));\n  };\n\n  const handleChangeItem = (type, index, e) => {\n    const { name, value } = e.target;\n    setEditIPS((prev) => ({\n      ...prev,\n      [type]: prev[type].map((item, i) => i === index ? { ...item, [name]: value } : item),\n    }));\n  };\n\n  const handleGeneratePDF = () => {\n    generatePDF(ips);\n  };\n\n  const renderTooltip = (text) => (\n    <Tooltip id={`tooltip-${text}`}>\n      {text}\n    </Tooltip>\n  );\n\n  return (\n    <div className=\"ips\">\n      <div>\n        <h5>IPS UUID: {ips.packageUUID}</h5>\n        {!expanded && (\n          <>\n            <p>\n              Patient: {ips.patient.given} {ips.patient.name}\n            </p>\n            <Button variant=\"link\" onClick={() => setExpanded(true)}>\n              Show More\n            </Button>\n          </>\n        )}\n        {expanded && (\n          <>\n            <h5>Timestamp: {formatDate(ips.timeStamp)}</h5>\n            <h4>Patient Details:</h4>\n            <p>Name: {ips.patient.name}</p>\n            <p>Given Name: {ips.patient.given}</p>\n            <p>DOB: {ips.patient.dob.split(\"T\")[0]}</p>\n            <p>Gender: {ips.patient.gender}</p>\n            <p>Country: {ips.patient.nation}</p>\n            <p>Practitioner: {ips.patient.practitioner}</p>\n            <p>Organization: {ips.patient.organization}</p>\n\n            {ips.medication && ips.medication.length > 0 && (\n              <>\n                <h4>Medications:</h4>\n                <table className=\"table table-striped\">\n                  <thead>\n                    <tr>\n                      <th>Name</th>\n                      <th>Code</th>\n                      <th>System</th>\n                      <th>Date</th>\n                      <th>Dosage</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {ips.medication.map((med, index) => (\n                      <tr key={index}>\n                        <td>{med.name}</td>\n                        <td>{med.code}</td>\n                        <td>{med.system}</td>\n                        <td>{formatDate(med.date)}</td>\n                        <td>{med.dosage}</td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n              </>\n            )}\n\n            {ips.allergies && ips.allergies.length > 0 && (\n              <>\n                <h4>Allergies:</h4>\n                <table className=\"table table-striped\">\n                  <thead>\n                    <tr>\n                      <th>Name</th>\n                      <th>Code</th>\n                      <th>System</th>\n                      <th>Criticality</th>\n                      <th>Date</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {ips.allergies.map((allergy, index) => (\n                      <tr key={index}>\n                        <td>{allergy.name}</td>\n                        <td>{allergy.code}</td>\n                        <td>{allergy.system}</td>\n                        <td>{allergy.criticality}</td>\n                        <td>{formatDate(allergy.date)}</td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n              </>\n            )}\n\n            {ips.conditions && ips.conditions.length > 0 && (\n              <>\n                <h4>Conditions:</h4>\n                <table className=\"table table-striped\">\n                  <thead>\n                    <tr>\n                      <th>Name</th>\n                      <th>Code</th>\n                      <th>System</th>\n                      <th>Date</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {ips.conditions.map((condition, index) => (\n                      <tr key={index}>\n                        <td>{condition.name}</td>\n                        <td>{condition.code}</td>\n                        <td>{condition.system}</td>\n                        <td>{formatDate(condition.date)}</td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n              </>\n            )}\n\n            {ips.observations && ips.observations.length > 0 && (\n              <>\n                <h4>Observations:</h4>\n                <table className=\"table table-striped\">\n                  <thead>\n                    <tr>\n                      <th>Name</th>\n                      <th>Code</th>\n                      <th>System</th>\n                      <th>Date</th>\n                      <th>Value</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {ips.observations.map((observation, index) => (\n                      <tr key={index}>\n                        <td>{observation.name}</td>\n                        <td>{observation.code}</td>\n                        <td>{observation.system}</td>\n                        <td>{formatDate(observation.date)}</td>\n                        <td>{observation.value}</td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n              </>\n            )}\n\n            {ips.immunizations && ips.immunizations.length > 0 && (\n              <>\n                <h4>Immunizations:</h4>\n                <table className=\"table table-striped\">\n                  <thead>\n                    <tr>\n                      <th>Name</th>\n                      <th>Date</th>\n                      <th>System</th>\n                      <th>Code</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {ips.immunizations.map((immunization, index) => (\n                      <tr key={index}>\n                        <td>{immunization.name}</td>\n                        <td>{formatDate(immunization.date)}</td>\n                        <td>{immunization.system}</td>\n                        <td>{immunization.code}</td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n              </>\n            )}\n\n            <Button variant=\"link\" onClick={() => setExpanded(false)}>\n              Show Less\n            </Button>\n          </>\n        )}\n      </div>\n      <div>\n        <OverlayTrigger placement=\"top\" overlay={renderTooltip('View IPS API Page')}>\n          <Link to=\"/api\">\n            <Button variant=\"outline-secondary\" className=\"qr-button custom-button\" onClick={handleSelection}>\n              <FontAwesomeIcon icon={faFileMedical} />\n            </Button>\n          </Link>\n        </OverlayTrigger>\n\n        <OverlayTrigger placement=\"top\" overlay={renderTooltip('View QR Code Page')}>\n          <Link to=\"/qr\">\n            <Button variant=\"outline-secondary\" className=\"qr-button custom-button\" onClick={handleSelection}>\n              <FontAwesomeIcon icon={faQrcode} />\n            </Button>\n          </Link>\n        </OverlayTrigger>\n\n        <OverlayTrigger placement=\"top\" overlay={renderTooltip('View BEER Garden Page')}>\n          <Link to=\"/beergarden\">\n            <Button variant=\"outline-secondary\" className=\"qr-button custom-button\" onClick={handleSelection}>\n              <FontAwesomeIcon icon={faBeer} />\n            </Button>\n          </Link>\n        </OverlayTrigger>\n\n        <OverlayTrigger placement=\"top\" overlay={renderTooltip('View External POST Page')}>\n          <Link to=\"/puships\">\n            <Button variant=\"outline-secondary\" className=\"qr-button custom-button\" onClick={handleSelection}>\n              <FontAwesomeIcon icon={faUpload} />\n            </Button>\n          </Link>\n        </OverlayTrigger>\n\n        <OverlayTrigger placement=\"top\" overlay={renderTooltip('Generate PDF')}>\n          <Button variant=\"outline-secondary\" className=\"qr-button custom-button\" onClick={handleGeneratePDF}>\n            <FontAwesomeIcon icon={faFileExport} />\n          </Button>\n        </OverlayTrigger>\n\n        <OverlayTrigger placement=\"top\" overlay={renderTooltip('Edit IPS Record')}>\n          <Button variant=\"outline-secondary\" className=\"custom-button\" onClick={handleEdit}>\n            <FontAwesomeIcon icon={faEdit} />\n          </Button>\n        </OverlayTrigger>\n\n        <OverlayTrigger placement=\"top\" overlay={renderTooltip('Delete IPS Record')}>\n          <Button variant=\"outline-danger\" className=\"custom-button\" onClick={handleRemove}>\n            <FontAwesomeIcon icon={faTrash} />\n          </Button>\n        </OverlayTrigger>\n      </div>\n\n      <Modal show={showConfirmModal} onHide={handleCancelDelete}>\n        <Modal.Header closeButton>\n          <Modal.Title>Confirm Deletion</Modal.Title>\n        </Modal.Header>\n        <Modal.Body>Are you sure you want to delete this IPS record?</Modal.Body>\n        <Modal.Footer>\n          <Button variant=\"secondary\" onClick={handleCancelDelete}>\n            Cancel\n          </Button>\n          <Button variant=\"danger\" onClick={handleConfirmDelete}>\n            Delete\n          </Button>\n        </Modal.Footer>\n      </Modal>\n\n      <Modal show={showEditModal} onHide={() => setShowEditModal(false)} dialogClassName=\"edit-modal\">\n        <Modal.Header closeButton>\n          <Modal.Title>Edit Patient</Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n          <Form>\n            {/* Patient Details */}\n            <Row>\n              <Col>\n                <Form.Group controlId=\"formPatientName\">\n                  <Form.Label>Name</Form.Label>\n                  <Form.Control\n                    type=\"text\"\n                    name=\"name\"\n                    value={editIPS.patient.name}\n                    onChange={handleEditChange}\n                  />\n                </Form.Group>\n              </Col>\n              <Col>\n                <Form.Group controlId=\"formPatientGiven\">\n                  <Form.Label>Given Name</Form.Label>\n                  <Form.Control\n                    type=\"text\"\n                    name=\"given\"\n                    value={editIPS.patient.given}\n                    onChange={handleEditChange}\n                  />\n                </Form.Group>\n              </Col>\n            </Row>\n            <Row>\n              <Col>\n                <Form.Group controlId=\"formPatientDOB\">\n                  <Form.Label>DOB</Form.Label>\n                  <Form.Control\n                    type=\"date\"\n                    name=\"dob\"\n                    value={editIPS.patient.dob.split(\"T\")[0]}\n                    onChange={handleEditChange}\n                  />\n                </Form.Group>\n              </Col>\n              <Col>\n                <Form.Group controlId=\"formPatientGender\">\n                  <Form.Label>Gender</Form.Label>\n                  <Form.Control\n                    as=\"select\"\n                    name=\"gender\"\n                    value={editIPS.patient.gender}\n                    onChange={handleEditChange}\n                  >\n                    <option value=\"\">Select Gender</option>\n                    <option value=\"Male\">Male</option>\n                    <option value=\"Female\">Female</option>\n                    <option value=\"Other\">Other</option>\n                    <option value=\"Unknown\">Unknown</option>\n                  </Form.Control>\n                </Form.Group>\n              </Col>\n            </Row>\n            <Row>\n              <Col>\n                <Form.Group controlId=\"formPatientNation\">\n                  <Form.Label>Country</Form.Label>\n                  <Form.Control\n                    type=\"text\"\n                    name=\"nation\"\n                    value={editIPS.patient.nation}\n                    onChange={handleEditChange}\n                  />\n                </Form.Group>\n              </Col>\n              <Col>\n                <Form.Group controlId=\"formPatientPractitioner\">\n                  <Form.Label>Practitioner</Form.Label>\n                  <Form.Control\n                    type=\"text\"\n                    name=\"practitioner\"\n                    value={editIPS.patient.practitioner}\n                    onChange={handleEditChange}\n                  />\n                </Form.Group>\n              </Col>\n              <Col>\n                <Form.Group controlId=\"formPatientOrganization\">\n                  <Form.Label>Organization</Form.Label>\n                  <Form.Control\n                    type=\"text\"\n                    name=\"organization\"\n                    value={editIPS.patient.organization}\n                    onChange={handleEditChange}\n                  />\n                </Form.Group>\n              </Col>\n            </Row>\n\n            {/* Medications Table */}\n            <h4>Medications:</h4>\n            <table className=\"table table-bordered\">\n              <thead>\n                <tr>\n                  <th>Name</th>\n                  <th>Code</th>\n                  <th>System</th>\n                  <th>Date</th>\n                  <th>Dosage</th>\n                  <th>Actions</th>\n                </tr>\n              </thead>\n              <tbody>\n                {editIPS.medication.map((med, index) => (\n                  <tr key={index}>\n                    <td>\n                      <Form.Control\n                        type=\"text\"\n                        name=\"name\"\n                        value={med.name}\n                        onChange={(e) => handleChangeItem(\"medication\", index, e)}\n                      />\n                    </td>\n                    <td>\n                      <Form.Control\n                        type=\"text\"\n                        name=\"code\"\n                        value={med.code}\n                        onChange={(e) => handleChangeItem(\"medication\", index, e)}\n                      />\n                    </td>\n                    <td>\n                      <Form.Control\n                        type=\"text\"\n                        name=\"system\"\n                        value={med.system}\n                        onChange={(e) => handleChangeItem(\"medication\", index, e)}\n                      />\n                    </td>\n                    <td>\n                      <Form.Control\n                        type=\"datetime-local\"\n                        name=\"date\"\n                        value={formatDate(med.date)}\n                        onChange={(e) => handleChangeItem(\"medication\", index, e)}\n                      />\n                    </td>\n                    <td>\n                      <Form.Control\n                        type=\"text\"\n                        name=\"dosage\"\n                        value={med.dosage}\n                        onChange={(e) => handleChangeItem(\"medication\", index, e)}\n                      />\n                    </td>\n                    <td>\n                      <Button variant=\"outline-danger\" onClick={() => handleRemoveItem(\"medication\", index)}>\n                        <FontAwesomeIcon icon={faTrash} />\n                      </Button>\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n            <Button variant=\"primary\" onClick={() => handleAddItem(\"medication\")}>\n              Add Medication\n            </Button>\n\n            {/* Allergies Table */}\n            <h4>Allergies:</h4>\n            <table className=\"table table-bordered\">\n              <thead>\n                <tr>\n                  <th>Name</th>\n                  <th>Code</th>\n                  <th>System</th>\n                  <th>Criticality</th>\n                  <th>Date</th>\n                  <th>Actions</th>\n                </tr>\n              </thead>\n              <tbody>\n                {editIPS.allergies.map((allergy, index) => (\n                  <tr key={index}>\n                    <td>\n                      <Form.Control\n                        type=\"text\"\n                        name=\"name\"\n                        value={allergy.name}\n                        onChange={(e) => handleChangeItem(\"allergies\", index, e)}\n                      />\n                    </td>\n                    <td>\n                      <Form.Control\n                        type=\"text\"\n                        name=\"code\"\n                        value={allergy.code}\n                        onChange={(e) => handleChangeItem(\"allergies\", index, e)}\n                      />\n                    </td>\n                    <td>\n                      <Form.Control\n                        type=\"text\"\n                        name=\"system\"\n                        value={allergy.system}\n                        onChange={(e) => handleChangeItem(\"allergies\", index, e)}\n                      />\n                    </td>\n                    <td>\n                      <Form.Control\n                        as=\"select\"\n                        name=\"criticality\"\n                        value={allergy.criticality}\n                        onChange={(e) => handleChangeItem(\"allergies\", index, e)}\n                      >\n                        <option value=\"\">Select Criticality</option>\n                        <option value=\"High\">High</option>\n                        <option value=\"Medium\">Medium</option>\n                        <option value=\"Low\">Low</option>\n                      </Form.Control>\n                    </td>\n                    <td>\n                      <Form.Control\n                        type=\"date\"\n                        name=\"date\"\n                        value={allergy.date.split(\"T\")[0]}\n                        onChange={(e) => handleChangeItem(\"allergies\", index, e)}\n                      />\n                    </td>\n                    <td>\n                      <Button variant=\"outline-danger\" onClick={() => handleRemoveItem(\"allergies\", index)}>\n                        <FontAwesomeIcon icon={faTrash} />\n                      </Button>\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n            <Button variant=\"primary\" onClick={() => handleAddItem(\"allergies\")}>\n              Add Allergy\n            </Button>\n\n            {/* Conditions Table */}\n            <h4>Conditions:</h4>\n            <table className=\"table table-bordered\">\n              <thead>\n                <tr>\n                  <th>Name</th>\n                  <th>Code</th>\n                  <th>System</th>\n                  <th>Date</th>\n                  <th>Actions</th>\n                </tr>\n              </thead>\n              <tbody>\n                {editIPS.conditions.map((condition, index) => (\n                  <tr key={index}>\n                    <td>\n                      <Form.Control\n                        type=\"text\"\n                        name=\"name\"\n                        value={condition.name}\n                        onChange={(e) => handleChangeItem(\"conditions\", index, e)}\n                      />\n                    </td>\n                    <td>\n                      <Form.Control\n                        type=\"text\"\n                        name=\"code\"\n                        value={condition.code}\n                        onChange={(e) => handleChangeItem(\"conditions\", index, e)}\n                      />\n                    </td>\n                    <td>\n                      <Form.Control\n                        type=\"text\"\n                        name=\"system\"\n                        value={condition.system}\n                        onChange={(e) => handleChangeItem(\"conditions\", index, e)}\n                      />\n                    </td>\n                    <td>\n                      <Form.Control\n                        type=\"date\"\n                        name=\"date\"\n                        value={condition.date.split(\"T\")[0]}\n                        onChange={(e) => handleChangeItem(\"conditions\", index, e)}\n                      />\n                    </td>\n                    <td>\n                      <Button variant=\"outline-danger\" onClick={() => handleRemoveItem(\"conditions\", index)}>\n                        <FontAwesomeIcon icon={faTrash} />\n                      </Button>\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n            <Button variant=\"primary\" onClick={() => handleAddItem(\"conditions\")}>\n              Add Condition\n            </Button>\n\n            {/* Observations Table */}\n            <h4>Observations:</h4>\n            <table className=\"table table-bordered\">\n              <thead>\n                <tr>\n                  <th>Name</th>\n                  <th>Code</th>\n                  <th>System</th>\n                  <th>Date</th>\n                  <th>Value</th>\n                  <th>Actions</th>\n                </tr>\n              </thead>\n              <tbody>\n                {editIPS.observations.map((observation, index) => (\n                  <tr key={index}>\n                    <td>\n                      <Form.Control\n                        type=\"text\"\n                        name=\"name\"\n                        value={observation.name}\n                        onChange={(e) => handleChangeItem(\"observations\", index, e)}\n                      />\n                    </td>\n                    <td>\n                      <Form.Control\n                        type=\"text\"\n                        name=\"code\"\n                        value={observation.code}\n                        onChange={(e) => handleChangeItem(\"observations\", index, e)}\n                      />\n                    </td>\n                    <td>\n                      <Form.Control\n                        type=\"text\"\n                        name=\"system\"\n                        value={observation.system}\n                        onChange={(e) => handleChangeItem(\"observations\", index, e)}\n                      />\n                    </td>\n                    <td>\n                      <Form.Control\n                        type=\"datetime-local\"\n                        name=\"date\"\n                        value={formatDate(observation.date)}\n                        onChange={(e) => handleChangeItem(\"observations\", index, e)}\n                      />\n                    </td>\n                    <td>\n                      <Form.Control\n                        type=\"text\"\n                        name=\"value\"\n                        value={observation.value}\n                        onChange={(e) => handleChangeItem(\"observations\", index, e)}\n                      />\n                    </td>\n                    <td>\n                      <Button variant=\"outline-danger\" onClick={() => handleRemoveItem(\"observations\", index)}>\n                        <FontAwesomeIcon icon={faTrash} />\n                      </Button>\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n            <Button variant=\"primary\" onClick={() => handleAddItem(\"observations\")}>\n              Add Observation\n            </Button>\n\n            {/* Immunizations Table */}\n            <h4>Immunizations:</h4>\n            <table className=\"table table-bordered\">\n              <thead>\n                <tr>\n                  <th>Name</th>\n                  <th>System</th>\n                  <th>Code</th>\n                  <th>Date</th>\n                  <th>Actions</th>\n                </tr>\n              </thead>\n              <tbody>\n                {editIPS.immunizations.map((immunization, index) => (\n                  <tr key={index}>\n                    <td>\n                      <Form.Control\n                        type=\"text\"\n                        name=\"name\"\n                        value={immunization.name}\n                        onChange={(e) => handleChangeItem(\"immunizations\", index, e)}\n                      />\n                    </td>\n                    <td>\n                      <Form.Control\n                        type=\"text\"\n                        name=\"system\"\n                        value={immunization.system}\n                        onChange={(e) => handleChangeItem(\"immunizations\", index, e)}\n                      />\n                    </td>\n                    <td>\n                      <Form.Control\n                        type=\"text\"\n                        name=\"code\"\n                        value={immunization.code}\n                        onChange={(e) => handleChangeItem(\"immunizations\", index, e)}\n                      />\n                    </td>\n                    <td>\n                      <Form.Control\n                        type=\"datetime-local\"\n                        name=\"date\"\n                        value={formatDate(immunization.date)}\n                        onChange={(e) => handleChangeItem(\"immunizations\", index, e)}\n                      />\n                    </td>\n                    <td>\n                      <Button variant=\"outline-danger\" onClick={() => handleRemoveItem(\"immunizations\", index)}>\n                        <FontAwesomeIcon icon={faTrash} />\n                      </Button>\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n            <Button variant=\"primary\" onClick={() => handleAddItem(\"immunizations\")}>\n              Add Immunization\n            </Button>\n          </Form>\n        </Modal.Body>\n\n        <Modal.Footer>\n          <Button variant=\"secondary\" onClick={() => setShowEditModal(false)}>\n            Cancel\n          </Button>\n          <Button variant=\"primary\" onClick={handleSaveEdit}>\n            Save Changes\n          </Button>\n        </Modal.Footer>\n      </Modal>\n    </div>\n  );\n}","import React, { useState, useContext } from \"react\";\nimport \"./Page.css\";\nimport { Card, Form, Button } from \"react-bootstrap\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport axios from \"axios\";\nimport { FormIPS } from \"./Components/FormIPS\";\nimport { IPS } from \"./Components/IPS\";\nimport { PatientContext } from '../PatientContext';\nimport { useLoading } from '../contexts/LoadingContext';\n\nconst server = process.env.REACT_APP_API_BASE_URL\n  ? axios.create({ baseURL: process.env.REACT_APP_API_BASE_URL })\n  : axios.create({});\n\nfunction HomePage() {\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const { selectedPatients, setSelectedPatients, setSelectedPatient } = useContext(PatientContext);\n  const { startLoading, stopLoading } = useLoading();\n\n  const add = (formData) => {\n    const cleanedMedication = formData.medication.filter(item => {\n      return item.name.trim() !== \"\" || item.date.trim() !== \"\" || item.dosage.trim() !== \"\";\n    });\n\n    const cleanedAllergies = formData.allergies.filter(item => {\n      return item.name.trim() !== \"\" || item.criticality.trim() !== \"\" || item.date.trim() !== \"\";\n    });\n\n    const cleanedConditions = formData.conditions.filter(item => {\n      return item.name.trim() !== \"\" || item.date.trim() !== \"\";\n    });\n\n    const cleanedObservations = formData.observations.filter(item => {\n      return item.name.trim() !== \"\" || item.date.trim() !== \"\" || item.value.trim() !== \"\";\n    });\n\n    const cleanedImmunizations = formData.immunizations.filter(item => {\n      return item.name.trim() !== \"\" || item.date.trim() !== \"\";\n    });\n\n    const cleanedFormData = {\n      ...formData,\n      medication: cleanedMedication,\n      allergies: cleanedAllergies,\n      conditions: cleanedConditions,\n      observations: cleanedObservations,\n      immunizations: cleanedImmunizations\n    };\n\n    console.log(\"Form Data\", cleanedFormData);\n    console.log(JSON.stringify(cleanedFormData, null, 2));\n\n    startLoading();\n    server\n      .post(\"/ips\", cleanedFormData)\n      .then((response) => {\n        return response.data;\n      })\n      .then((createdIPS) => {\n        if (createdIPS) {\n          const newIPS = [...selectedPatients, createdIPS];\n          setSelectedPatients(newIPS);\n          setSelectedPatient(createdIPS);\n        }\n      })\n      .catch((error) => {\n        console.log(\"Error\", error);\n      })\n      .finally(() => {\n        stopLoading();\n      });\n  };\n\n  const remove = (id) => {\n    startLoading();\n    server\n      .delete(`/ips/${id}`)\n      .then((response) => {\n        return response.data;\n      })\n      .then((removedId) => {\n        const newIPS = [...selectedPatients];\n\n        let index = selectedPatients.findIndex((c) => c._id === removedId);\n        if (index !== -1) {\n          newIPS.splice(index, 1);\n          setSelectedPatients(newIPS);\n        }\n      })\n      .catch((error) => {\n        console.log(\"Error\", error);\n      })\n      .finally(() => {\n        stopLoading();\n      });\n  };\n\n  const update = (updatedIPS) => {\n    const newIPS = selectedPatients.map((ips) =>\n      ips._id === updatedIPS._id ? updatedIPS : ips\n    );\n    setSelectedPatients(newIPS);\n    setSelectedPatient(updatedIPS);\n  };\n\n  const searchPatients = () => {\n    startLoading();\n    server\n      .get(`/ips/search/${searchTerm}`)\n      .then((response) => {\n        return response.data;\n      })\n      .then((ipss) => {\n        if (ipss) {\n          setSelectedPatients(ipss);\n          if (ipss.length > 0) {\n            setSelectedPatient(ipss[0]);  // Set the first patient as the selected patient\n          }\n        }\n      })\n      .catch((error) => {\n        console.log(\"Error\", error);\n      })\n      .finally(() => {\n        stopLoading();\n      });\n  };\n\n  const handleSearchChange = (event) => {\n    setSearchTerm(event.target.value);\n  };\n\n  const handleSearchSubmit = (event) => {\n    event.preventDefault();\n    searchPatients();\n  };\n\n  return (\n    <div className=\"app\">\n      <div className=\"container\">\n        <FormIPS add={add} />\n        <h3>Find Patient</h3>\n        <Form onSubmit={handleSearchSubmit}>\n          <Form.Group controlId=\"searchTerm\">\n            <Form.Label>Patient Name</Form.Label>\n            <Form.Control\n              type=\"text\"\n              placeholder=\"Enter patient name\"\n              value={searchTerm}\n              onChange={handleSearchChange}\n            />\n          </Form.Group>\n          <Button variant=\"primary\" type=\"submit\" className=\"mb-3\">\n            Search\n          </Button>\n        </Form>\n        <h3>Matching Patients</h3>\n        <div>\n          {selectedPatients.map((ips) => (\n            <Card key={ips._id} onClick={() => setSelectedPatient(ips)}>\n              <Card.Body>\n                <IPS ips={ips} remove={remove} update={update} />\n              </Card.Body>\n            </Card>\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default HomePage;\n","import React, { useState, useEffect, useContext } from 'react';\nimport QRCode from 'qrcode.react';\nimport axios from 'axios';\nimport { Button, Alert, DropdownButton, Dropdown } from 'react-bootstrap';\nimport './Page.css';\nimport { PatientContext } from '../PatientContext';\nimport { useLoading } from '../contexts/LoadingContext';\n\nfunction QRPage() {\n  const { selectedPatients, selectedPatient, setSelectedPatient } = useContext(PatientContext);\n  const [qrData, setQRData] = useState('');\n  const [mode, setMode] = useState('ipsurl');\n  const [showNotification, setShowNotification] = useState(false);\n  const [responseSize, setResponseSize] = useState(0);\n  const { startLoading, stopLoading } = useLoading();\n\n\n  const handleRecordChange = (recordId) => {\n    const record = selectedPatients.find(record => record._id === recordId);\n    startLoading();\n    setSelectedPatient(record);\n  };\n\n  const THRESHOLD = 3000;\n\n  useEffect(() => {\n    if (selectedPatient) {\n      let endpoint;\n\n      if (mode === 'ipsbeerwithdelim') {\n        endpoint = `/ipsbeer/${selectedPatient._id}/pipe`;\n      } else {\n        endpoint = `/${mode}/${selectedPatient._id}`;\n      }\n\n      if (mode === 'ipsurl') {\n        const baseUrl = window.location.origin; // Get the base URL of the application\n        const url = `${baseUrl}/ips/${selectedPatient.packageUUID}`;\n        setQRData(url);\n        setResponseSize(url.length);\n        setShowNotification(false);\n        stopLoading();\n      } else {\n        axios.get(endpoint)\n          .then(response => {\n            let responseData;\n            if (mode === 'ipsminimal' || mode === 'ipsbeer' || mode === 'ipsbeerwithdelim' || mode === 'ipshl72x') {\n              responseData = response.data;\n            } else {\n              responseData = JSON.stringify(response.data);\n            }\n\n            const responseSize = new TextEncoder().encode(responseData).length;\n            setResponseSize(responseSize);\n\n            console.log('Response data length:', responseSize);\n\n            if (responseSize > THRESHOLD) {\n              setShowNotification(true);\n            } else {\n              setQRData(responseData);\n              console.log('QR Data:', responseData);\n              setShowNotification(false);\n            }\n          })\n          .catch(error => {\n            console.error('Error fetching IPS record:', error);\n          })\n          .finally(() => {\n            stopLoading();\n          });\n      }\n    }\n  }, [selectedPatient, mode, stopLoading]);\n\n  const handleDownloadQR = () => {\n    const canvas = document.getElementById('qr-canvas');\n    const pngUrl = canvas.toDataURL('image/png');\n    const downloadLink = document.createElement('a');\n    downloadLink.href = pngUrl;\n    downloadLink.download = 'ips_qr_code.png';\n    document.body.appendChild(downloadLink);\n    downloadLink.click();\n    document.body.removeChild(downloadLink);\n  };\n\n  const handleModeChange = (selectedMode) => {\n    startLoading();\n    setMode(selectedMode);\n  };\n\n  const maxQRSize = 600; // QR code canvas Max Size\n\n  const qrSize = Math.min(window.innerWidth * 0.8, window.innerHeight * 0.8, maxQRSize);\n\n  return (\n    <div className=\"app\">\n      <div className=\"container\">\n        <div className=\"header-container\">\n          <h3>Generate QR Code {mode !== 'ipsurl' && (\n            <span className=\"response-size\"> - {responseSize} bytes</span>\n          )}</h3>\n        </div>\n        {selectedPatients.length > 0 && selectedPatient && <>\n          <div className=\"dropdown-container\">\n            <DropdownButton id=\"dropdown-record\" title={`Patient: ${selectedPatient.patient.given} ${selectedPatient.patient.name}`} onSelect={handleRecordChange} className=\"dropdown-button\">\n              {selectedPatients.map(record => (\n                <Dropdown.Item key={record._id} eventKey={record._id} active={selectedPatient && selectedPatient._id === record._id}>\n                  {record.patient.given} {record.patient.name}\n                </Dropdown.Item>\n              ))}\n            </DropdownButton>\n          </div>\n          <div className=\"dropdown-container\">\n            <DropdownButton id=\"dropdown-mode\" title={`Mode: ${mode}`} onSelect={handleModeChange} className=\"dropdown-button\">\n              <Dropdown.Item eventKey=\"ipsurl\">IPS URL</Dropdown.Item>\n              <Dropdown.Item eventKey=\"ipsunified\">IPS Unified JSON Bundle</Dropdown.Item>\n              <Dropdown.Item eventKey=\"ips\">IPS JSON Bundle</Dropdown.Item>\n              <Dropdown.Item eventKey=\"ipsbasic\">IPS Minimal</Dropdown.Item>\n              <Dropdown.Item eventKey=\"ipsmongo\">IPS MongoDB</Dropdown.Item>\n              <Dropdown.Item eventKey=\"ipslegacy\">IPS Legacy JSON Bundle</Dropdown.Item>\n              <Dropdown.Item eventKey=\"ipsbeer\">IPS BEER (newline)</Dropdown.Item>\n              <Dropdown.Item eventKey=\"ipsbeerwithdelim\">IPS BEER with Delimiter (pipe |)</Dropdown.Item>\n              <Dropdown.Item eventKey=\"ipshl72x\">IPS HL7 v2.3</Dropdown.Item>\n            </DropdownButton>\n          </div>\n        </>}\n        {showNotification ? (\n          <Alert variant=\"danger\">Data is too large to display. Please try a different mode.</Alert>\n        ) : (\n          <div className=\"qr-container\">\n            <QRCode id=\"qr-canvas\" value={qrData} size={qrSize} />\n          </div>\n        )}\n        <br />\n        <div className=\"button-container\">\n          <Button className=\"mb-3\" onClick={handleDownloadQR}>Download QR Code</Button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default QRPage;","import React, { useState } from 'react';\nimport { Button, Modal, Form } from 'react-bootstrap';\nimport axios from 'axios';\nimport './Page.css';\nimport { useLoading } from '../contexts/LoadingContext';\n\nfunction DataUploadPage() {\n  const [data, setData] = useState('');\n  const [validatedRecords, setValidatedRecords] = useState([]);\n  const [showConfirmationModal, setShowConfirmationModal] = useState(false);\n  const [showNoRecordsPassed, setShowNoRecordsPassed] = useState(false);\n  const { startLoading, stopLoading } = useLoading();\n\n  const handleUpload = () => {\n    // Check if data is empty\n    if (!data.trim()) {\n      return;\n    }\n\n    // Split the data by lines to get individual records\n    const records = data.split('\\n'); // Split data into individual records\n    const ipsRecords = records.map(record => {\n      const fields = record.split(',');// Split record into fields\n\n      // Validate number of fields\n      if (fields.length !== 10) {\n        console.error('Invalid number of fields:', fields);\n        return null; // Skip record if number of fields is not 7\n      }\n\n      const [packageUUID, name, given, dob, gender, nation, practitioner, ...rest] = fields;\n\n      // Validate required fields\n      if (!packageUUID || !name || !given || !dob || !gender || !nation || !practitioner) {\n        console.error('Missing required fields:', fields);\n        return null; // Skip record if any required field is missing\n      }\n\n      // Validate UUID format for packageUUID\n      if (!isValidUUID(packageUUID)) {\n        console.error('Invalid UUID format for packageUUID:', packageUUID);\n        return null; // Skip record if packageUUID is not in a valid UUID format\n      }\n\n      // Validate date format for dob\n      if (!/^\\d{4}-\\d{2}-\\d{2}$/.test(dob)) {\n        console.error('Invalid date format for dob:', dob);\n        return null; // Skip record if dob is not in yyyy-mm-dd format\n      }\n\n      // Check if gender is just single letter and if so make full work e.g. f --> Female, m-->Male, u--->Unknown, o--->Other\n      let genderFinal = gender;\n\n      const genderMap = {\n        f: 'Female',\n        m: 'Male',\n        u: 'Unknown',\n        o: 'Other'\n      };\n      const genderFull = genderMap[\n        gender.toLowerCase() // Convert to lowercase to handle both upper and lower case\n      ];\n      if (genderFull) { genderFinal = genderFull; }\n\n      const timeStamp = new Date().toISOString();\n\n      // Create medication array\n      const medication = [];\n      if (rest[0]) {\n        const medications = rest[0].split(';');\n        if (medications.length % 3 !== 0) {\n          console.error('Invalid medication data:', rest[0]);\n          return null; // Skip record if medication data is not in multiples of three\n        }\n        for (let i = 0; i < medications.length; i += 3) {\n          const [medicationName, medicationDate, medicationDosage] = medications.slice(i, i + 3);\n          if (!medicationName || !medicationDate || !medicationDosage) {\n            console.error('Missing medication field:', medications.slice(i, i + 3));\n            return null; // Skip record if any medication field is missing\n          }\n          if (!/^\\d{4}-\\d{2}-\\d{2}$/.test(medicationDate)) {\n            console.error('Invalid date format for medication date:', medicationDate);\n            return null; // Skip record if medication date is not in yyyy-mm-dd format\n          }\n          medication.push({\n            name: medicationName,\n            date: medicationDate,\n            dosage: medicationDosage\n          });\n        }\n      }\n\n      // Create allergies array\n      const allergies = [];\n      if (rest[1]) {\n        const allergiesData = rest[1].split(';');\n        if (allergiesData.length % 3 !== 0) {\n          console.error('Invalid allergies data:', rest[1]);\n          return null; // Skip record if allergies data is not in multiples of three\n        }\n        for (let i = 0; i < allergiesData.length; i += 3) {\n          const [allergyName, allergyCriticality, allergyDate] = allergiesData.slice(i, i + 3);\n          if (!allergyName || !allergyCriticality || !allergyDate) {\n            console.error('Missing allergy field:', allergiesData.slice(i, i + 3));\n            return null; // Skip record if any allergy field is missing\n          }\n          if (!/^\\d{4}-\\d{2}-\\d{2}$/.test(allergyDate)) {\n            console.error('Invalid date format for allergy date:', allergyDate);\n            return null; // Skip record if allergy date is not in yyyy-mm-dd format\n          }\n          // As we are only interested in active allergies\n          // The data is already sorted in reverse chronological order\n          // So we can just keep the first occurrence of each allergy\n          // We need to trim the allergy name as there are leading/trailing spaces in the data\n          const allergyTrimName = allergyName.trim();\n\n          const existingAllergy = allergies.find(allergy => allergy.name === allergyTrimName);\n          if (!existingAllergy)  {\n            allergies.push({\n              name: allergyTrimName,\n              criticality: allergyCriticality,\n              date: allergyDate\n            });\n          }\n        }\n      }\n\n      // Create Conditions array\n      const conditions = [];\n      if (rest[2]) {\n        const conditionsData = rest[2].split(';');\n        if (conditionsData.length % 2 !== 0) {\n          console.error('Invalid conditions data:', rest[2]);\n          return null; // Skip record if conditions data is not in multiples of two\n        }\n        for (let i = 0; i < conditionsData.length; i += 2) {\n          const [conditionName, conditionDate] = conditionsData.slice(i, i + 2);\n          if (!conditionName || !conditionDate) {\n            console.error('Missing condition field:', conditionsData.slice(i, i + 2));\n            return null; // Skip record if any condition field is missing\n          }\n          if (!/^\\d{4}-\\d{2}-\\d{2}$/.test(conditionDate)) {\n            console.error('Invalid date format for condition date:', conditionDate);\n            return null; // Skip record if condition date is not in yyyy-mm-dd format\n          }\n          // As we are only interested in active conditions\n          // The data is already sorted in reverse chronological order\n          // So we can just keep the first occurrence of each condition\n          // We need to trim the condition name as there are leading/trailing spaces in the data\n          const conditionTrimName = conditionName.trim();\n          \n          const existingCondition = conditions.find(condition => condition.name === conditionTrimName);\n          if (!existingCondition) {\n            conditions.push({\n              name: conditionTrimName,\n              date: conditionDate\n            });\n          }\n        }\n      }\n\n      return {\n        packageUUID,\n        timeStamp,\n        patient: {\n          name,\n          given,\n          dob,\n          gender: genderFinal,\n          nation,\n          practitioner\n        },\n        medication,\n        allergies,\n        conditions\n      };\n    }).filter(record => record !== null); // Remove null records (failed validation)\n\n\n    console.log('IPS Records:', ipsRecords);\n    console.log(JSON.stringify(ipsRecords, null, 2));\n\n    if (ipsRecords.length === 0) {\n      // No records passed validation, show a message to the user\n      setShowNoRecordsPassed(true);\n    } else {\n      // Records passed validation, set them for confirmation and show the confirmation modal\n      setValidatedRecords(ipsRecords);\n      setShowConfirmationModal(true);\n    }\n  };\n\n  const handleChange = (e) => {\n    setData(e.target.value);\n  };\n\n  // Function to validate UUID format\n  // Simple regex - this is isn't a proper validation for UUIDs but will do for this context\n  const isValidUUID = (uuid) => {\n    const UUIDPattern = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;\n    return UUIDPattern.test(uuid);\n  };\n\n  const handleSubmit = () => {\n    setShowConfirmationModal(false);\n    startLoading();\n    //Send the IPS records to the server\n    axios.post('/ipsmany', validatedRecords)\n      .then(response => {\n        console.log('Data uploaded successfully:', response.data);\n        // Add your logic here to handle successful upload\n      })\n      .catch(error => {\n        console.error('Error uploading data:', error);\n        // Add your logic here to handle errors\n      })\n      .finally(() => {\n        // Stop the loading spinner\n        stopLoading();\n      });\n\n    // Clear the data entry textbox\n    setData('');\n  };\n\n  return (\n    <div className=\"app\">\n      <div className=\"container\">\n        <h3>Bulk Upload of DMICP Data for IPS</h3>\n        {/* <textarea\n          rows=\"10\"\n          cols=\"50\"\n          value={data}\n          onChange={handleChange}\n          placeholder=\"Paste your SmartDoc DMICP data here...\"\n        /> */}\n        <div className=\"text-area\">\n          <Form.Control as=\"textarea\"\n            rows={10} value={data}\n            onChange={handleChange}\n            placeholder=\"Paste your DMICP data here...&#13;&#10;(This should be the CSV format created using the IPS SmartDoc)\" />\n        </div>\n        <br />\n        <Button className=\"mb-3\" onClick={handleUpload}>Convert Pasted Data into IPS Records</Button>\n      </div>\n      <Modal show={showNoRecordsPassed} onHide={() => setShowNoRecordsPassed(false)}>\n        <Modal.Header closeButton>\n          <Modal.Title>IPS Import Error</Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n          <p>No records passed validation. Please check your data and try again.</p>\n        </Modal.Body>\n        <Modal.Footer>\n          <Button variant=\"primary\" onClick={() => setShowNoRecordsPassed(false)}>Close</Button>\n        </Modal.Footer>\n      </Modal>\n\n      <Modal show={showConfirmationModal} onHide={() => setShowConfirmationModal(false)}>\n        <Modal.Header closeButton>\n          <Modal.Title>IPS Record Submission Confirmation</Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n          {validatedRecords.length > 0 && (\n            <p>{validatedRecords.length} records have passed validation. Do you want to submit?</p>\n          )}\n        </Modal.Body>\n        <Modal.Footer>\n          <Button variant=\"secondary\" onClick={() => setShowConfirmationModal(false)}>Cancel</Button>\n          <Button variant=\"primary\" onClick={handleSubmit}>Submit</Button>\n        </Modal.Footer>\n      </Modal>\n    </div>\n  );\n}\n\nexport default DataUploadPage;\n","import React from 'react';\nimport { Container, Row, Col, Card } from 'react-bootstrap';\n\nfunction AboutPage() {\n    return (\n        <Container className=\"mt-5\">\n            <Row>\n                <Col>\n                    <h3>About International Patient Summary (IPS)</h3>\n                    <p>\n                        The International Patient Summary (IPS) is a standardized health data format\n                        designed to facilitate the exchange of patient health information across\n                        different healthcare systems and countries. It aims to improve interoperability\n                        and enable seamless sharing of medical records, ensuring better patient care\n                        and safety.\n                    </p>\n                    <p>\n                        IPS contains essential health information such as patient demographics, medical\n                        history, medications, allergies, and more, in a structured and standardized\n                        format.\n                    </p>\n                </Col>\n            </Row>\n            <Row className=\"mt-4\">\n                <Col>\n                    <h3>Useful Links</h3>\n                    <Card>\n                        <Card.Body>\n                            <Card.Title>IPS Implementation Guide</Card.Title>\n                            <Card.Text>\n                                Explore the IPS implementation guide for detailed information on data\n                                elements, standards, and implementation best practices.\n                            </Card.Text>\n                            <Card.Link href=\"https://www.hl7.org/fhir/uv/ips/\">\n                                IPS Implementation Guide\n                            </Card.Link>\n                        </Card.Body>\n                    </Card>\n                    <Card>\n                        <Card.Body>\n                            <Card.Title>IPS Website</Card.Title>\n                            <Card.Text>\n                            Visit the official website of the International Patient Summary (IPS) to \n                            learn more about the standard and its implementation.\n                            </Card.Text>\n                            <Card.Link href=\"https://international-patient-summary.net\">\n                                IPS Website\n                            </Card.Link>\n                        </Card.Body>\n                    </Card>\n                </Col>\n            </Row>\n        </Container>\n    );\n}\n\nexport default AboutPage;\n","// PatientSearch.js\n\nimport React, { useState, useContext } from 'react';\nimport { Form, Button } from 'react-bootstrap';\nimport axios from 'axios';\nimport { PatientContext } from '../PatientContext';\nimport { useLoading } from '../contexts/LoadingContext';\nimport './AppComp.css'; // Import the CSS file\n\nconst server = process.env.REACT_APP_API_BASE_URL\n  ? axios.create({ baseURL: process.env.REACT_APP_API_BASE_URL })\n  : axios.create({});\n\nfunction PatientSearch({ collapseNavbar }) { // Accept collapseNavbar prop\n  const [searchTerm, setSearchTerm] = useState('');\n  const { setSelectedPatients, setSelectedPatient } = useContext(PatientContext);\n  const { startLoading, stopLoading } = useLoading();\n\n  const searchPatients = () => {\n    startLoading();\n    server\n      .get(`/ips/search/${searchTerm}`)\n      .then((response) => response.data)\n      .then((ipss) => {\n        if (ipss) {\n          setSelectedPatients(ipss);\n          if (ipss.length > 0) {\n            setSelectedPatient(ipss[0]);\n            collapseNavbar(); // Call the collapseNavbar function\n          }\n        }\n      })\n      .catch((error) => {\n        console.log('Error', error);\n      })\n      .finally(() => {\n        stopLoading();\n      });\n  };\n\n  const handleSearchChange = (event) => {\n    setSearchTerm(event.target.value);\n  };\n\n  const handleSearchSubmit = (event) => {\n    event.preventDefault();\n    searchPatients();\n  };\n\n  return (\n    <Form inline onSubmit={handleSearchSubmit} className=\"search-form\">\n      <Form.Control\n        type=\"text\"\n        placeholder=\"Find Patient\"\n        value={searchTerm}\n        onChange={handleSearchChange}\n        className=\"mr-sm-2 form-control\"\n      />\n      <Button variant=\"outline-light\" type=\"submit\">\n        Search\n      </Button>\n    </Form>\n  );\n}\n\nexport default PatientSearch;\n","import React, { useContext, useState, useEffect } from 'react';\nimport { Link, useLocation} from 'react-router-dom';\nimport { Container, Nav, Navbar, NavDropdown } from 'react-bootstrap';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faBeer, faCloud, faDownload, faFileMedical, faQrcode, faUpload } from '@fortawesome/free-solid-svg-icons';\nimport { PatientContext } from '../PatientContext';\nimport { useLoading } from '../contexts/LoadingContext';\nimport PatientSearch from './PatientSearch'; // Import the new component\n\n\nfunction NavigationBar() {\n  const { selectedPatients, setSelectedPatient, selectedPatient } = useContext(PatientContext);\n  const [expanded, setExpanded] = useState(false);\n  const { startLoading } = useLoading();\n  const location = useLocation();\n\n  useEffect(() => {\n    // Update selectedPatient when selectedPatients change\n    if (selectedPatients.length > 0) {\n      setSelectedPatient(selectedPatients[0]);\n    }\n  }, [selectedPatients, setSelectedPatient]);\n\n  const handlePatientSelect = (patient) => {\n    setSelectedPatient(patient);\n    setExpanded(false); // Collapse Navbar on patient select\n\n    // Check if the current path matches one of the specified routes\n    const currentPath = location.pathname;\n    const shouldStartLoading = ['/api', '/qr', '/beergarden', '/offroadpost'].includes(currentPath);\n    \n    if (shouldStartLoading) {\n      startLoading();\n    }\n  };\n\n  const handleNavItemSelect = (startLoad) => {\n    setExpanded(false); // Collapse Navbar on any item select\n    if (startLoad && selectedPatient) {\n      startLoading();\n    }\n  };\n\n  // Function to collapse the Navbar\n  const collapseNavbar = () => {\n    setExpanded(false);\n  };\n\n  const isHostedOnD2S = window.location.href.includes(\"d2s\");\n\n  return (\n    <Navbar expanded={expanded} expand=\"lg\" bg=\"dark\" variant=\"dark\" fixed=\"top\">\n      <Container>\n        <Navbar.Brand as={Link} to=\"/\" onClick={() => handleNavItemSelect(false)}>\n          <img\n            src=\"/ipsnavbar.ico\"\n            width=\"25\"\n            height=\"25\"\n            className=\"d-inline-block align-center\"\n            alt=\"IPS Logo\"\n            style={{ marginRight: '10px' }}\n          />\n          IPS SERN\n          {isHostedOnD2S ? (\n            <>\n              {' '} D2S {' '}\n            </>\n          ) : (\n            <>\n              {' '} Local {' '}\n            </>\n          )}\n          0_55\n        </Navbar.Brand>\n        <Navbar.Toggle aria-controls=\"basic-navbar-nav\" onClick={() => setExpanded(!expanded)} />\n        <Navbar.Collapse id=\"basic-navbar-nav\">\n          <Nav className=\"me-auto\">\n            <Nav.Link as={Link} to=\"/api\" onClick={() => handleNavItemSelect(true)}>\n              <FontAwesomeIcon icon={faFileMedical} /> API\n            </Nav.Link>\n            <Nav.Link as={Link} to=\"/qr\" onClick={() => handleNavItemSelect(true)}>\n              <FontAwesomeIcon icon={faQrcode} /> QR\n            </Nav.Link>\n            <Nav.Link as={Link} to=\"/bulkupload\" onClick={() => handleNavItemSelect(false)}>\n              <FontAwesomeIcon icon={faUpload} /> DMICP\n            </Nav.Link>\n            <Nav.Link as={Link} to=\"/beergarden\" onClick={() => handleNavItemSelect(true)}>\n              <FontAwesomeIcon icon={faBeer} /> BEER\n            </Nav.Link>\n            {/* <NavDropdown\n              title={<span><FontAwesomeIcon icon={faBrain} /> VitalsIQ API</span>}\n              id=\"basic-nav-dropdown\"\n            >\n              <NavDropdown.Item as={Link} to=\"/ipsoffroad\" onClick={() => handleNavItemSelect(false)}>\n                <FontAwesomeIcon icon={faUpload} /> VitalsIQ GET\n              </NavDropdown.Item>\n              <NavDropdown.Item as={Link} to=\"/offroadpost\" onClick={() => handleNavItemSelect(true)}>\n                <FontAwesomeIcon icon={faDownload} /> VitalsIQ POST\n              </NavDropdown.Item>\n            </NavDropdown> */}\n            <NavDropdown\n              title={<span><FontAwesomeIcon icon={faCloud} /> External API</span>}\n              id=\"basic-nav-dropdown\"\n            >\n              <NavDropdown.Item as={Link} to=\"/fetchips\" onClick={() => handleNavItemSelect(false)}>\n                <FontAwesomeIcon icon={faUpload} /> External GET\n              </NavDropdown.Item>\n              <NavDropdown.Item as={Link} to=\"/puships\" onClick={() => handleNavItemSelect(true)}>\n                <FontAwesomeIcon icon={faDownload} /> External POST\n              </NavDropdown.Item>\n            </NavDropdown>\n            <NavDropdown title=\"Info\" id=\"basic-nav-dropdown\">\n              <NavDropdown.Item as={Link} to=\"/about\" onClick={() => handleNavItemSelect(false)}>\n                About IPS\n              </NavDropdown.Item>\n              <NavDropdown.Item as={Link} to=\"/aboutwebapp\" onClick={() => handleNavItemSelect(false)}>\n                About Web App\n              </NavDropdown.Item>\n              <NavDropdown.Divider />\n              <NavDropdown.Item as={Link} to=\"/changelog\" onClick={() => handleNavItemSelect(false)}>\n                Change Log\n              </NavDropdown.Item>\n              <NavDropdown.Divider />\n              <NavDropdown.Item as={Link} to=\"/apidocumentation\" onClick={() => handleNavItemSelect(false)}>\n                API Documentation\n              </NavDropdown.Item>\n            </NavDropdown>\n          </Nav>\n          {selectedPatients.length > 0 && (\n            <Nav>\n              <NavDropdown\n                title={selectedPatient ? `${selectedPatient.patient.given} ${selectedPatient.patient.name}` : \"Selected Patients\"}\n                id=\"selected-patients-dropdown\"\n              >\n                {selectedPatients.map((patient) => (\n                  <NavDropdown.Item\n                    key={patient._id}\n                    onClick={() => handlePatientSelect(patient)}\n                  >\n                    {patient.patient.given} {patient.patient.name}\n                  </NavDropdown.Item>\n                ))}\n              </NavDropdown>\n            </Nav>\n          )}\n          <PatientSearch collapseNavbar={collapseNavbar}/>\n        </Navbar.Collapse>\n      </Container>\n    </Navbar>\n  );\n}\n\nexport default NavigationBar;","import React from 'react';\nimport { Container, Row, Col } from 'react-bootstrap';\n\nfunction ChangeLogPage() {\n    return (\n        <Container className=\"mt-5\">\n            <Row>\n                <Col>\n                    <h3>ChangeLog - Versions refer to Cloud Deployments</h3>\n                    <ul>\n                        <li>\n                            <h5>Version 0_1 (Initial Release) - 2nd May 2024</h5>\n                            <ul>\n                                <li><strong>Implemented basic functionality for the MERN web app.</strong></li>\n                                <li>Single page with data entry and previous data display</li>\n                                <li>Previous data display has simple delete button</li>\n                                <li>Only API GET call is /ips/all which displays all records</li>\n                            </ul>\n                        </li>\n                        <li>\n                            <h5>Version 0_2 - 3rd May 2024</h5>\n                            <ul>\n                                <li><strong>Improved data presentation, delete confirm and IPS API additions</strong></li>\n                                <li>Data presented in compact form with expand mechanism</li>\n                                <li>Delete button now has confirmation prompt - to avoid accidental deletion</li>\n                                <li>Added API GET calls for /ips/:id (IPS Bundle - JSON) and /ipsraw/:id (MongoDb Native format - JSON)</li>\n                            </ul>\n                        </li>\n                        <li>\n                            <h5>Version 0_3 - 4th May 2024</h5>\n                            <ul>\n                                <li><strong>Implemented QR Generator, (non-functional) Data Upload page and Navigation.</strong></li>\n                                <li>QR code Generation of IPS Bundle and MongoDb record format.</li>\n                                <li>Data Upload page just a stub for later development</li>\n                                <li>Navigation Bar added for easy access to all pages</li>\n                            </ul>\n                        </li>\n                        <li>\n                            <h5>Version 0_4 - 4th May 2024</h5>\n                            <ul>\n                                <li><strong>Per-record QR Button, new data format for both API and QR Generator</strong></li>\n                                <li>QR Button added to previous record display to jump to QR Generator Page for that record</li>\n                                <li>Minimised IPS data format - Plain Text. Same format as generated by SmartDoc (DMICP) and read by FUB-QR (SmartPhone App)</li>\n                                <li>QR Generator now uses the new format as additional option -checked is indeed readable by FUB-QR</li>\n                                <li>API GET call for minimised format is /ipsbasic/:id</li>\n                            </ul>\n                        </li>\n                        <li>\n                            <h5>Version 0_5 - 4th May 2024</h5>\n                            <ul>\n                                <li><strong>Better Navigation format and QR URL for Patient</strong></li>\n                                <li>QR Generator includes new mode representing - in Plain Text - the API endpoint for the IPS Bundle</li>\n                                <li>Concept would be to download QR image and give/send patient</li>\n                            </ul>\n                        </li>\n                        <li>\n                            <h5>Version 0_6 - 5th May 2024</h5>\n                            <ul>\n                                <li><strong>Added About IPS and ChangeLog page, Hide data entry form</strong></li>\n                                <li>About IPS page to give brief context - non-sensitive</li>\n                                <li>ChangeLog page to track project updates and improvements.</li>\n                                <li>Hide data entry form button to allow more space for data display</li>\n                                <li>Added additional data validation before submission</li>\n                            </ul>\n                        </li>\n                        <li>\n                            <h5>Version 0_7 - 6th May 2024</h5>\n                            <ul>\n                                <li><strong>Added real functionality to Bulk Upload page</strong></li>\n                                <li>Bulk Upload page to allow pasting of multiple records for conversion</li>\n                                <li>Format expected is that generated by accompanying DMICP SmartDoc</li>\n                                <li>Main fields are comma separated, medication and allergies are then semicolon separated</li>\n                                <li>Validation of data and confirmation before submission</li>\n                                <li>Process allows valid records to be submitted whilst skipping invalid ones</li>\n                            </ul>\n                        </li>\n                        <li>\n                            <h5>Version 0_8 - 6th May 2024</h5>\n                            <ul>\n                                <li><strong>Added UUID validator for Bulk Upload</strong></li>\n                                <li>UUID validator is basic regex - so not true validator - but will suffice for now</li>\n                                <li>SmartDoc will generate valid UUIDs by default, so validator just to avoid incorrect manual efforts</li>\n                                <li>Separate message if no supplied records pass validation</li>\n                            </ul>\n                        </li>\n                        <li>\n                            <h5>Version 0_9 - 6th May 2024</h5>\n                            <ul>\n                                <li><strong>Logo and Navbar Changes</strong></li>\n                                <li>Added new logo to replace stock React App one</li>\n                                <li>Navbar is now fixed at top</li>\n                            </ul>\n                        </li>\n                        <li>\n                            <h5>Version 0_10 - 8th May 2024</h5>\n                            <ul>\n                                <li><strong>QR Code Size Check</strong></li>\n                                <li>QR Code data size check - and user feedback - to avoid display errors</li>\n                                <li>Threshold set to 3000 but most codes at this size unreadable except on most recent SmartPhones</li>\n                            </ul>\n                        </li>\n                        <li>\n                            <h5>Version 0_11 - 9th May 2024</h5>\n                            <ul>\n                                <li><strong>New XML Format and IPS JSON Format change</strong></li>\n                                <li>IPS Bundle format now compatible with the <a href=\"https://ipsviewer.com\" target=\"_blank\" rel=\"noopener noreferrer\">IPS Viewer</a></li>\n                                <li>This is closer to the IPS.net <a href=\"https://github.com/jddamore/IPSviewer/tree/main/samples\" target=\"_blank\" rel=\"noopener noreferrer\">samples and examples</a></li>\n                                <li>In particular it leads with a Composition resource</li>\n                                <li>XML format added to API - modelled on JSON format</li>\n                                <li>API GET is /ipsxml/:id</li>\n                            </ul>\n                        </li>\n                        <li>\n                            <h5>Version 0_12 - 9th May 2024</h5>\n                            <ul>\n                                <li><strong>Added API GET Data Viewer</strong></li>\n                                <li>Allows more convient viewing of data formats returned by the various API GET endpoints</li>\n                                <li>API Button added to individual records on HomePage as quick link</li>\n                            </ul>\n                        </li>\n                        <li>\n                            <h5>Version 0_13 - 10th May 2024</h5>\n                            <ul>\n                                <li><strong>Legacy IPS JSON and Screen Realestate</strong></li>\n                                <li>Added IPS Legacy format to API endpoints and API Page - based on version 2 of bundle</li>\n                                <li>For illustration purposes only - as comparison to 'regular' version.</li>\n                                <li>API GET is /ipslegacy/:id</li>\n                                <li>Various Screen realestate improvements for QR and API pages</li>\n                            </ul>\n                        </li>\n                        <li>\n                            <h5>Version 0_14 - 11th May 2024</h5>\n                            <ul>\n                                <li><strong>Cosmetic changes and hyperlinks</strong></li>\n                                <li>Links in various places to aide testing</li>\n                            </ul>\n                        </li>\n                        <li>\n                            <h5>Version 0_15 - 17th May 2024</h5>\n                            <ul>\n                                <li><strong>Added API GET and POST</strong></li>\n                                <li>API GET allows the return of an IPS Bundle using the endpoint /ipsbyname/:name/:given</li>\n                                <li>API POST allows the creation of a new entry in the database from an IPS JSON Bundle</li>\n                            </ul>\n                        </li>\n                        <li>\n                            <h5>Version 0_16 - 18th May 2024</h5>\n                            <ul>\n                                <li><strong>Added Gender and Conditions</strong></li>\n                                <li>Large update as entire schema changed</li>\n                                <li>All input, import, export and generation code changed</li>\n                                <li>Old entries against previous schema no longer valid as two fields have changed name</li>\n                                <li>nationality to nation, and severity to criticality</li>\n                                <li>Old database will be deleted</li>\n                            </ul>\n                        </li>\n                        <li>\n                            <h5>Version 0_17 - 19th May 2024</h5>\n                            <ul>\n                                <li><strong>Replaced 'Display All' with Search Functionality</strong></li>\n                                <li>Search for IPS records based on patient's name</li>\n                                <li>API GET call is /ips/search/:name</li>\n                            </ul>\n                        </li>\n                        <li>\n                            <h5>Version 0_18 - 19th May 2024</h5>\n                            <ul>\n                                <li><strong>Patient Selection Preservation</strong></li>\n                                <li>Selected patients are preserved across the App</li>\n                                <li>At least one patient needs to be selected to display anything on QR and API pages</li>\n                                <li>'Select Records' dropdown is now confined to only those records returned by search</li>\n                            </ul>\n                        </li>\n                        <li>\n                            <h5>Version 0_19 - 19th May 2024</h5>\n                            <ul>\n                                <li><strong>Optional :id endpoints</strong></li>\n                                <li>API GET endpoints that use /:id will now accept both MongoDB internal _id and IPS id (packageUUID)</li>\n                                <li>Improvements to 'Active' Patient functionality throughout app</li>\n                            </ul>\n                        </li>\n                        <li>\n                            <h5>Version 0_20 - 22nd May 2024</h5>\n                            <ul>\n                                <li><strong>Added VitalsIQ API Page</strong></li>\n                                <li>Page to allow direct access to the VitalsIQ API</li>\n                                <li>API is at https://4202xiwc.offroadapps.dev:62444/Fhir/ips/json/surname/firstname</li>\n                            </ul>\n                        </li>\n                        <li>\n                            <h5>Version 0_21 - 23rd May 2024</h5>\n                            <ul>\n                                <li><strong>API Comms Client-to-Server</strong></li>\n                                <li>Axios GET code moved to server-side to avoid BPS issues</li>\n                                <li>API GET used internally - but could be used extenally - is /fetchipsora/surname/firstname</li>\n                            </ul>\n                        </li>\n                        <li>\n                            <h5>Version 0_22- 23rd May 2024</h5>\n                            <ul>\n                                <li><strong>Record Creation from ORA IPS Bundle</strong></li>\n                                <li>Can now convert an VitalsIQ IPS Bundle to a MongoDb Record</li>\n                                <li>Made the Condition Date optional - defaults to today's date - to facilate testing</li>\n                            </ul>\n                        </li>\n                        <li>\n                            <h5>Version 0_23- 23rd May 2024</h5>\n                            <ul>\n                                <li><strong>Added API POST to ORA</strong></li>\n                                <li>API POST allows the sending IPS JSON Bundle to VitalsIQ WebApp</li>\n                                <li>Internal API endpoint is /pushipsora</li>\n                                <li>External API endpoint is at https://4202xiwc.offroadapps.dev:62444/Fhir/ips/json</li>\n                            </ul>\n                        </li>\n                        <li>\n                            <h5>Version 0_24 - 26th May 2024</h5>\n                            <ul>\n                                <li><strong>Added API GET for BEER</strong></li>\n                                <li>API GET allows the return of an IPS Bundle with the BEER data format using the endpoint /ipsbeer/:id</li>\n                                <li>Note: At this point BEER format is under development - so this represents an initial attempt</li>\n                                <li>API and QR Page include BEER modes</li>\n                                <li>QR Page displays the QR size in bites</li>\n                            </ul>\n                        </li>\n                        <li>\n                            <h5>Version 0_25 - 27th May 2024</h5>\n                            <ul>\n                                <li><strong>Added BEER Garden Page</strong></li>\n                                <li>Page to allow conversion between MongoDb and BEER formats</li>\n                                <li>BEER format is under development - so this represents an initial attempt</li>\n                            </ul>\n                        </li>\n                        <li>\n                            <h5>Version 0_26 - 27th May 2024</h5>\n                            <ul>\n                                <li><strong>Added NavBar Search</strong></li>\n                                <li>Search for IPS records based on patient's family/surname</li>\n                                <li>Removed HomePage from NavBar - as same functionality available from clicking on IPS Main Title and Logo</li>\n                                <li>Creates more space for other NavBar items</li>\n                            </ul>\n                        </li>\n                        <li>\n                            <h5>Version 0_27 - 28th May 2024</h5>\n                            <ul>\n                                <li><strong>Added Edit Functionality</strong></li>\n                                <li>Allows editing of existing IPS records</li>\n                                <li>Added Edit button to individual records on HomePage</li>\n                            </ul>\n                        </li>\n                        <li>\n                            <h5>Version 0_28 - 29th May 2024</h5>\n                            <ul>\n                                <li><strong>Added Spinner</strong></li>\n                                <li>Added Spinner to indicate loading for asynchronous functions</li>\n                                <li>Spinner appears for any action that relies on fetching or posting data</li>\n                                <li>Whether using the internal or external API</li>\n                            </ul>\n                        </li>\n                        <li>\n                            <h5>Version 0_29 - 30th May 2024</h5>\n                            <ul>\n                                <li><strong>Added Observation Resource</strong></li>\n                                <li>Added Observation resource to IPS Bundle</li>\n                                <li>Observation resource includes a code, value, and date</li>\n                                <li>If value start numerical then valueQuantity, if just text then bodySite, if blank then simple ob e.g. symptom</li>\n                            </ul>\n                        </li>\n                        <li>\n                            <h5>Version 0_30 - 1st Jun 2024</h5>\n                            <ul>\n                                <li><strong>Added TimeStamp</strong></li>\n                                <li>Added fixed TimeStamp - previously generated with IPS bundle</li>\n                                <li>Closer to IPS concept and aides BEER format development - items can be added post-timestamp</li>\n                                <li>Generated whether by manual addition or Data Upload.</li>\n                                <li>If API GET used then the TimeStamp is the that provided by the IPS JSON bundle fetched</li>\n                            </ul>\n                        </li>\n                        <li>\n                            <h5>Version 0_31 - 1st Jun 2024</h5>\n                            <ul>\n                                <li><strong>Added Observation and Allergy Dropdowns</strong></li>\n                                <li>Observation dropdown for key vital signs - temperature, blood pressure, pulse, respiration etc</li>\n                                <li>Allergy dropdown for criticality - low, medium, high</li>\n                            </ul>\n                        </li>\n                        <li>\n                            <h5>Version 0_32 - 3rd Jun 2024</h5>\n                            <ul>\n                                <li><strong>Further BEER Format Development</strong></li>\n                                <li>Medication and Observations formatted differently depending on whether past or future relative to timestamp</li>\n                                <li>Vital Sign observations in particular have a highly compact form</li>\n                                <li>Design varies slightly from earlier concept but basic ideas remain</li>\n                            </ul>\n                        </li>\n                        <li>\n                            <h5>Version 0_33 - 6th June 2024</h5>\n                            <ul>\n                                <li><strong>Added BEER - IPS JSON Conversion in BEER Garden</strong></li>\n                                <li>Manually edited BEER data can be converted to IPS JSON format or Native MongoDB</li>\n                                <li>IPS JSON (converted internally from MongoDb) or manually edited - can be converted to BEER format</li>\n                                <li>Byte size displayed for both formats</li>\n                                <li>Neither option affects the stored record - just for display purposes</li>\n                            </ul>\n                        </li>\n                        <li>\n                            <h5>Version 0_34 - 9th June 2024</h5>\n                            <ul>\n                                <li><strong>Added New Update/Edit Endpoint</strong></li>\n                                <li>Added new endpoint to allow updating of existing IPS records using UUID</li>\n                                <li>API PUT call is /ipsuuid/:id</li>\n                                <li>This means an external system that has POST/created a record - perhaps before patient id known - can then update it later</li>\n                                <li>Changes to unique Patient data - e.g. name - are treated as edits, Medication, Allergies, Conditions and Observations are added to the record</li>\n                            </ul>\n                        </li>\n                        <li>\n                            <h5>Version 0_35 - 12th June 2024</h5>\n                            <ul>\n                                <li><strong>Added API Documentation Page</strong></li>\n                                <li>Page to allow easy access to all API endpoints and their descriptions</li>\n                                <li>API Documentation Page is accessible from the NavBar</li>\n                                <li>/ipsbyname is now case-insensitive</li>\n                            </ul>\n                        </li>\n                        <li>\n                            <h5>Version 0_36 - 12th June 2024</h5>\n                            <ul>\n                                <li><strong>Organization added</strong></li>\n                                <li>Organization field added to MongoDB record</li>\n                                <li>Previously was not being read and was being automatically set in exports/conversions to 'UK DMS'</li>\n                            </ul>\n                        </li>\n                        <li>\n                            <h5>Version 0_37 - 13th June 2024</h5>\n                            <ul>\n                                <li><strong>Added API POST to NLD</strong></li>\n                                <li>API POST allows the sending IPS JSON Bundle to NLD WebApp</li>\n                                <li>Internal API endpoint is /pushipsnld</li>\n                                <li>External API endpoint is at https://medicalcloud.orange-synapse.nl/api/fhir/1</li>\n                            </ul>\n                        </li>\n                        <li>\n                            <h5>Version 0_38 - 13th June 2024</h5>\n                            <ul>\n                                <li><strong>IPS BEER Parsing Delimiter Improvements</strong></li>\n                                <li>IPS BEER format can use various delimiters - newline, semicolon, pipe, colon, and @</li>\n                                <li>If no delimiter is specified then all are tried before failing</li>\n                            </ul>\n                        </li>\n                        <li>\n                            <h5>Version 0_39 - 14th June 2024</h5>\n                            <ul>\n                                <li><strong>Added CDA Functionality</strong></li>\n                                <li>API POST to create MongoDb record from CDA XML - endpoint is /ipsfromcda</li>\n                                <li>API POST to convert CDA XML to IPS JSON Bundle - endpoint is /convertcdatoips - service only, no record is created</li>\n                                <li>API POST to convert CDS XML to BEER format - endpoint is /convertcdatobeer - service only, no record is created</li>\n                            </ul>\n                        </li>\n                        <li>\n                            <h5>Version 0_40 - 15th June 2024</h5>\n                            <ul>\n                                <li><strong>Added API Calls for IPS HL7 v2.8</strong></li>\n                                <li>API GET allows the return of an IPS Bundle with the HL7 v2.8 data format using the endpoint /ipshl728/:id</li>\n                                <li>API POST allows conversion of MongoDb record to HL7 v2.8 format - endpoint is /convertmongo2hl7</li>\n                                <li>Further endpoints for HL7 v2.8 are planned - note: there are likely formatting errors in the current implementation</li>\n                                <li>The idea is give an approximate HL7 v2.8 format - not a perfect one - to judge likely file size and content</li>\n                            </ul>\n                        </li>\n                        <li>\n                            <h5>Version 0_41 - 14th July 2024</h5>\n                            <ul>\n                                <li><strong>MERN to SERN</strong></li>\n                                <li>Database element of stack changed from MongoDB to SQL (MySQL) - to faciltate deployment on D2S OpenShift</li>\n                                <li>For simplicity and speed of development, the SQL is converted to and from MongoDB format on retreiving and storing</li>\n                                <li>This allows most of the existing code to remain unchanged</li>\n                                <li>This also allows the API calls to remain the same - both payloads and responses</li>\n                            </ul>\n                        </li>\n                        <li>\n                            <h5>Version 0_42 - 6th Aug 2024</h5>\n                            <ul>\n                                <li><strong>Australian IPS Format</strong></li>\n                                <li>Ability to successfully POST /ipsbundle from IPS JSON Bundle generated by Australian Team</li>\n                                <li>Note, interesting use of Medication resource embedded in MedicationRequest resource</li>\n                                <li>Format passes IPSViewer checks</li>\n                            </ul>\n                        </li>\n                        <li>\n                            <h5>Version 0_43 - 1st September 2024</h5>\n                            <ul>\n                                <li><strong>Added Immunization Resource</strong></li>\n                                <li>Integrated Immunization resource into the backend and frontend systems</li>\n                                <li>Immunization resource includes a date, name, and system</li>\n                                <li>Name can be either a textual entry or a code, with the system indicating the coding system used (e.g., SNOMED, WHO ATC) or a reference url</li>\n                                <li>All conversions updated including 'from CDA', 'to HL7 2.8' and 'to and from BEER'</li>\n                                <li>Note: HL7 2.8 message validation may show errors due to lack of data, but the data provided is in the correct positions. Please visit <a href=\"https://www.parsehog.com/hl7/parser\" target=\"_blank\" rel=\"noopener noreferrer\">Parsehog HL7 Parser</a> to validate and check the message structure yourself.</li>\n                            </ul>\n                        </li>\n                        <li>\n                            <h5>Version 0_44 - 3rd September 2024</h5>\n                            <ul>\n                                <li><strong>Added PDF Generation Feature</strong></li>\n                                <li>Implemented a new PDF generation function that allows patient reports to be viewed and downloaded as PDF documents</li>\n                                <li>The PDF document is formatted to fit within A4 page dimensions, with automatic text wrapping to ensure readability</li>\n                                <li>Patient data, including Medications, Allergies, Conditions, Observations, and Immunizations, are included in the PDF report</li>\n                                <li>PDF opens in a new tab with a dynamic filename based on the patient's name, allowing for easy download and identification</li>\n                            </ul>\n                        </li>\n                        <li>\n                            <h5>Version 0_45 - 13th November 2024</h5>\n                            <ul>\n                                <li><strong>HL7 2.8 Conversion Functionality</strong></li>\n                                <li>Added endpoints for chaining HL7 2.8 to MongoDB, then MongoDB to IPS JSON</li>\n                                <li>Extended API documentation with complete list of available endpoints for CRUD operations, conversions, and integrations with external systems</li>\n                                <li>API documentation pages updated to reflect latest changes</li>\n                            </ul>\n                        </li>\n                        <li>\n                            <h5>Version 0_46 - 26th November 2024</h5>\n                            <ul>\n                                <li><strong>Gzip Compression Support</strong></li>\n                                <li>Introduced middleware to handle gzip-encoded requests and responses</li>\n                                <li>API now supports gzip encoding for both incoming and outgoing data, optimizing bandwidth usage</li>\n                                <li>Enhanced compatibility with external clients by allowing Content-Encoding and Accept-Encoding headers for gzip</li>\n                                <li>Added safeguards to bypass compression for internal calls, ensuring seamless frontend-backend communication</li>\n                            </ul>\n                        </li>\n                        <li>\n                            <h5>Version 0_47 - 30th November 2024</h5>\n                            <ul>\n                                <li><strong>Encryption Support with AES-256</strong></li>\n                                <li>Added middleware to handle AES-256 encrypted requests and responses</li>\n                                <li>API now supports encrypted communication via `x-encrypted` and `accept-encryption` headers, ensuring secure data transfer</li>\n                                <li>Implemented seamless integration of gzip compression and AES-256 encryption, allowing data to be compressed before encryption</li>\n                                <li>Introduced a `/test` endpoint to facilitate testing of combined encryption and compression functionality</li>\n                                <li>Enhanced logging and error handling to aid debugging and ensure robustness during data transformations</li>\n                            </ul>\n                        </li>\n                        <li>\n                            <h5>Version 0_48 - 1st December 2024</h5>\n                            <ul>\n                                <li><strong>Encryption Support with AES-256 base64</strong></li>\n                                <li>Introduced support for Base64-encoded encryption via <code>content-encoding: base64</code> and <code>accept-encoding: base64</code> headers</li>\n                            </ul>\n                        </li>\n                        <li>\n                            <h5>Version 0_49 - 5th December 2024</h5>\n                            <ul>\n                                <li><strong>Enhanced ID Handling and Compression/Encryption Preview</strong></li>\n                                <li>Implemented logic to seamlessly handle IPS records with non-UUID identifiers</li>\n                                <li>All API endpoints now support retrieving records using non-UUID identifiers, resolving issues where such records could not be accessed after creation via API calls using those identifiers</li>\n                                <li>New checkbox feature on API Page allows users to toggle encryption and compression for API responses</li>\n                                <li>The existing file size display can then be used for comparisons</li>\n                                <li>Likewise, the download feature can then be used for the compressed/encrypted versions</li>\n                            </ul>\n                        </li>\n                        <li>\n                            <h5>Version 0_50 - 10th Feburary 2025</h5>\n                            <ul>\n                                <li><strong>Added Unified Schema Changes</strong></li>\n                                <li>API GET allows the return of an IPS Bundle with the unified schema using the endpoint /ipsunified/:id</li>\n                                <li>Common Code System changes added - system + code - for all clinical resources</li>\n                                <li>HL7 2.x is now 2.3 and not 2.8 but only difference is minor change to MSH segment</li>\n                                <li>IPS FHiR Bundle to Schema conversion still accepts all variations so far used</li>\n                                <li>UI changes made to better accomodate increased number of fields per resource</li>\n                                <li><strong>Generic External GET and POST Pages</strong></li>\n                                <li>Added target drop-down for external endpoint selection (VitalsIQ, NLD, IPS SERN) and allowed manual endpoint editing</li>\n                                <li>Implemented data format selection options: IPS Unified, IPS Prev JSON, and IPS Legacy</li>\n                                <li>Introduced a HL7 wrapper toggle to optionally wrap fetched IPS data</li>\n                                <li>Modified GET page to dynamically construct API calls based on selected data format and endpoint</li>\n                                <li>Updated UI to conditionally render section headers (e.g. Medications, Allergies, Conditions, Observations, Immunizations) only when data is present</li>\n                            </ul>\n                        </li>\n                        <li>\n                            <h5>Version 0_51 - 15th February 2025</h5>\n                            <ul>\n                                <li><strong>New HL7 2.x Format with Common Code System (CCS)</strong></li>\n                                <li>Added CCS elements to HL7 2.x format - both extraction and creation</li>\n                                <li>Note: This will no longer be compatible with previous implementation</li>\n                                <li>Added CCS element extraction from CDA XML format</li>\n                            </ul>\n                        </li>\n                        <li>\n                            <h5>Version 0_52 - 17th February 2025</h5>\n                            <ul>\n                                <li><strong>FHiR XML to FHiR JSON Conversion Added</strong></li>\n                                <li>Developed a specialized conversion function that handles the nuances of FHiR XML (including capitalization, array enforcement, and HTML reassembly) to produce proper IPS JSON. (There is also a more generic version for other uses for not sufficient for FHiR)</li>\n                                <li><strong>Expanded IPS Bundle Parser</strong></li>\n                                <li>Updated the IPS Bundle parser to accept additional XML formats and variations present in the 'SF' samples (e.g. MedicationAdministration resources used for the medication element).</li>\n                                <li><strong>XML Support for IPS Bundle Endpoints</strong></li>\n                                <li>Endpoints that previously accepted only FHiR JSON now seamlessly process FHiR XML data without requiring special headers. That includes if the data has first been encrypted and/or compressed.</li>\n                                <li><strong>Enhanced /test Endpoint Functionality</strong></li>\n                                <li>The /test endpoint now supports decryption/encryption and compression/decompression of XML, returning the raw XML as plain text.</li>\n                            </ul>\n                        </li>\n                        <li>\n                            <h5>Version 0_53 - 13th March 2025</h5>\n                            <ul>\n                                <li><strong>Experimental XMPP Integration</strong></li>\n                                <li>\n                                    Introduced new endpoints that enable integration with an external XMPP server to send and receive messages.\n                                    <br />\n                                    <em>Important:</em> This functionality is still experimental and requires:\n                                    <ul>\n                                        <li>An XMPP server reachable over a <strong>non-encrypted WebSocket</strong> (e.g. <code>ws://</code>).</li>\n                                        <li>Proper environment variables set in the <code>.env</code> file or via Azure/OpenShift mechanisms (e.g., <code>XMPP_SERVICE</code>, <code>XMPP_DOMAIN</code>, <code>XMPP_USERNAME</code>, <code>XMPP_PASSWORD</code>, <code>XMPP_ROOM</code>).</li>\n                                    </ul>\n                                    If these conditions are not met, the XMPP features will not function as intended.\n                                </li>\n                            </ul>\n                        </li>\n                        <li>\n                            <h5>Version 0_54 - 18th March 2025</h5>\n                            <ul>\n                                <li><strong>Updated Encryption System with HMAC</strong></li>\n                                <li>Encryption and decryption functions to use a 16-byte (128-bit) HMAC instead of the full 32-byte version for compatibility with joint project requirements.</li>\n                                <li>Refactored middleware to validate and process encrypted JSON payloads, ensuring HMAC verification before decryption. Improved error handling and logging for malformed requests.</li>\n                                <li>Encryption now includes the truncated HMAC (16 bytes) alongside the IV and ciphertext, ensuring integrity while reducing payload size.</li>\n                            </ul>\n                        </li>\n                        <li>\n                            <h5>Version 0_55 - 19th March 2025</h5>\n                            <ul>\n                                <li><strong>New Raw Binary Format for Encrypted Payloads</strong></li>\n                                <li>Introduced support for <code>application/octet-stream</code> requests and responses, featuring a 16-byte IV, 16-byte HMAC, and gzipped data.</li>\n                                <li>This allows clients to send and receive encrypted &amp; compressed data more efficiently without JSON overhead, improving performance.</li>\n                                <li>Updated documentation to clarify how to use the binary format alongside existing JSON encryption methods.</li>\n                            </ul>\n                        </li>\n                    </ul>\n                </Col>\n            </Row>\n        </Container>\n    );\n}\n\nexport default ChangeLogPage;\n","import React from 'react';\nimport { Container, Row, Col, Card } from 'react-bootstrap';\n\nfunction AboutWebAppPage() {\n    const isHostedOnD2S = window.location.href.includes(\"d2s\");\n    return (\n        <Container className=\"mt-5\">\n            <Row>\n                <Col>\n                    <h2>About This Web Application</h2>\n                    <p>\n                        Built using the <a href=\"https://medium.com/@ksekwamote/how-to-build-a-sern-application-dc358b48defe\" target=\"_blank\" rel=\"noopener noreferrer\">SERN Stack</a>. SERN stands for SQL, Express.js, React, and Node.js.\n                    </p>\n                </Col>\n            </Row>\n            <Row className=\"mt-4\">\n                <Col>\n                    <h3>Development Pipeline</h3>\n                    <Card>\n                        <Card.Body>\n                            <Card.Text>\n                                The development pipeline involves the following steps:\n                                <ol>\n                                    <li>Development Environment Until 0_18: Linux ubuntu-like distribution (<a href=\"https://www.bodhilinux.com\" target=\"_blank\" rel=\"noopener noreferrer\">Bodhi</a>) running on a virtual machine (VM).</li>\n                                    <li>Development Environment 0_19 and Beyond: Docker - Node 22 Bookworm</li>\n                                    <li>Version Control: <a href=\"https://github.com/MikeForde/mern-azure\" target=\"_blank\" rel=\"noopener noreferrer\">GitHub</a>.</li>\n                                    <li>Continuous Deployment: GitHub Actions, which automates the deployment process to a cloud instance whenever changes are pushed to the <a href=\"https://github.com/MikeForde/mern-azure\" target=\"_blank\" rel=\"noopener noreferrer\">GitHub Repository</a>.</li>\n                                </ol>\n                            </Card.Text>\n                        </Card.Body>\n                    </Card>\n                </Col>\n            </Row>\n            <Row className=\"mt-4\">\n                <Col>\n                    <h3>Hosting Options</h3>\n                    <Card>\n                        <Card.Body>\n                            <Card.Text>\n                                {isHostedOnD2S ? (\n                                    <>\n                                        This web application is currently being hosted on a cloud service.<br />\n                                        It can be hosted easily on a closed network, and stood-up via standalone Linux, virtual machine (VM), or a container e.g. Docker.\n                                    </>\n                                ) : (\n                                    <>\n                                        This web application is currently being hosted on a closed network.<br />\n                                        It can be hosted easily on a cloud service, for example OpenShift (incl. D2S), Microsoft Azure etc.\n                                    </>\n                                )}\n                            </Card.Text>\n                        </Card.Body>\n                    </Card>\n                </Col>\n            </Row>\n            <Row className=\"mt-4\">\n                <Col>\n                    <h3>Future Development and Experimentation</h3>\n                    <Card>\n                        <Card.Body>\n                            <Card.Text>\n                                Many features of this prototype web application are designed for demonstration and experimentation. Certain aspects would therefore either not be included or implemented in the same manner in a production-ready version. Feedback and ideas are always welcome.\n                            </Card.Text>\n                        </Card.Body>\n                    </Card>\n                </Col>\n            </Row>\n        </Container>\n    );\n}\n\nexport default AboutWebAppPage;\n","import React, { useState, useEffect, useContext } from 'react';\nimport axios from 'axios';\nimport { Button, Alert, Form, DropdownButton, Dropdown } from 'react-bootstrap';\nimport './Page.css';\nimport { PatientContext } from '../PatientContext';\nimport { useLoading } from '../contexts/LoadingContext';\n\nfunction APIGETPage() {\n  const { selectedPatients, selectedPatient, setSelectedPatient } = useContext(PatientContext);\n  const { startLoading, stopLoading } = useLoading();\n  const [data, setData] = useState('');\n  const [mode, setMode] = useState('ipsunified');\n  const [modeText, setModeText] = useState('IPS Unified JSON Bundle - /ipsunified/:id');\n  const [showNotification, setShowNotification] = useState(false);\n  const [responseSize, setResponseSize] = useState(0);\n  const [useCompressionAndEncryption, setUseCompressionAndEncryption] = useState(false);\n  const [useIncludeKey, setUseIncludeKey] = useState(false);\n\n  const handleRecordChange = (recordId) => {\n    const record = selectedPatients.find((record) => record._id === recordId);\n    startLoading();\n    setSelectedPatient(record);\n  };\n\n  useEffect(() => {\n    if (selectedPatient) {\n      const fetchData = async () => {\n        let endpoint;\n        if (mode === 'ipsbeerwithdelim') {\n          endpoint = `/ipsbeer/${selectedPatient._id}/pipe`;\n        } else {\n          endpoint = `/${mode}/${selectedPatient._id}`;\n        }\n\n        console.log('Fetching data from:', endpoint);\n        try {\n          const headers = {};\n          if (useCompressionAndEncryption) {\n            headers['Accept-Extra'] = 'insomzip, base64';\n            headers['Accept-Encryption'] = 'aes256';\n            if(useIncludeKey) {\n              headers['Accept-Extra'] = 'insomzip, base64, includeKey';\n            }\n          }\n\n          const response = await axios.get(endpoint, { headers });\n          let responseData;\n\n          if(useCompressionAndEncryption) {\n            setResponseSize(JSON.stringify(response.data).length);\n            responseData = JSON.stringify(response.data, null, 2);\n          } else if (mode === 'ipsbasic' || mode === 'ipsbeer' || mode === 'ipsbeerwithdelim' || mode === 'ipshl72x') {\n            responseData = response.data;\n            setResponseSize(responseData.length);\n          } else if (mode === 'ipsxml') {\n            responseData = formatXML(response.data);\n            setResponseSize(responseData.length);\n          } else {\n            setResponseSize(JSON.stringify(response.data).length);\n            responseData = JSON.stringify(response.data, null, 2);\n          }\n\n          setData(responseData);\n          console.log('Data:', responseData);\n          setShowNotification(false);\n        } catch (error) {\n          console.error('Error fetching IPS record:', error);\n        } finally {\n          stopLoading();\n        }\n      };\n\n      fetchData();\n    }\n  }, [selectedPatient, mode, useCompressionAndEncryption, stopLoading, startLoading, useIncludeKey]);\n\n  const handleDownloadData = () => {\n    const blob = new Blob([data], { type: 'text/plain' });\n    const url = window.URL.createObjectURL(blob);\n    const link = document.createElement('a');\n    link.href = url;\n    link.setAttribute('download', 'ips_data.txt');\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  };\n\n  const handleModeChange = (selectedMode) => {\n    startLoading();\n    setMode(selectedMode);\n    switch (selectedMode) {\n      case 'ips':\n        setModeText('IPS Prev JSON Bundle - /ips/:id or /ipsbyname/:name/:given');\n        break;\n      case 'ipsxml':\n        setModeText('IPS Prev XML Bundle - /ipsxml/:id');\n        break;\n      case 'ipslegacy':\n        setModeText('IPS Legacy JSON Bundle - /ipslegacy/:id');\n        break;\n        case 'ipsunified':\n          setModeText('IPS Unified JSON Bundle - /ipsunified/:id');\n          break;\n      case 'ipsmongo':\n        setModeText('IPS NoSQL - /ipsmongo/:id');\n        break;\n      case 'ipsbasic':\n        setModeText('IPS Minimal - /ipsbasic/:id');\n        break;\n      case 'ipsbeer':\n        setModeText('IPS BEER - /ipsbeer/:id');\n        break;\n      case 'ipsbeerwithdelim':\n        setModeText('IPS BEER - /ipsbeer/:id/pipe)');\n        break;\n      case 'ipshl72x':\n        setModeText('IPS HL7 2.x - /ipshl72x/:id');\n        break;\n      default:\n        setModeText('IPS Unified JSON Bundle - /ipsunified/:id');\n    }\n  };\n\n  const formatXML = (xml) => {\n    const formatted = xml.replace(/></g, '>\\n<');\n    return formatted;\n  };\n\n  return (\n    <div className=\"app\">\n      <div className=\"container\">\n        <h3>\n          API GET - IPS Data: {responseSize}\n          <div className=\"noteFont\">\n            - /:id can be the IPS id (the main UUID) or the internal MongoDB _id\n          </div>\n        </h3>\n        {selectedPatients.length > 0 && selectedPatient && (\n          <>\n            <div className=\"dropdown-container\">\n              <DropdownButton\n                id=\"dropdown-record\"\n                title={`Patient: ${selectedPatient.patient.given} ${selectedPatient.patient.name}`}\n                onSelect={handleRecordChange}\n                className=\"dropdown-button\"\n              >\n                {selectedPatients.map((record) => (\n                  <Dropdown.Item\n                    key={record._id}\n                    eventKey={record._id}\n                    active={selectedPatient && selectedPatient._id === record._id}\n                  >\n                    {record.patient.given} {record.patient.name}\n                  </Dropdown.Item>\n                ))}\n              </DropdownButton>\n            </div>\n            <div className=\"dropdown-container\">\n              <DropdownButton\n                id=\"dropdown-mode\"\n                title={`API: ${modeText}`}\n                onSelect={handleModeChange}\n                className=\"dropdown-button\"\n              >\n                <Dropdown.Item eventKey=\"ipsunified\">IPS Unified JSON Bundle - /ipsunified/:id</Dropdown.Item>\n                <Dropdown.Item eventKey=\"ipshl72x\">IPS HL7 2.3 - /ipshl72x/:id</Dropdown.Item>\n                <Dropdown.Item eventKey=\"ipsmongo\">IPS NoSQL - /ipsmongo/:id</Dropdown.Item>\n                <Dropdown.Item eventKey=\"ipsbeer\">IPS BEER - /ipsbeer/:id</Dropdown.Item>\n                <Dropdown.Item eventKey=\"ipsbeerwithdelim\">IPS BEER - /ipsbeer/:id/pipe</Dropdown.Item>\n                <Dropdown.Item eventKey=\"ipsbasic\">IPS Minimal - /ipsbasic/:id</Dropdown.Item>\n                <Dropdown.Item eventKey=\"ips\">IPS Prev JSON Bundle - /ips/:id or /ipsbyname/:name/:given</Dropdown.Item>\n                <Dropdown.Item eventKey=\"ipsxml\">IPS Prev XML Bundle - /ipsxml/:id</Dropdown.Item>\n                <Dropdown.Item eventKey=\"ipslegacy\">IPS Legacy JSON Bundle - /ipslegacy/:id</Dropdown.Item>\n              </DropdownButton>\n            </div>\n            <div className=\"form-check\">\n              <input\n                type=\"checkbox\"\n                className=\"form-check-input\"\n                id=\"compressionEncryption\"\n                checked={useCompressionAndEncryption}\n                onChange={(e) => setUseCompressionAndEncryption(e.target.checked)}\n              />\n              <label className=\"form-check-label\" htmlFor=\"compressionEncryption\">\n                Compress (gzip) and Encrypt (aes256 base 64)\n              </label>\n            </div>\n            <div className=\"form-check\">\n              <input\n                type=\"checkbox\"\n                className=\"form-check-input\"\n                id=\"includeKey\"\n                checked={useIncludeKey}\n                onChange={(e) => setUseIncludeKey(e.target.checked)}\n              />\n              <label className=\"form-check-label\" htmlFor=\"includeKey\">\n                Include key in response\n              </label>\n            </div>\n          </>\n        )}\n        {showNotification ? (\n          <Alert variant=\"danger\">Data is too large to display. Please try a different mode.</Alert>\n        ) : (\n          <div className=\"text-area\">\n            <Form.Control as=\"textarea\" rows={10} value={data} readOnly />\n          </div>\n        )}\n        <br />\n        <div className=\"button-container\">\n          <Button className=\"mb-3\" onClick={handleDownloadData}>\n            Download Data\n          </Button>\n          {mode === 'ips' && (\n            <Button\n              variant=\"primary\"\n              className=\"mb-3\"\n              onClick={() => window.open('https://ipsviewer.com', '_blank')}\n            >\n              Open IPS Viewer\n            </Button>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default APIGETPage;","import React, { useState, useEffect, useContext } from 'react';\nimport axios from 'axios';\nimport { Button, Alert, Form, DropdownButton, Dropdown } from 'react-bootstrap';\nimport './Page.css';\nimport { PatientContext } from '../PatientContext';\nimport { useLoading } from '../contexts/LoadingContext';\n\nfunction UnifiedPostPage() {\n    const { selectedPatients, selectedPatient, setSelectedPatient } = useContext(PatientContext);\n    const [data, setData] = useState('');\n    const [message, setMessage] = useState('');\n    const [showNotification, setShowNotification] = useState(false);\n    const [target, setTarget] = useState('IPS MERN'); // options: \"VitalsIQ\", \"NLD\", \"IPS SERN\"\n    const { startLoading, stopLoading } = useLoading();\n    // Add these state variables at the top of your component:\n    const [endpoint, setEndpoint] = useState('https://ipsmern-dep.azurewebsites.net/ipsbundle');\n    const [dataFormat, setDataFormat] = useState('ipsunified'); // options: \"ipsunified\", \"ips\", \"ipslegacy\"\n    const [hl7Wrapper, setHl7Wrapper] = useState(false);\n\n\n    const handleRecordChange = (recordId) => {\n        const record = selectedPatients.find(record => record._id === recordId);\n        startLoading();\n        setSelectedPatient(record);\n    };\n\n    useEffect(() => {\n        if (selectedPatient) {\n            // Build the GET endpoint based on the selected dataFormat.\n            const getEndpoint = `/${dataFormat}/${selectedPatient._id}`;\n            axios.get(getEndpoint)\n                .then(response => {\n                    let responseData = JSON.stringify(response.data, null, 2);\n                    if (hl7Wrapper) {\n                        responseData = `{\\n  \"hl7\": ${responseData}\\n}`;\n                    }\n                    setData(responseData);\n                    setShowNotification(false);\n                })\n                .catch(error => {\n                    console.error('Error fetching IPS record:', error);\n                })\n                .finally(() => {\n                    stopLoading();\n                });\n        }\n    }, [selectedPatient, dataFormat, hl7Wrapper, stopLoading]);\n\n\n    const handlePushIPS = async () => {\n        startLoading();\n        try {\n            const ipsData = JSON.parse(data);\n            await axios.post('/puships', { ipsBundle: ipsData, endpoint, dataFormat, hl7Wrapper });\n            setMessage('IPS data successfully pushed to the external server');\n            setShowNotification(false);\n        } catch (error) {\n            console.error('Error pushing IPS data:', error);\n            setShowNotification(true);\n        } finally {\n            stopLoading();\n        }\n    };\n\n\n    return (\n        <div className=\"app\">\n            <div className=\"container\">\n                <h3>External IPS API Page - POST (Push)</h3>\n                {selectedPatients.length > 0 && selectedPatient && (\n                    <div className=\"dropdown-container\">\n                        <DropdownButton\n                            id=\"dropdown-record\"\n                            title={`Patient: ${selectedPatient.patient.given} ${selectedPatient.patient.name}`}\n                            onSelect={handleRecordChange}\n                            className=\"dropdown-button\"\n                        >\n                            {selectedPatients.map(record => (\n                                <Dropdown.Item\n                                    key={record._id}\n                                    eventKey={record._id}\n                                    active={selectedPatient && selectedPatient._id === record._id}\n                                >\n                                    {record.patient.given} {record.patient.name}\n                                </Dropdown.Item>\n                            ))}\n                        </DropdownButton>\n                    </div>\n                )}\n                <div className=\"dropdown-container\">\n                    <DropdownButton\n                        id=\"dropdown-target\"\n                        title={`Target Endpoint: ${target}`}\n                        onSelect={(e) => {\n                            setTarget(e);\n                            if (e === \"VitalsIQ\") {\n                                setEndpoint(\"https://4202xiwc.offroadapps.dev:62444/Fhir/ips/json\");\n                            } else if (e === \"NLD\") {\n                                setEndpoint(\"https://medicalcloud.orange-synapse.nl/api/fhir/1\");\n                            } else if (e === \"IPS MERN\") {\n                                setEndpoint(\"https://ipsmern-dep.azurewebsites.net/ipsbundle\");\n                            }\n                        }}\n                        className=\"dropdown-button\"\n                    >\n                        <Dropdown.Item eventKey=\"IPS MERN\" active={target === \"IPS MERN\"}>\n                            IPS MERN\n                        </Dropdown.Item>\n                        <Dropdown.Item eventKey=\"NLD\" active={target === \"NLD\"}>\n                            NLD\n                        </Dropdown.Item>\n                        <Dropdown.Item eventKey=\"VitalsIQ\" active={target === \"VitalsIQ\"}>\n                            VitalsIQ\n                        </Dropdown.Item>\n                    </DropdownButton>\n                </div>\n                <div className=\"dropdown-container\">\n                    <DropdownButton\n                        id=\"dropdown-dataFormat\"\n                        title={`Data Format: ${dataFormat === 'ipsunified'\n                            ? 'IPS Unified'\n                            : dataFormat === 'ips'\n                                ? 'IPS Prev JSON'\n                                : 'IPS Legacy'\n                            }`}\n                        onSelect={(e) => setDataFormat(e)}\n                        className=\"dropdown-button\"\n                    >\n                        <Dropdown.Item eventKey=\"ipsunified\" active={dataFormat === 'ipsunified'}>\n                            IPS Unified\n                        </Dropdown.Item>\n                        <Dropdown.Item eventKey=\"ips\" active={dataFormat === 'ips'}>\n                            IPS Prev JSON\n                        </Dropdown.Item>\n                        <Dropdown.Item eventKey=\"ipslegacy\" active={dataFormat === 'ipslegacy'}>\n                            IPS Legacy\n                        </Dropdown.Item>\n                    </DropdownButton>\n                    <Form.Check\n                        type=\"checkbox\"\n                        id=\"hl7-wrapper-checkbox\"\n                        label=\"Surround with HL7 Wrapper\"\n                        checked={hl7Wrapper}\n                        onChange={(e) => setHl7Wrapper(e.target.checked)}\n                        className=\"mt-2\"\n                    />\n                </div>\n                <div className=\"endpoint-container mt-2\">\n                    <Form.Group controlId=\"endpointInput\">\n                        <Form.Label>Endpoint</Form.Label>\n                        <Form.Control\n                            type=\"text\"\n                            value={endpoint}\n                            onChange={(e) => setEndpoint(e.target.value)}\n                        />\n                    </Form.Group>\n                </div>\n\n                {showNotification ? (\n                    <Alert variant=\"danger\">Error pushing IPS data. Please try again.</Alert>\n                ) : (\n                    <div className=\"text-area\">\n                        <Form.Control as=\"textarea\" rows={10} value={data} readOnly />\n                    </div>\n                )}\n                <br />\n                {message && <Alert variant=\"success\">{message}</Alert>}\n                <div className=\"button-container\">\n                    {selectedPatient && data && (\n                        <Button className=\"mb-3\" variant=\"danger\" onClick={handlePushIPS}>\n                            Push IPS JSON Data to {target} WebApp\n                        </Button>\n                    )}\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default UnifiedPostPage;","import React, { useState } from 'react';\nimport axios from 'axios';\nimport { Form, Button, DropdownButton, Dropdown } from 'react-bootstrap';\nimport { useLoading } from '../contexts/LoadingContext';\n\nconst UnifiedIPSGetPage = () => {\n  const [name, setName] = useState('');\n  const [givenName, setGivenName] = useState('');\n  const [ipsData, setIpsData] = useState(null);\n  const [error, setError] = useState(null);\n  const [message, setMessage] = useState('');\n  const { startLoading, stopLoading } = useLoading();\n\n  // New state variables for target selection and endpoint\n  const [target, setTarget] = useState('IPS MERN'); // Default target\n  const [endpoint, setEndpoint] = useState('https://ipsmern-dep.azurewebsites.net/ipsbyname');\n\n  const handleTargetChange = (selectedTarget) => {\n    setTarget(selectedTarget);\n    if (selectedTarget === 'VitalsIQ') {\n      setEndpoint('https://4202xiwc.offroadapps.dev:62444/Fhir/ips/json');\n    } else if (selectedTarget === 'IPS SERN') {\n      setEndpoint('https://ipsmern-dep.azurewebsites.net/ipsbyname');\n    }\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    startLoading();\n    try {\n      // Call our generic backend GET endpoint passing the current endpoint, name, and givenName as query parameters.\n      const response = await axios.get('/fetchips', {\n        params: { endpoint, name, givenName }\n      });\n      setIpsData(response.data);\n      setError(null);\n    } catch (err) {\n      setError('Failed to fetch IPS data');\n      setIpsData(null);\n    } finally {\n      stopLoading();\n    }\n  };\n\n  const handleTransform = async () => {\n    try {\n      await axios.post('/ipsbundle', ipsData);\n      setMessage('IPS record successfully transformed and saved to MongoDB');\n      setError(null);\n    } catch (err) {\n      setMessage(err.message);\n      setError('Failed to transform IPS record');\n    }\n  };\n\n  return (\n    <div className=\"app\">\n      <div className=\"container\">\n        <h3>External IPS API - GET (Pull)</h3>\n        <Form onSubmit={handleSubmit}>\n          <Form.Group controlId=\"name\">\n            <Form.Control\n              type=\"text\"\n              placeholder=\"Family/Surname\"\n              value={name}\n              onChange={(e) => setName(e.target.value)}\n              required\n            />\n          </Form.Group>\n          <Form.Group controlId=\"givenName\">\n            <Form.Control\n              type=\"text\"\n              placeholder=\"First/Given Name\"\n              value={givenName}\n              onChange={(e) => setGivenName(e.target.value)}\n              required\n            />\n          </Form.Group>\n\n          {/* Target Endpoint Dropdown */}\n          <div className=\"dropdown-container mb-2\">\n            <DropdownButton\n              id=\"dropdown-target-get\"\n              title={`Target Endpoint: ${target}`}\n              onSelect={handleTargetChange}\n              className=\"dropdown-button\"\n            >\n              <Dropdown.Item eventKey=\"IPS MERN\" active={target === 'IPS MERN'}>\n                IPS MERN\n              </Dropdown.Item>\n              <Dropdown.Item eventKey=\"VitalsIQ\" active={target === 'VitalsIQ'}>\n                VitalsIQ\n              </Dropdown.Item>\n            </DropdownButton>\n          </div>\n\n          {/* Editable Endpoint Field */}\n          <Form.Group controlId=\"endpointInput\" className=\"mb-2\">\n            <Form.Label>Endpoint</Form.Label>\n            <Form.Control\n              type=\"text\"\n              value={endpoint}\n              onChange={(e) => setEndpoint(e.target.value)}\n            />\n          </Form.Group>\n\n          <Button variant=\"primary\" type=\"submit\">\n            Submit GET Request\n          </Button>\n        </Form>\n        {error && <p style={{ color: 'red' }}>{error}</p>}\n        {ipsData && (\n          <div>\n            <h4>IPS Data</h4>\n            <div className=\"text-area\">\n              <Form.Control as=\"textarea\" rows={10} value={JSON.stringify(ipsData, null, 2)} readOnly />\n            </div>\n            <Button variant=\"success\" onClick={handleTransform}>\n              Transform to IPS MERN Record\n            </Button>\n          </div>\n        )}\n        {message && <p style={{ color: 'green' }}>{message}</p>}\n      </div>\n    </div>\n  );\n};\n\nexport default UnifiedIPSGetPage;","import React, { useState, useEffect, useContext, useRef } from 'react';\nimport axios from 'axios';\nimport { Button, Alert, Form, DropdownButton, Dropdown } from 'react-bootstrap';\nimport './Page.css';\nimport { PatientContext } from '../PatientContext';\nimport { useLoading } from '../contexts/LoadingContext';\n\nfunction BEERGardenPage() {\n  const { selectedPatients, selectedPatient, setSelectedPatient } = useContext(PatientContext);\n  const [mongoData, setMongoData] = useState('');\n  const [beerData, setBeerData] = useState('');\n  const [showNotification, setShowNotification] = useState(false);\n  const [message, setMessage] = useState('');\n  const { startLoading, stopLoading } = useLoading();\n  const isConvertingRef = useRef(false);\n  const [mongoSize, setMongoSize] = useState(0);\n  const [beerSize, setBEERSize] = useState(0);\n  const [selectedFormat, setSelectedFormat] = useState('IPS JSON');\n  const [displayFormat, setDisplayFormat] = useState('IPS JSON');\n\n  const handleRecordChange = (recordId) => {\n    const record = selectedPatients.find(record => record._id === recordId);\n    isConvertingRef.current = false;\n    startLoading();\n    setSelectedPatient(record);\n  };\n\n  useEffect(() => {\n    if (selectedPatient && !isConvertingRef.current) {\n      const endpoint = `/ips/${selectedPatient._id}`;\n\n      axios.get(endpoint)\n        .then(response => {\n          const mongoSize = new TextEncoder().encode(JSON.stringify(response.data)).length;\n          const responseData = JSON.stringify(response.data, null, 2);\n          setMongoData(responseData);\n          setShowNotification(false);\n          setMongoSize(mongoSize);\n          setDisplayFormat('IPS JSON');\n          setMessage('');\n          setBeerData('');\n          setBEERSize(0);\n        })\n        .catch(error => {\n          console.error('Error fetching IPS record:', error);\n          setMessage('Error fetching IPS record');\n          setShowNotification(true);\n        })\n        .finally(() => {\n          stopLoading();\n        });\n    }\n  }, [selectedPatient, stopLoading]);\n\n  const handleConvertToBEERFromMongo = async () => {\n    if (mongoData === '' || mongoData === '{}') { return; }\n    console.log('mongoData:', mongoData);\n    isConvertingRef.current = true;\n    startLoading();\n    try {\n      const response = await axios.post('/convertmongo2beer', { data: mongoData });\n      setBeerData(response.data);\n      const beerSize = new TextEncoder().encode(response.data.trim()).length;\n      setBEERSize(beerSize);\n      setMessage('Successfully converted to BEER format');\n      setShowNotification(false);\n    } catch (error) {\n      console.error('Error converting to BEER format from MongoDB:', error);\n      setMessage('Error converting to BEER format from MongoDB');\n      setShowNotification(true);\n    } finally {\n      stopLoading();\n    }\n  };\n\n  const handleConvertToBEERFromIPS = () => {\n    if (mongoData === '' || mongoData === '{}') { return; }\n    isConvertingRef.current = true;\n    startLoading();\n    const endpoint = '/convertips2beer';\n    axios.post(endpoint, { data: mongoData })\n      .then(response => {\n        setBeerData(response.data); \n        const beerSize = new TextEncoder().encode(response.data.trim()).length;\n        setBEERSize(beerSize);\n        setMessage('Successfully converted to BEER format');\n        setShowNotification(false);\n      })\n      .catch(error => {\n        console.error('Error converting to BEER format from IPS JSON:', error);\n        setMessage('Error converting to BEER format from IPS JSON');\n        setShowNotification(true);\n      })\n      .finally(() => {\n        stopLoading();\n      });\n  };\n\n  const handleConvertToMongo = async () => {\n    if (beerData === '' || beerData === '{}') { return; }\n    startLoading();\n    isConvertingRef.current = true; // Set the converting flag\n    try {\n      const response = await axios.post('/convertbeer2mongo', { data: beerData });\n      setMongoData(JSON.stringify(response.data, null, 2));\n      const mongoSize = new TextEncoder().encode(JSON.stringify(response.data)).length;\n      setMongoSize(mongoSize);\n      const beerSize = new TextEncoder().encode(beerData.trim()).length;\n      setBEERSize(beerSize);\n      setMessage('Successfully converted to MongoDB format');\n      setDisplayFormat('MongoDB');\n      setShowNotification(false);\n    } catch (error) {\n      console.error('Error converting to MongoDB format:', error);\n      setMessage('Error converting to MongoDB format');\n      setShowNotification(true);\n    } finally {\n      stopLoading();\n    }\n  };\n\n  const handleConvertToIPS = async () => {\n    if (beerData === '' || beerData === '{}') { return; }\n    startLoading();\n    isConvertingRef.current = true; // Set the converting flag\n    try {\n      const response = await axios.post('/convertbeer2ips', { data: beerData });\n      setMongoData(JSON.stringify(response.data, null, 2));\n      const mongoSize = new TextEncoder().encode(JSON.stringify(response.data)).length;\n      setMongoSize(mongoSize);\n      const beerSize = new TextEncoder().encode(beerData.trim()).length;\n      setBEERSize(beerSize);\n      setMessage('Successfully converted to IPS JSON format');\n      setDisplayFormat('IPS JSON');\n      setShowNotification(false);\n    } catch (error) {\n      console.error('Error converting to IPS JSON format:', error);\n      setMessage('Error converting to IPS JSON format');\n      setShowNotification(true);\n    } finally {\n      stopLoading();\n    }\n  };\n\n  const handleFormatChange = (format) => {\n    setSelectedFormat(format);\n    setDisplayFormat(format);\n  };\n\n  return (\n    <div className=\"app\">\n      <div className=\"container\">\n        <h3>BEER <div className=\"noteFont\">(Basic Emergency Exchange Record)</div></h3>\n        {selectedPatients.length > 0 && selectedPatient && (\n          <div className=\"dropdown-container\">\n            <DropdownButton\n              id=\"dropdown-record\"\n              title={`Patient: ${selectedPatient.patient.given} ${selectedPatient.patient.name}`}\n              //onSelect={handleRecordChange} \n              className=\"dropdown-button\"\n            >\n              {selectedPatients.map(record => (\n                <Dropdown.Item\n                  key={record._id}\n                  //eventKey={record._id}\n                  onClick={() => handleRecordChange(record._id)} \n                  active={selectedPatient && selectedPatient._id === record._id}\n                >\n                  {record.patient.given} {record.patient.name}\n                </Dropdown.Item>\n              ))}\n            </DropdownButton>\n          </div>\n        )}\n        {showNotification && !message && (\n          <Alert variant=\"danger\">Error processing data. Please try again.</Alert>\n        )}\n        <div className=\"text-area-container\">\n          <div className=\"text-area\">\n            <h5>{`Format: ${displayFormat} - ${mongoSize} bytes`}</h5>\n            <Form.Control as=\"textarea\" rows={10} value={mongoData} onChange={e => setMongoData(e.target.value)} />\n            <Button className=\"mt-3\" variant=\"secondary\" onClick={selectedFormat === 'MongoDB' ? handleConvertToBEERFromMongo : handleConvertToBEERFromIPS}>\n              Convert to BEER Format\n            </Button>\n          </div>\n          <div className=\"text-area\">\n            <h5>BEER Format - {beerSize} bytes</h5>\n            <Form.Control as=\"textarea\" rows={10} value={beerData} onChange={e => setBeerData(e.target.value)} />\n            <DropdownButton\n              id=\"dropdown-format\"\n              title={`Conversion Mode: ${selectedFormat}`}\n              onSelect={handleFormatChange}\n              className=\"mt-3\"\n            >\n              <Dropdown.Item eventKey=\"MongoDB\">MongoDB</Dropdown.Item>\n              <Dropdown.Item eventKey=\"IPS JSON\">IPS JSON</Dropdown.Item>\n            </DropdownButton>\n            <Button className=\"mt-3\" variant=\"secondary\" onClick={selectedFormat === 'MongoDB' ? handleConvertToMongo : handleConvertToIPS}>\n              Convert to {selectedFormat} Format\n            </Button>\n          </div>\n        </div>\n        <div>\n          {message && <Alert variant={showNotification ? \"danger\" : \"success\"} className=\"message\">{message}</Alert>}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default BEERGardenPage;\n","import React from 'react';\nimport { Table, Container } from 'react-bootstrap';\n\nfunction APIDocumentationPage() {\n  // Define the API endpoints information\n  const apiEndpoints = [\n    { method: 'POST', endpoint: '/ips', description: 'Create a new IPS record.', request: 'MongoDb JSON object representing the new IPS record.', response: 'MongoDb JSON object of the created IPS record.' },\n    { method: 'POST', endpoint: '/ipsmany', description: 'Create multiple IPS records.', request: 'Array of MongoDb JSON objects representing the new IPS records', response: 'Array of MongoDb JSON objects of the created IPS records.' },\n    { method: 'POST', endpoint: '/ipsbundle', description: 'Create IPS records from an IPS Bundle.', request: 'IPS Bundle - FHiR JSON or XML', response: 'MongoDb - JSON as confirmation of record creation.' },\n    { method: 'POST', endpoint: '/pushipsora', description: 'Push IPS data to an external ORA system.', request: 'IPS Bundle - JSON', response: 'Response from the ORA system.' },\n    { method: 'POST', endpoint: '/pushipsnld', description: 'Push IPS data to an external NLD system.', request: 'IPS Bundle - JSON', response: 'Response from the NLD system.' },\n    { method: 'POST', endpoint: '/ipsfrombeer', description: 'Create MongoDb IPS records from BEER format.', request: 'BEER - Plain Text', response: 'MongoDb - JSON as confirmation of record creation.' },\n    { method: 'POST', endpoint: '/ipsfromcda', description: 'Create MongoDb IPS records from CDA XML format.', request: 'CDA - XML', response: 'MongoDb - JSON as confirmation of record creation.' },\n    { method: 'POST', endpoint: '/ipsfromhl72x', description: 'Create MongoDb IPS records from HL7 2.x format.', request: 'HL7 2.x - Plain Text', response: 'MongoDb - JSON as confirmation of record creation.' },\n    { method: 'POST', endpoint: '/convertmongo2beer', description: 'Convert MongoDB format to BEER format.', request: 'MongoDB - JSON', response: 'BEER - Plain Text' },\n    { method: 'POST', endpoint: '/convertmongo2hl7', description: 'Convert MongoDB format to HL7 2.3 format.', request: 'MongoDB - JSON', response: 'HL7 2.3 - Plain Text' },\n    { method: 'POST', endpoint: '/convertbeer2mongo', description: 'Convert BEER format to MongoDB format.', request: 'BEER - Plain Text', response: 'MongoDB - JSON' },\n    { method: 'POST', endpoint: '/convertbeer2ips', description: 'Convert BEER format to IPS JSON format.', request: 'BEER - Plain Text', response: 'IPS Bundle - JSON' },\n    { method: 'POST', endpoint: '/convertips2beer', description: 'Convert IPS JSON format to BEER format.', request: 'IPS Bundle - FHiR JSON or XML', response: 'BEER - Plain Text' },\n    { method: 'POST', endpoint: '/convertcdatoips', description: 'Convert CDA XML format to IPS JSON format.', request: 'CDA - XML', response: 'IPS Bundle - JSON' },\n    { method: 'POST', endpoint: '/convertcdatobeer', description: 'Convert CDA XML format to BEER format.', request: 'CDA - XML', response: 'BEER - Plain Text' },\n    { method: 'POST', endpoint: '/convertcdatomongo', description: 'Convert CDA XML format to MongoDB format.', request: 'CDA - XML', response: 'MongoDB - JSON' },\n    { method: 'POST', endpoint: '/converthl72xtomongo', description: 'Convert HL7 2.x format to MongoDB format.', request: 'HL7 2.x - Plain Text', response: 'MongoDB - JSON' },\n    { method: 'POST', endpoint: '/converthl72xtoips', description: 'Convert HL7 2.x format to IPS JSON format.', request: 'HL7 2.x - Plain Text', response: 'IPS Bundle - JSON' },\n    { method: 'POST', endpoint: '/convertxml', description: 'Generic convert XML format to JSON format.', request: 'XML', response: 'JSON' },\n    { method: 'POST', endpoint: '/convertfhirxml', description: 'Convert FHIR XML format to FHIR JSON format.', request: 'FHIR XML', response: 'FHIR JSON' },\n    { method: 'GET', endpoint: '/ips/all', description: 'Retrieve all IPS records.', request: 'None.', response: 'Array of JSON objects representing IPS records.' },\n    { method: 'GET', endpoint: '/ipsraw/:id', description: 'Retrieve raw IPS record by ID.', request: 'IPS record ID as URL parameter.', response: 'JSON object of the raw IPS record.' },\n    { method: 'GET', endpoint: '/ipsmongo/:id', description: 'Retrieve IPS record in MongoDB format by ID.', request: 'IPS record ID as URL parameter.', response: 'MongoDB - JSON' },\n    { method: 'GET', endpoint: '/ips/:id', description: 'Retrieve IPS record in expanded format by ID.', request: 'IPS record ID as URL parameter.', response: 'Expanded IPS - FHiR JSON' },\n    { method: 'GET', endpoint: '/ipsbasic/:id', description: 'Retrieve IPS record in basic format by ID.', request: 'IPS record ID as URL parameter.', response: 'Basic format - Plain Text' },\n    { method: 'GET', endpoint: '/ipsbeer/:id/:delim?', description: 'Retrieve IPS record in BEER format by ID with optional delimiter.', request: 'IPS record ID and optional delimiter as URL parameters.', response: 'BEER - Plain Text' },\n    { method: 'GET', endpoint: '/ipshl72x/:id', description: 'Retrieve IPS record in HL7 2.3 format by ID.', request: 'IPS record ID as URL parameter.', response: 'HL7 2.3 - Plain Text' },\n    { method: 'GET', endpoint: '/ipsxml/:id', description: 'Retrieve IPS record in expanded FHiR XML format by ID.', request: 'IPS record ID as URL parameter.', response: 'IPS Bundle - FHiR XML' },\n    { method: 'GET', endpoint: '/ipslegacy/:id', description: 'Retrieve IPS record in legacy format by ID.', request: 'IPS record ID as URL parameter.', response: 'Legacy format of the IPS record - FHiR JSON' },\n    { method: 'GET', endpoint: '/ipsunified/:id', description: 'Retrieve IPS record in compact unified format by ID.', request: 'IPS record ID as URL parameter.', response: 'Compact unified format of the IPS record - FHiR JSON' },\n    { method: 'GET', endpoint: '/ipsbyname/:name/:given', description: 'Retrieve expanded IPS FHiR by patient name and given name. Case insensitive.', request: 'Patient name and given name as URL parameters.', response: 'Expanded IPS Bundle - FHiR JSON' },\n    { method: 'GET', endpoint: '/ips/search/:name', description: 'Search IPS records by patient name.', request: 'Patient name as URL parameter.', response: 'Array of JSON objects representing IPS records.' },\n    { method: 'GET', endpoint: '/fetchipsora/:name/:givenName', description: 'Fetch IPS data from ORA by patient name and given name.', request: 'Patient name and given name as URL parameters.', response: 'JSON object from ORA system.' },\n    { method: 'PUT', endpoint: '/ips/:id', description: 'Update an IPS record by ID.', request: 'Partial JSON object representing the updated IPS record.', response: 'MongoDB object of the updated IPS record - JSON' },\n    { method: 'PUT', endpoint: '/ipsuuid/:uuid', description: 'Update an IPS record by UUID.', request: 'Partial JSON object representing the updated IPS record.', response: 'MongoDB object of the updated IPS record - JSON' },\n    { method: 'DELETE', endpoint: '/ips/:id', description: 'Delete an IPS record by ID.', request: 'IPS record ID as URL parameter.', response: 'Confirmation of deletion.' },\n    {\n      method: 'GET',\n      endpoint: '/xmpp/test-send-message',\n      description: 'Send a test message to the configured XMPP group chat.',\n      request: 'Optional query parameter ?msg=some text to customize the message',\n      response: 'A text response indicating success.'\n    },\n    {\n      method: 'POST',\n      endpoint: '/xmpp/xmpp-post',\n      description: 'Send a message to the XMPP group chat, optionally specifying a custom room.',\n      request: 'JSON body: { \"msg\": \"<message text>\", \"room\": \"<roomJid>\" } (room is optional)',\n      response: 'JSON response with status, the target room, and the message sent.'\n    },\n    {\n      method: 'POST',\n      endpoint: '/xmpp/xmpp-ips',\n      description: 'Fetch an IPS record by ID and broadcast it (as plain text) to the configured XMPP group chat.',\n      request: 'JSON body: { \"id\": \"<IPS record ID>\" }',\n      response: 'JSON response confirming the record was retrieved and sent.'\n    },\n    {\n      method: 'POST',\n      endpoint: '/xmpp/xmpp-ips-private',\n      description: 'Fetch an IPS record by ID and send it privately (type=\"chat\") to a specific occupant.',\n      request: 'JSON body: { \"id\": \"<IPS record ID>\", \"from\": \"<occupant name or user>\" }',\n      response: 'JSON response confirming the record was retrieved and sent privately.'\n    },\n  ];\n\n  const encodingEncryptionInstructions = [\n    {\n      feature: 'Gzip Compression',\n      incoming: (\n        <>\n          - Include the header <code>Content-Encoding: gzip</code> for incoming requests.\n          <br />- Compress your payload using gzip before sending.\n        </>\n      ),\n      outgoing: (\n        <>\n          - Include the header <code>Accept-Encoding: gzip</code> for responses.\n          <br />- The response will be returned in gzip format if supported.\n        </>\n      ),\n    },\n    {\n      feature: 'AES-256 Encryption',\n      incoming: (\n        <>\n          - Include the header <code>X-Encrypted: true</code> for incoming requests.\n          <br />- Encrypt your payload using AES-256 before sending.\n          <br />- Default format for the encrypted payload and IV is <code>hex</code>.\n          <br />- To send in Base64 format, include the header <code>Content-Encoding: base64</code>. Ensure both <code>encryptedData</code> and <code>iv</code> are Base64-encoded.\n        </>\n      ),\n      outgoing: (\n        <>\n          - Include the header <code>Accept-Encryption: aes256</code> for responses.\n          <br />- The response will be encrypted using AES-256 if supported.\n          <br />- Default format for the encrypted payload and IV is <code>hex</code>.\n          <br />- To receive in Base64 format, include the header <code>Accept-Encoding: base64</code>.\n        </>\n      ),\n    },\n    {\n      feature: 'Combined (AES-256 + Gzip)',\n      incoming: (\n        <>\n          - Use both <code>Content-Encoding: gzip</code> and <code>X-Encrypted: true</code>.\n          <br />- Compress your payload with gzip first, then encrypt with AES-256.\n          <br />- To send in Base64 format, include <code>Content-Encoding: gzip, base64</code>.\n        </>\n      ),\n      outgoing: (\n        <>\n          - Use both <code>Accept-Encoding: gzip</code> and <code>Accept-Encryption: aes256</code>.\n          <br />- The response will first be compressed with gzip, then encrypted with AES-256.\n          <br />- To receive in Base64 format, include <code>Accept-Encoding: gzip, base64</code>.\n        </>\n      ),\n    },\n    {\n      feature: 'Raw Binary (IV + MAC + Gzipped Data)',\n      incoming: (\n        <>\n          - Set <code>Content-Type: application/octet-stream</code>.\n          <br />- The payload <strong>must</strong> start with a 16-byte IV, followed by a 16-byte HMAC, and then the gzipped+encrypted data.\n          <br />- The server will verify HMAC, decrypt using AES-256-CBC, then decompress.\n          <br />- No JSON or Base64 fields are required in the body.\n        </>\n      ),\n      outgoing: (\n        <>\n          - Set <code>Accept: application/octet-stream</code> to get a binary response.\n          <br />- The server will compress, encrypt, and prepend 16-byte IV + 16-byte MAC to the payload.\n          <br />- The response has <code>Content-Type: application/octet-stream</code>, and <code>X-Encrypted: true</code>.\n          <br />- You can save this binary file and send it back in future requests.\n        </>\n      ),\n    },\n  ];\n\n  return (\n    <Container className=\"mt-5\">\n      <h2>API Documentation</h2>\n      <Table striped bordered hover responsive>\n        <thead>\n          <tr>\n            <th>Method</th>\n            <th>Endpoint</th>\n            <th>Description</th>\n            <th>Request</th>\n            <th>Response</th>\n          </tr>\n        </thead>\n        <tbody>\n          {apiEndpoints.map((endpoint, index) => (\n            <tr key={index}>\n              <td>{endpoint.method}</td>\n              <td>{endpoint.endpoint}</td>\n              <td>{endpoint.description}</td>\n              <td>{endpoint.request}</td>\n              <td>{endpoint.response}</td>\n            </tr>\n          ))}\n        </tbody>\n      </Table>\n\n      <h3 className=\"mt-5\">Encoding and Encryption Usage</h3>\n      <Table striped bordered hover responsive>\n        <thead>\n          <tr>\n            <th>Feature</th>\n            <th>Instructions for Incoming Requests</th>\n            <th>Instructions for Outgoing Responses</th>\n          </tr>\n        </thead>\n        <tbody>\n          {encodingEncryptionInstructions.map((row, index) => (\n            <tr key={index}>\n              <td>{row.feature}</td>\n              <td>{row.incoming}</td>\n              <td>{row.outgoing}</td>\n            </tr>\n          ))}\n        </tbody>\n      </Table>\n    </Container>\n  );\n}\n\nexport default APIDocumentationPage;","// src/components/LoadingSpinner.js\nimport React from 'react';\nimport { useLoading } from '../contexts/LoadingContext';\nimport './LoadingSpinner.css';\n\nconst LoadingSpinner = () => {\n  const { isLoading } = useLoading();\n\n  if (!isLoading) return null;\n\n  return (\n    <div className=\"loading-spinner-overlay\">\n      <div className=\"spinner-border text-primary\" role=\"status\">\n        <span className=\"sr-only\">Loading...</span>\n      </div>\n    </div>\n  );\n};\n\nexport default LoadingSpinner;\n","\n// src/App.js\nimport React from 'react';\nimport { BrowserRouter as Router, Route, Routes } from 'react-router-dom';\nimport HomePage from './pages/HomePage';\nimport QRPage from './pages/QRPage';\nimport DataUploadPage from './pages/DataUploadPage';\nimport AboutPage from './pages/AboutPage';\nimport NavigationBar from './appcomp/NavigationBar';\nimport ChangeLogPage from './pages/ChangelogPage';\nimport AboutWebAppPage from './pages/AboutWebappPage';\nimport APIGETPage from './pages/APIGETPage';\n// import OffRoadPage from './pages/OffRoadPage';\n// import OffRoadPOSTPage from './pages/OffRoadPOSTPage';\n// import NLDPOSTPage from './pages/NLDPOSTPage';\nimport UnifiedPostPage from './pages/UnifiedPostPage';\nimport UnifiedIPSGetPage from './pages/UnifiedIPSGetPage';\nimport BEERGardenPage from './pages/BEERGardenPage';\nimport APIDocumentationPage from './pages/APIDocumentationPage';\nimport { PatientProvider } from './PatientContext';\nimport { LoadingProvider } from './contexts/LoadingContext';\nimport LoadingSpinner from './components/LoadingSpinner';\n\nfunction App() {\n  return (\n    <PatientProvider>\n      <LoadingProvider>\n        <Router>\n          <div style={{ paddingTop: '56px' }}> {/* Adjust the padding-top value based on your Navbar height */}\n            <NavigationBar />\n            <LoadingSpinner />\n            <Routes>\n              <Route path=\"/\" element={<HomePage />} />\n              <Route path=\"/qr/:id?\" element={<QRPage />} />\n              <Route path=\"/bulkupload\" element={<DataUploadPage />} />\n              <Route path=\"/about\" element={<AboutPage />} />\n              <Route path=\"/changelog\" element={<ChangeLogPage />} />\n              <Route path=\"/aboutwebapp\" element={<AboutWebAppPage />} />\n              <Route path=\"/api/:id?\" element={<APIGETPage />} />\n              {/* <Route path=\"/ipsoffroad\" element={<OffRoadPage />} />\n              <Route path=\"/offroadpost/:id?\" element={<OffRoadPOSTPage />} /> */}\n              <Route path=\"/beergarden/:id?\" element={<BEERGardenPage />} />\n              <Route path=\"/apidocumentation\" element={<APIDocumentationPage />} />\n              <Route path=\"/puships\" element={<UnifiedPostPage />} />\n              <Route path=\"/fetchips\" element={<UnifiedIPSGetPage />} />\n            </Routes>\n          </div>\n        </Router>\n      </LoadingProvider>\n    </PatientProvider>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport { PatientProvider } from './PatientContext';\n\nReactDOM.render(\n  <PatientProvider>\n    <App />\n  </PatientProvider>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}