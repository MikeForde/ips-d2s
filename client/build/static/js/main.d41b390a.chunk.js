(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{197:function(e,t,a){},224:function(e,t,a){e.exports=a(356)},229:function(e,t,a){},254:function(e,t){},256:function(e,t){},288:function(e,t){},290:function(e,t){},291:function(e,t){},296:function(e,t){},298:function(e,t){},318:function(e,t){},334:function(e,t){},337:function(e,t){},352:function(e,t,a){},355:function(e,t,a){},356:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(26),o=a.n(r),i=(a(229),a(23)),c=a(11),m=(a(64),a(365)),s=a(205),d=a(367),u=(a(230),a(19)),E=a.n(u),p=a(370),h=a(146);a(197);const g=e=>{if(!e)return"";const[t,a]=e.split("T"),n=a.split(".")[0];return"00:00:00"===n?t:`${t} ${n}`};function v(e){let{add:t}=e;const[a,r]=Object(n.useState)(!1),[o,i]=Object(n.useState)({packageUUID:Object(h.v4)(),timeStamp:new Date,patient:{name:"",given:"",dob:"",gender:"",nationality:"",practitioner:"",organization:""},medication:[{name:"",code:"",system:"",date:"",dosage:""}],allergies:[{name:"",code:"",system:"",criticality:"",date:""}],conditions:[{name:"",code:"",system:"",date:""}],observations:[{name:"",code:"",system:"",date:"",value:""}],immunizations:[{name:"",code:"",system:"",date:""}]}),[c,d]=Object(n.useState)(!1),u=e=>{const{name:t,value:a}=e.target;i({...o,patient:{...o.patient,[t]:a}})},E=(e,t)=>{const{name:a,value:n}=t.target,l=[...o.medication];l[e][a]=n,i({...o,medication:l})},v=(e,t)=>{const{name:a,value:n}=t.target,l=[...o.allergies];l[e][a]=n,i({...o,allergies:l})},b=(e,t)=>{const{name:a,value:n}=t.target,l=[...o.conditions];l[e][a]=n,i({...o,conditions:l})},y=(e,t)=>{const{name:a,value:n}=t.target,l=[...o.observations];l[e][a]=n,i({...o,observations:l})},f=(e,t)=>{const{name:a,value:n}=t.target,l=[...o.immunizations];l[e][a]=n,i({...o,immunizations:l})};return l.a.createElement("div",null,l.a.createElement(s.a,{className:"mb-3",onClick:()=>r(!a)},a?"Hide Form":"Manually Add New IPS Entry"),a&&l.a.createElement(m.a,{onSubmit:e=>{if(e.preventDefault(),!o.patient.name||!o.patient.given||!o.patient.dob)return d(!0),void setTimeout(()=>{d(!1)},3e3);o.patient.gender||(o.patient.gender="Unknown"),o.patient.nation||(o.patient.nation="UK"),o.patient.practitioner||(o.patient.practitioner="Dr No"),o.patient.organization||(o.patient.organization="UK DMS"),o.packageUUID&&(t(o),i({packageUUID:Object(h.v4)(),timeStamp:new Date,patient:{name:"",given:"",dob:"",gender:"",nation:"",practitioner:"",organization:""},medication:[{name:"",code:"",system:"",date:"",dosage:""}],allergies:[{name:"",code:"",system:"",criticality:"",date:""}],conditions:[{name:"",code:"",system:"",date:""}],observations:[{name:"",code:"",system:"",date:"",value:""}],immunizations:[{name:"",code:"",system:"",date:""}]}))}},l.a.createElement(m.a.Group,null,l.a.createElement(m.a.Label,null,l.a.createElement("h3",null,"Add IPS Entry")),l.a.createElement(m.a.Group,{className:"row"},l.a.createElement(m.a.Label,{className:"col-sm-2"},l.a.createElement("b",null,"Package UUID")),l.a.createElement("div",{className:"col-sm-10"},l.a.createElement(m.a.Control,{type:"text",readOnly:!0,value:o.packageUUID})))),l.a.createElement(m.a.Group,{className:"row"},l.a.createElement(m.a.Label,{className:"col-sm-2"},"Time Stamp"),l.a.createElement("div",{className:"col-sm-10"},l.a.createElement(m.a.Control,{type:"text",readOnly:!0,value:o.timeStamp}))),l.a.createElement(m.a.Group,null,l.a.createElement(m.a.Label,null,l.a.createElement("b",null,"Patient Information")),l.a.createElement(m.a.Group,{className:"row"},l.a.createElement(m.a.Label,{className:"col-sm-2"},"Name"),l.a.createElement("div",{className:"col-sm-10"},l.a.createElement(m.a.Control,{type:"text",name:"name",value:o.patient.name,onChange:u,placeholder:"Patient Name"}))),l.a.createElement(m.a.Group,{className:"row"},l.a.createElement(m.a.Label,{className:"col-sm-2"},"Given Name"),l.a.createElement("div",{className:"col-sm-10"},l.a.createElement(m.a.Control,{type:"text",name:"given",value:o.patient.given,onChange:u,placeholder:"Given Name"}))),l.a.createElement(m.a.Group,{className:"row"},l.a.createElement(m.a.Label,{className:"col-sm-2"},"Date of Birth"),l.a.createElement("div",{className:"col-sm-10"},l.a.createElement(m.a.Control,{type:"date",name:"dob",value:o.patient.dob,onChange:u}))),l.a.createElement(m.a.Group,{className:"row"},l.a.createElement(m.a.Label,{className:"col-sm-2"},"Gender"),l.a.createElement("div",{className:"col-sm-10"},l.a.createElement(m.a.Control,{as:"select",name:"gender",value:o.patient.gender,onChange:u},l.a.createElement("option",{value:""},"Select Gender"),l.a.createElement("option",{value:"Male"},"Male"),l.a.createElement("option",{value:"Female"},"Female"),l.a.createElement("option",{value:"Other"},"Other"),l.a.createElement("option",{value:"Unknown"},"Unknown")))),l.a.createElement(m.a.Group,{className:"row"},l.a.createElement(m.a.Label,{className:"col-sm-2"},"Country"),l.a.createElement("div",{className:"col-sm-4"},l.a.createElement(m.a.Control,{type:"text",name:"nation",defaultValue:"UK",value:o.patient.nation,onChange:u,placeholder:"Country - default UK"})),l.a.createElement(m.a.Label,{className:"col-sm-2"},"Practitioner"),l.a.createElement("div",{className:"col-sm-4"},l.a.createElement(m.a.Control,{type:"text",name:"practitioner",value:o.patient.practitioner,onChange:u,placeholder:"Practitioner - default Dr No"})),l.a.createElement(m.a.Label,{className:"col-sm-2"},"Organization"),l.a.createElement("div",{className:"col-sm-4"},l.a.createElement(m.a.Control,{type:"text",name:"organization",value:o.patient.organization,onChange:u,placeholder:"Organization - default UK DMS"})))),l.a.createElement(s.a,{className:"mb-3 minor-button",onClick:()=>{i({...o,medication:[...o.medication,{name:"",code:"",system:"",date:"",dosage:""}]})}},"Add Medication"),o.medication.map((e,t)=>l.a.createElement("div",{key:t},l.a.createElement(m.a.Group,{className:"row"},l.a.createElement(m.a.Label,{className:"col-sm-2"},"Medication"),l.a.createElement("div",{className:"col-sm-10"},l.a.createElement(m.a.Control,{type:"text",name:"name",value:e.name,onChange:e=>E(t,e),placeholder:"Medication Name"}))),l.a.createElement(m.a.Group,{className:"row"},l.a.createElement(m.a.Label,{className:"col-sm-2"},"Code"),l.a.createElement("div",{className:"col-sm-10"},l.a.createElement(m.a.Control,{type:"text",name:"code",value:e.code,onChange:e=>E(t,e),placeholder:"Medication Code"}))),l.a.createElement(m.a.Group,{className:"row"},l.a.createElement(m.a.Label,{className:"col-sm-2"},"System"),l.a.createElement("div",{className:"col-sm-10"},l.a.createElement(m.a.Control,{type:"text",name:"system",value:e.system,onChange:e=>E(t,e),placeholder:"Medication Code System"}))),l.a.createElement(m.a.Group,{className:"row"},l.a.createElement(m.a.Label,{className:"col-sm-2"},"Date"),l.a.createElement("div",{className:"col-sm-10"},l.a.createElement(m.a.Control,{type:"datetime-local",name:"date",value:g(e.date),onChange:e=>E(t,e),placeholder:"Date"}))),l.a.createElement(m.a.Group,{className:"row"},l.a.createElement(m.a.Label,{className:"col-sm-2"},"Dosage"),l.a.createElement("div",{className:"col-sm-10"},l.a.createElement(m.a.Control,{type:"text",name:"dosage",defaultValue:"Stat",value:e.dosage,onChange:e=>E(t,e),placeholder:"Dosage"}))))),l.a.createElement(s.a,{className:"mb-3 minor-button",onClick:()=>{i({...o,allergies:[...o.allergies,{name:"",code:"",system:"",criticality:"",date:""}]})}},"Add Allergy"),o.allergies.map((e,t)=>l.a.createElement("div",{key:t},l.a.createElement(m.a.Group,{className:"row"},l.a.createElement(m.a.Label,{className:"col-sm-2"},"Allergy"),l.a.createElement("div",{className:"col-sm-10"},l.a.createElement(m.a.Control,{type:"text",name:"name",value:e.name,onChange:e=>v(t,e),placeholder:"Allergy Name"}))),l.a.createElement(m.a.Group,{className:"row"},l.a.createElement(m.a.Label,{className:"col-sm-2"},"Code"),l.a.createElement("div",{className:"col-sm-10"},l.a.createElement(m.a.Control,{type:"text",name:"code",value:e.code,onChange:e=>v(t,e),placeholder:"Allergy Code"}))),l.a.createElement(m.a.Group,{className:"row"},l.a.createElement(m.a.Label,{className:"col-sm-2"},"System"),l.a.createElement("div",{className:"col-sm-10"},l.a.createElement(m.a.Control,{type:"text",name:"system",value:e.system,onChange:e=>v(t,e),placeholder:"Allergy Code System"}))),l.a.createElement(m.a.Group,{className:"row"},l.a.createElement(m.a.Label,{className:"col-sm-2"},"Criticality"),l.a.createElement("div",{className:"col-sm-10"},l.a.createElement(m.a.Control,{as:"select",name:"criticality",value:e.criticality,onChange:e=>v(t,e),placeholder:"Criticality"},l.a.createElement("option",{value:""},"Select Criticality"),l.a.createElement("option",{value:"high"},"High"),l.a.createElement("option",{value:"medium"},"Medium"),l.a.createElement("option",{value:"low"},"Low")))),l.a.createElement(m.a.Group,{className:"row"},l.a.createElement(m.a.Label,{className:"col-sm-2"},"Date"),l.a.createElement("div",{className:"col-sm-10"},l.a.createElement(m.a.Control,{type:"date",name:"date",value:e.date,onChange:e=>v(t,e),placeholder:"Date"}))))),l.a.createElement(s.a,{className:"mb-3 minor-button",onClick:()=>{i({...o,conditions:[...o.conditions,{name:"",code:"",system:"",date:""}]})}},"Add Condition"),o.conditions.map((e,t)=>l.a.createElement("div",{key:t},l.a.createElement(m.a.Group,{className:"row"},l.a.createElement(m.a.Label,{className:"col-sm-2"},"Condition"),l.a.createElement("div",{className:"col-sm-10"},l.a.createElement(m.a.Control,{type:"text",name:"name",value:e.name,onChange:e=>b(t,e),placeholder:"Condition/Problem Name"}))),l.a.createElement(m.a.Group,{className:"row"},l.a.createElement(m.a.Label,{className:"col-sm-2"},"Code"),l.a.createElement("div",{className:"col-sm-10"},l.a.createElement(m.a.Control,{type:"text",name:"code",value:e.code,onChange:e=>b(t,e),placeholder:"Condition/Problem Code"}))),l.a.createElement(m.a.Group,{className:"row"},l.a.createElement(m.a.Label,{className:"col-sm-2"},"System"),l.a.createElement("div",{className:"col-sm-10"},l.a.createElement(m.a.Control,{type:"text",name:"system",value:e.system,onChange:e=>b(t,e),placeholder:"Condition/Problem Code System"}))),l.a.createElement(m.a.Group,{className:"row"},l.a.createElement(m.a.Label,{className:"col-sm-2"},"Date"),l.a.createElement("div",{className:"col-sm-10"},l.a.createElement(m.a.Control,{type:"date",name:"date",value:e.date,onChange:e=>b(t,e),placeholder:"Date"}))))),l.a.createElement(s.a,{className:"mb-3 minor-button",onClick:()=>{i({...o,observations:[...o.observations,{name:"",code:"",system:"",date:"",value:""}]})}},"Add Observation"),o.observations.map((e,t)=>l.a.createElement("div",{key:t},l.a.createElement(m.a.Group,{className:"row"},l.a.createElement(m.a.Label,{className:"col-sm-2"},"Observation"),l.a.createElement("div",{className:"col-sm-10"},l.a.createElement(m.a.Control,{as:"select",name:"name",value:e.name,onChange:e=>y(t,e)},l.a.createElement("option",{value:""},"Select an observation or enter custom"),l.a.createElement("option",{value:"Blood Pressure"},"Blood Pressure"),l.a.createElement("option",{value:"Pulse"},"Pulse"),l.a.createElement("option",{value:"Resp Rate"},"Resp Rate"),l.a.createElement("option",{value:"Temperature"},"Temperature"),l.a.createElement("option",{value:"Oxygen Sats"},"Oxygen Sats"),l.a.createElement("option",{value:"AVPU"},"AVPU"),l.a.createElement("option",{value:"Weight"},"Weight"),l.a.createElement("option",{value:"Blood Group"},"Blood Group")),l.a.createElement(m.a.Control,{type:"text",name:"name",value:e.name,onChange:e=>y(t,e),placeholder:"Custom Observation",className:"mt-2"}))),l.a.createElement(m.a.Group,{className:"row"},l.a.createElement(m.a.Label,{className:"col-sm-2"},"Code"),l.a.createElement("div",{className:"col-sm-10"},l.a.createElement(m.a.Control,{type:"text",name:"code",value:g(e.code),onChange:e=>y(t,e),placeholder:"Observation Code"}))),l.a.createElement(m.a.Group,{className:"row"},l.a.createElement(m.a.Label,{className:"col-sm-2"},"System"),l.a.createElement("div",{className:"col-sm-10"},l.a.createElement(m.a.Control,{type:"text",name:"system",value:g(e.system),onChange:e=>y(t,e),placeholder:"Observation Code System"}))),l.a.createElement(m.a.Group,{className:"row"},l.a.createElement(m.a.Label,{className:"col-sm-2"},"Date"),l.a.createElement("div",{className:"col-sm-10"},l.a.createElement(m.a.Control,{type:"datetime-local",name:"date",value:g(e.date),onChange:e=>y(t,e),placeholder:"Date"}))),l.a.createElement(m.a.Group,{className:"row"},l.a.createElement(m.a.Label,{className:"col-sm-2"},"Value"),l.a.createElement("div",{className:"col-sm-10"},l.a.createElement(m.a.Control,{type:"text",name:"value",value:e.value,onChange:e=>y(t,e),placeholder:"Value"}))))),l.a.createElement(s.a,{className:"mb-3 minor-button",onClick:()=>{i({...o,immunizations:[...o.immunizations,{name:"",code:"",system:"",date:""}]})}},"Add Immunization"),o.immunizations.map((e,t)=>l.a.createElement("div",{key:t},l.a.createElement(m.a.Group,{className:"row"},l.a.createElement(m.a.Label,{className:"col-sm-2"},"Immunization"),l.a.createElement("div",{className:"col-sm-10"},l.a.createElement(m.a.Control,{type:"text",name:"name",value:e.name,onChange:e=>f(t,e),placeholder:"Immunization Name or Code"}))),l.a.createElement(m.a.Group,{className:"row"},l.a.createElement(m.a.Label,{className:"col-sm-2"},"System"),l.a.createElement("div",{className:"col-sm-10"},l.a.createElement(m.a.Control,{type:"text",name:"system",value:e.system,onChange:e=>f(t,e),placeholder:"Coding System (e.g., LOINC, SNOMED) or url"}))),l.a.createElement(m.a.Group,{className:"row"},l.a.createElement(m.a.Label,{className:"col-sm-2"},"Date"),l.a.createElement("div",{className:"col-sm-10"},l.a.createElement(m.a.Control,{type:"datetime-local",name:"date",value:g(e.date),onChange:e=>f(t,e),placeholder:"Date"}))))),l.a.createElement(s.a,{className:"submit",variant:"primary",type:"submit"},"Submit IPS Data"),l.a.createElement(p.a,{show:c,onClose:()=>d(!1),bg:"danger",className:"fixed-bottom m-3"},l.a.createElement(p.a.Body,null,"Please fill in all required fields."))),l.a.createElement("br",null))}var b=a(222),y=a(368),f=a(369),S=a(360),P=a(206),I=a(22),N=a(21);const C=Object(n.createContext)(),w=e=>{let{children:t}=e;const[a,r]=Object(n.useState)([]),[o,i]=Object(n.useState)(null);return l.a.createElement(C.Provider,{value:{selectedPatients:a,setSelectedPatients:r,selectedPatient:o,setSelectedPatient:i}},t)},O=Object(n.createContext)(),D=()=>Object(n.useContext)(O),A=e=>{let{children:t}=e;const[a,r]=Object(n.useState)(!1);return l.a.createElement(O.Provider,{value:{isLoading:a,startLoading:()=>r(!0),stopLoading:()=>r(!1)}},t)};var x=a(97);const L=e=>{if(!e)return"";const[t,a]=e.split("T");return`${t} ${a.split(".")[0]}`},R=e=>{if(!e)return"";const[t,a]=e.split("T");return`${t} ${a.split(".")[0]}`};function T(e){let{ips:t,remove:a,update:r}=e;const[o,c]=Object(n.useState)(!1),[d,u]=Object(n.useState)(!1),[p,h]=Object(n.useState)(!1),[g,v]=Object(n.useState)({...t}),{setSelectedPatient:w}=Object(n.useContext)(C),{startLoading:O,stopLoading:A}=D(),T=()=>u(!1),B=()=>{w([t]),O()},k=e=>{const{name:t,value:a}=e.target;v(e=>({...e,patient:{...e.patient,[t]:a}}))},M=e=>{v(t=>({...t,[e]:[...t[e],{name:"",date:"",dosage:"",criticality:"",value:"",system:"",code:""}]}))},_=(e,t)=>{v(a=>({...a,[e]:a[e].filter((e,a)=>a!==t)}))},U=(e,t,a)=>{const{name:n,value:l}=a.target;v(a=>({...a,[e]:a[e].map((e,a)=>a===t?{...e,[n]:l}:e)}))},G=e=>l.a.createElement(b.a,{id:"tooltip-"+e},e);return l.a.createElement("div",{className:"ips"},l.a.createElement("div",null,l.a.createElement("h5",null,"IPS UUID: ",t.packageUUID),!o&&l.a.createElement(l.a.Fragment,null,l.a.createElement("p",null,"Patient: ",t.patient.given," ",t.patient.name),l.a.createElement(s.a,{variant:"link",onClick:()=>c(!0)},"Show More")),o&&l.a.createElement(l.a.Fragment,null,l.a.createElement("h5",null,"Timestamp: ",R(t.timeStamp)),l.a.createElement("h4",null,"Patient Details:"),l.a.createElement("p",null,"Name: ",t.patient.name),l.a.createElement("p",null,"Given Name: ",t.patient.given),l.a.createElement("p",null,"DOB: ",t.patient.dob.split("T")[0]),l.a.createElement("p",null,"Gender: ",t.patient.gender),l.a.createElement("p",null,"Country: ",t.patient.nation),l.a.createElement("p",null,"Practitioner: ",t.patient.practitioner),l.a.createElement("p",null,"Organization: ",t.patient.organization),t.medication&&t.medication.length>0&&l.a.createElement(l.a.Fragment,null,l.a.createElement("h4",null,"Medications:"),l.a.createElement("table",{className:"table table-striped"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Name"),l.a.createElement("th",null,"Code"),l.a.createElement("th",null,"System"),l.a.createElement("th",null,"Date"),l.a.createElement("th",null,"Dosage"))),l.a.createElement("tbody",null,t.medication.map((e,t)=>l.a.createElement("tr",{key:t},l.a.createElement("td",null,e.name),l.a.createElement("td",null,e.code),l.a.createElement("td",null,e.system),l.a.createElement("td",null,R(e.date)),l.a.createElement("td",null,e.dosage)))))),t.allergies&&t.allergies.length>0&&l.a.createElement(l.a.Fragment,null,l.a.createElement("h4",null,"Allergies:"),l.a.createElement("table",{className:"table table-striped"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Name"),l.a.createElement("th",null,"Code"),l.a.createElement("th",null,"System"),l.a.createElement("th",null,"Criticality"),l.a.createElement("th",null,"Date"))),l.a.createElement("tbody",null,t.allergies.map((e,t)=>l.a.createElement("tr",{key:t},l.a.createElement("td",null,e.name),l.a.createElement("td",null,e.code),l.a.createElement("td",null,e.system),l.a.createElement("td",null,e.criticality),l.a.createElement("td",null,R(e.date))))))),t.conditions&&t.conditions.length>0&&l.a.createElement(l.a.Fragment,null,l.a.createElement("h4",null,"Conditions:"),l.a.createElement("table",{className:"table table-striped"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Name"),l.a.createElement("th",null,"Code"),l.a.createElement("th",null,"System"),l.a.createElement("th",null,"Date"))),l.a.createElement("tbody",null,t.conditions.map((e,t)=>l.a.createElement("tr",{key:t},l.a.createElement("td",null,e.name),l.a.createElement("td",null,e.code),l.a.createElement("td",null,e.system),l.a.createElement("td",null,R(e.date))))))),t.observations&&t.observations.length>0&&l.a.createElement(l.a.Fragment,null,l.a.createElement("h4",null,"Observations:"),l.a.createElement("table",{className:"table table-striped"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Name"),l.a.createElement("th",null,"Code"),l.a.createElement("th",null,"System"),l.a.createElement("th",null,"Date"),l.a.createElement("th",null,"Value"))),l.a.createElement("tbody",null,t.observations.map((e,t)=>l.a.createElement("tr",{key:t},l.a.createElement("td",null,e.name),l.a.createElement("td",null,e.code),l.a.createElement("td",null,e.system),l.a.createElement("td",null,R(e.date)),l.a.createElement("td",null,e.value)))))),t.immunizations&&t.immunizations.length>0&&l.a.createElement(l.a.Fragment,null,l.a.createElement("h4",null,"Immunizations:"),l.a.createElement("table",{className:"table table-striped"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Name"),l.a.createElement("th",null,"Date"),l.a.createElement("th",null,"System"),l.a.createElement("th",null,"Code"))),l.a.createElement("tbody",null,t.immunizations.map((e,t)=>l.a.createElement("tr",{key:t},l.a.createElement("td",null,e.name),l.a.createElement("td",null,R(e.date)),l.a.createElement("td",null,e.system),l.a.createElement("td",null,e.code)))))),l.a.createElement(s.a,{variant:"link",onClick:()=>c(!1)},"Show Less"))),l.a.createElement("div",null,l.a.createElement(y.a,{placement:"top",overlay:G("View IPS API Page")},l.a.createElement(i.b,{to:"/api"},l.a.createElement(s.a,{variant:"outline-secondary",className:"qr-button custom-button",onClick:B},l.a.createElement(N.a,{icon:I.f})))),l.a.createElement(y.a,{placement:"top",overlay:G("View QR Code Page")},l.a.createElement(i.b,{to:"/qr"},l.a.createElement(s.a,{variant:"outline-secondary",className:"qr-button custom-button",onClick:B},l.a.createElement(N.a,{icon:I.g})))),l.a.createElement(y.a,{placement:"top",overlay:G("View BEER Garden Page")},l.a.createElement(i.b,{to:"/beergarden"},l.a.createElement(s.a,{variant:"outline-secondary",className:"qr-button custom-button",onClick:B},l.a.createElement(N.a,{icon:I.a})))),l.a.createElement(y.a,{placement:"top",overlay:G("View External POST Page")},l.a.createElement(i.b,{to:"/puships"},l.a.createElement(s.a,{variant:"outline-secondary",className:"qr-button custom-button",onClick:B},l.a.createElement(N.a,{icon:I.i})))),l.a.createElement(y.a,{placement:"top",overlay:G("Generate PDF")},l.a.createElement(s.a,{variant:"outline-secondary",className:"qr-button custom-button",onClick:()=>{(async e=>{const t=await x.PDFDocument.create(),a=t.addPage([595.28,841.89]),{width:n,height:l}=a.getSize(),r=await t.embedFont(x.StandardFonts.Helvetica),o=await t.embedFont(x.StandardFonts.HelveticaBold);let i=l-50;const c=(e,t,l,r,o)=>{const i=e.split("\n");return i.forEach((e,i)=>{a.drawText(e,{x:r,y:o-i*l*1.2,size:l,font:t,color:Object(x.rgb)(0,0,0),maxWidth:n-100,lineHeight:1.2*l})}),o-i.length*l*1.2};c(`Patient Report: ${e.patient.given} ${e.patient.name}`,o,12,50,i),i-=20;["Name: "+e.patient.name,"Given Name: "+e.patient.given,"DOB: "+e.patient.dob.split("T")[0],"Gender: "+e.patient.gender,"Country: "+e.patient.nation,"Practitioner: "+e.patient.practitioner,"Organization: "+e.patient.organization].forEach(e=>{i<50&&(i=l-50,t.addPage()),c(e,r,10,50,i),i-=15}),i-=5;[{title:"Medications",items:e.medication,formatItem:(e,t)=>`${t+1}. ${e.name} - Date: ${L(e.date)} - Dosage: ${e.dosage}`},{title:"Allergies",items:e.allergies,formatItem:(e,t)=>`${t+1}. ${e.name} - Criticality: ${e.criticality} - Date: ${e.date.split("T")[0]}`},{title:"Conditions",items:e.conditions,formatItem:(e,t)=>`${t+1}. ${e.name} - Date: ${L(e.date)}`},{title:"Observations",items:e.observations,formatItem:(e,t)=>`${t+1}. ${e.name} - Date: ${L(e.date)} - Value: ${e.value}`},{title:"Immunizations",items:e.immunizations,formatItem:(e,t)=>`${t+1}. ${e.name} - Date: ${e.date.split("T")[0]} - System: ${e.system}`}].forEach(e=>{i-=15,i<50&&(i=l-50,t.addPage()),c(e.title,o,12,50,i),i-=15,e.items.forEach((a,n)=>{i<50&&(i=l-50,t.addPage());const o=e.formatItem(a,n);i=c(o,r,10,50,i),i-=5})});const m=await t.save(),s=new Blob([m],{type:"application/pdf"}),d=URL.createObjectURL(s),u=window.open(d);setTimeout(()=>{u.document.title=`Patient_${e.patient.given}_${e.patient.name}_Report.pdf`;const t=u.document.createElement("a");t.href=d,t.download=`Patient_${e.patient.given}_${e.patient.name}_Report.pdf`,u.document.body.appendChild(t),setTimeout(()=>{t.parentNode.removeChild(t)},1e3)},500)})(t)}},l.a.createElement(N.a,{icon:I.e}))),l.a.createElement(y.a,{placement:"top",overlay:G("Edit IPS Record")},l.a.createElement(s.a,{variant:"outline-secondary",className:"custom-button",onClick:()=>{v({...t}),h(!0)}},l.a.createElement(N.a,{icon:I.d}))),l.a.createElement(y.a,{placement:"top",overlay:G("Delete IPS Record")},l.a.createElement(s.a,{variant:"outline-danger",className:"custom-button",onClick:()=>u(!0)},l.a.createElement(N.a,{icon:I.h})))),l.a.createElement(f.a,{show:d,onHide:T},l.a.createElement(f.a.Header,{closeButton:!0},l.a.createElement(f.a.Title,null,"Confirm Deletion")),l.a.createElement(f.a.Body,null,"Are you sure you want to delete this IPS record?"),l.a.createElement(f.a.Footer,null,l.a.createElement(s.a,{variant:"secondary",onClick:T},"Cancel"),l.a.createElement(s.a,{variant:"danger",onClick:()=>{a(t._id),u(!1)}},"Delete"))),l.a.createElement(f.a,{show:p,onHide:()=>h(!1),dialogClassName:"edit-modal"},l.a.createElement(f.a.Header,{closeButton:!0},l.a.createElement(f.a.Title,null,"Edit Patient")),l.a.createElement(f.a.Body,null,l.a.createElement(m.a,null,l.a.createElement(S.a,null,l.a.createElement(P.a,null,l.a.createElement(m.a.Group,{controlId:"formPatientName"},l.a.createElement(m.a.Label,null,"Name"),l.a.createElement(m.a.Control,{type:"text",name:"name",value:g.patient.name,onChange:k}))),l.a.createElement(P.a,null,l.a.createElement(m.a.Group,{controlId:"formPatientGiven"},l.a.createElement(m.a.Label,null,"Given Name"),l.a.createElement(m.a.Control,{type:"text",name:"given",value:g.patient.given,onChange:k})))),l.a.createElement(S.a,null,l.a.createElement(P.a,null,l.a.createElement(m.a.Group,{controlId:"formPatientDOB"},l.a.createElement(m.a.Label,null,"DOB"),l.a.createElement(m.a.Control,{type:"date",name:"dob",value:g.patient.dob.split("T")[0],onChange:k}))),l.a.createElement(P.a,null,l.a.createElement(m.a.Group,{controlId:"formPatientGender"},l.a.createElement(m.a.Label,null,"Gender"),l.a.createElement(m.a.Control,{as:"select",name:"gender",value:g.patient.gender,onChange:k},l.a.createElement("option",{value:""},"Select Gender"),l.a.createElement("option",{value:"Male"},"Male"),l.a.createElement("option",{value:"Female"},"Female"),l.a.createElement("option",{value:"Other"},"Other"),l.a.createElement("option",{value:"Unknown"},"Unknown"))))),l.a.createElement(S.a,null,l.a.createElement(P.a,null,l.a.createElement(m.a.Group,{controlId:"formPatientNation"},l.a.createElement(m.a.Label,null,"Country"),l.a.createElement(m.a.Control,{type:"text",name:"nation",value:g.patient.nation,onChange:k}))),l.a.createElement(P.a,null,l.a.createElement(m.a.Group,{controlId:"formPatientPractitioner"},l.a.createElement(m.a.Label,null,"Practitioner"),l.a.createElement(m.a.Control,{type:"text",name:"practitioner",value:g.patient.practitioner,onChange:k}))),l.a.createElement(P.a,null,l.a.createElement(m.a.Group,{controlId:"formPatientOrganization"},l.a.createElement(m.a.Label,null,"Organization"),l.a.createElement(m.a.Control,{type:"text",name:"organization",value:g.patient.organization,onChange:k})))),l.a.createElement("h4",null,"Medications:"),l.a.createElement("table",{className:"table table-bordered"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Name"),l.a.createElement("th",null,"Code"),l.a.createElement("th",null,"System"),l.a.createElement("th",null,"Date"),l.a.createElement("th",null,"Dosage"),l.a.createElement("th",null,"Actions"))),l.a.createElement("tbody",null,g.medication.map((e,t)=>l.a.createElement("tr",{key:t},l.a.createElement("td",null,l.a.createElement(m.a.Control,{type:"text",name:"name",value:e.name,onChange:e=>U("medication",t,e)})),l.a.createElement("td",null,l.a.createElement(m.a.Control,{type:"text",name:"code",value:e.code,onChange:e=>U("medication",t,e)})),l.a.createElement("td",null,l.a.createElement(m.a.Control,{type:"text",name:"system",value:e.system,onChange:e=>U("medication",t,e)})),l.a.createElement("td",null,l.a.createElement(m.a.Control,{type:"datetime-local",name:"date",value:R(e.date),onChange:e=>U("medication",t,e)})),l.a.createElement("td",null,l.a.createElement(m.a.Control,{type:"text",name:"dosage",value:e.dosage,onChange:e=>U("medication",t,e)})),l.a.createElement("td",null,l.a.createElement(s.a,{variant:"outline-danger",onClick:()=>_("medication",t)},l.a.createElement(N.a,{icon:I.h}))))))),l.a.createElement(s.a,{variant:"primary",onClick:()=>M("medication")},"Add Medication"),l.a.createElement("h4",null,"Allergies:"),l.a.createElement("table",{className:"table table-bordered"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Name"),l.a.createElement("th",null,"Code"),l.a.createElement("th",null,"System"),l.a.createElement("th",null,"Criticality"),l.a.createElement("th",null,"Date"),l.a.createElement("th",null,"Actions"))),l.a.createElement("tbody",null,g.allergies.map((e,t)=>l.a.createElement("tr",{key:t},l.a.createElement("td",null,l.a.createElement(m.a.Control,{type:"text",name:"name",value:e.name,onChange:e=>U("allergies",t,e)})),l.a.createElement("td",null,l.a.createElement(m.a.Control,{type:"text",name:"code",value:e.code,onChange:e=>U("allergies",t,e)})),l.a.createElement("td",null,l.a.createElement(m.a.Control,{type:"text",name:"system",value:e.system,onChange:e=>U("allergies",t,e)})),l.a.createElement("td",null,l.a.createElement(m.a.Control,{as:"select",name:"criticality",value:e.criticality,onChange:e=>U("allergies",t,e)},l.a.createElement("option",{value:""},"Select Criticality"),l.a.createElement("option",{value:"High"},"High"),l.a.createElement("option",{value:"Medium"},"Medium"),l.a.createElement("option",{value:"Low"},"Low"))),l.a.createElement("td",null,l.a.createElement(m.a.Control,{type:"date",name:"date",value:e.date.split("T")[0],onChange:e=>U("allergies",t,e)})),l.a.createElement("td",null,l.a.createElement(s.a,{variant:"outline-danger",onClick:()=>_("allergies",t)},l.a.createElement(N.a,{icon:I.h}))))))),l.a.createElement(s.a,{variant:"primary",onClick:()=>M("allergies")},"Add Allergy"),l.a.createElement("h4",null,"Conditions:"),l.a.createElement("table",{className:"table table-bordered"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Name"),l.a.createElement("th",null,"Code"),l.a.createElement("th",null,"System"),l.a.createElement("th",null,"Date"),l.a.createElement("th",null,"Actions"))),l.a.createElement("tbody",null,g.conditions.map((e,t)=>l.a.createElement("tr",{key:t},l.a.createElement("td",null,l.a.createElement(m.a.Control,{type:"text",name:"name",value:e.name,onChange:e=>U("conditions",t,e)})),l.a.createElement("td",null,l.a.createElement(m.a.Control,{type:"text",name:"code",value:e.code,onChange:e=>U("conditions",t,e)})),l.a.createElement("td",null,l.a.createElement(m.a.Control,{type:"text",name:"system",value:e.system,onChange:e=>U("conditions",t,e)})),l.a.createElement("td",null,l.a.createElement(m.a.Control,{type:"date",name:"date",value:e.date.split("T")[0],onChange:e=>U("conditions",t,e)})),l.a.createElement("td",null,l.a.createElement(s.a,{variant:"outline-danger",onClick:()=>_("conditions",t)},l.a.createElement(N.a,{icon:I.h}))))))),l.a.createElement(s.a,{variant:"primary",onClick:()=>M("conditions")},"Add Condition"),l.a.createElement("h4",null,"Observations:"),l.a.createElement("table",{className:"table table-bordered"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Name"),l.a.createElement("th",null,"Code"),l.a.createElement("th",null,"System"),l.a.createElement("th",null,"Date"),l.a.createElement("th",null,"Value"),l.a.createElement("th",null,"Actions"))),l.a.createElement("tbody",null,g.observations.map((e,t)=>l.a.createElement("tr",{key:t},l.a.createElement("td",null,l.a.createElement(m.a.Control,{type:"text",name:"name",value:e.name,onChange:e=>U("observations",t,e)})),l.a.createElement("td",null,l.a.createElement(m.a.Control,{type:"text",name:"code",value:e.code,onChange:e=>U("observations",t,e)})),l.a.createElement("td",null,l.a.createElement(m.a.Control,{type:"text",name:"system",value:e.system,onChange:e=>U("observations",t,e)})),l.a.createElement("td",null,l.a.createElement(m.a.Control,{type:"datetime-local",name:"date",value:R(e.date),onChange:e=>U("observations",t,e)})),l.a.createElement("td",null,l.a.createElement(m.a.Control,{type:"text",name:"value",value:e.value,onChange:e=>U("observations",t,e)})),l.a.createElement("td",null,l.a.createElement(s.a,{variant:"outline-danger",onClick:()=>_("observations",t)},l.a.createElement(N.a,{icon:I.h}))))))),l.a.createElement(s.a,{variant:"primary",onClick:()=>M("observations")},"Add Observation"),l.a.createElement("h4",null,"Immunizations:"),l.a.createElement("table",{className:"table table-bordered"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Name"),l.a.createElement("th",null,"System"),l.a.createElement("th",null,"Code"),l.a.createElement("th",null,"Date"),l.a.createElement("th",null,"Actions"))),l.a.createElement("tbody",null,g.immunizations.map((e,t)=>l.a.createElement("tr",{key:t},l.a.createElement("td",null,l.a.createElement(m.a.Control,{type:"text",name:"name",value:e.name,onChange:e=>U("immunizations",t,e)})),l.a.createElement("td",null,l.a.createElement(m.a.Control,{type:"text",name:"system",value:e.system,onChange:e=>U("immunizations",t,e)})),l.a.createElement("td",null,l.a.createElement(m.a.Control,{type:"text",name:"code",value:e.code,onChange:e=>U("immunizations",t,e)})),l.a.createElement("td",null,l.a.createElement(m.a.Control,{type:"datetime-local",name:"date",value:R(e.date),onChange:e=>U("immunizations",t,e)})),l.a.createElement("td",null,l.a.createElement(s.a,{variant:"outline-danger",onClick:()=>_("immunizations",t)},l.a.createElement(N.a,{icon:I.h}))))))),l.a.createElement(s.a,{variant:"primary",onClick:()=>M("immunizations")},"Add Immunization"))),l.a.createElement(f.a.Footer,null,l.a.createElement(s.a,{variant:"secondary",onClick:()=>h(!1)},"Cancel"),l.a.createElement(s.a,{variant:"primary",onClick:()=>{O(),E.a.put("/ips/"+t._id,g).then(e=>{r(e.data),h(!1)}).catch(e=>console.error("There was an error updating the IPS record!",e)).finally(()=>A())}},"Save Changes"))))}const B=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_API_BASE_URL?E.a.create({baseURL:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_API_BASE_URL}):E.a.create({});var k=function(){const[e,t]=Object(n.useState)(""),{selectedPatients:a,setSelectedPatients:r,setSelectedPatient:o}=Object(n.useContext)(C),{startLoading:i,stopLoading:c}=D(),u=e=>{i(),B.delete("/ips/"+e).then(e=>e.data).then(e=>{const t=[...a];let n=a.findIndex(t=>t._id===e);-1!==n&&(t.splice(n,1),r(t))}).catch(e=>{console.log("Error",e)}).finally(()=>{c()})},E=e=>{const t=a.map(t=>t._id===e._id?e:t);r(t),o(e)};return l.a.createElement("div",{className:"app"},l.a.createElement("div",{className:"container"},l.a.createElement(v,{add:e=>{const t=e.medication.filter(e=>""!==e.name.trim()||""!==e.date.trim()||""!==e.dosage.trim()),n=e.allergies.filter(e=>""!==e.name.trim()||""!==e.criticality.trim()||""!==e.date.trim()),l=e.conditions.filter(e=>""!==e.name.trim()||""!==e.date.trim()),m=e.observations.filter(e=>""!==e.name.trim()||""!==e.date.trim()||""!==e.value.trim()),s=e.immunizations.filter(e=>""!==e.name.trim()||""!==e.date.trim()),d={...e,medication:t,allergies:n,conditions:l,observations:m,immunizations:s};console.log("Form Data",d),console.log(JSON.stringify(d,null,2)),i(),B.post("/ips",d).then(e=>e.data).then(e=>{if(e){const t=[...a,e];r(t),o(e)}}).catch(e=>{console.log("Error",e)}).finally(()=>{c()})}}),l.a.createElement("h3",null,"Find Patient"),l.a.createElement(m.a,{onSubmit:t=>{t.preventDefault(),i(),B.get("/ips/search/"+e).then(e=>e.data).then(e=>{e&&(r(e),e.length>0&&o(e[0]))}).catch(e=>{console.log("Error",e)}).finally(()=>{c()})}},l.a.createElement(m.a.Group,{controlId:"searchTerm"},l.a.createElement(m.a.Label,null,"Patient Name"),l.a.createElement(m.a.Control,{type:"text",placeholder:"Enter patient name",value:e,onChange:e=>{t(e.target.value)}})),l.a.createElement(s.a,{variant:"primary",type:"submit",className:"mb-3"},"Search")),l.a.createElement("h3",null,"Matching Patients"),l.a.createElement("div",null,a.map(e=>l.a.createElement(d.a,{key:e._id,onClick:()=>o(e)},l.a.createElement(d.a.Body,null,l.a.createElement(T,{ips:e,remove:u,update:E})))))))},M=a(223),_=a(361),U=a(46),G=a(371);var J=function(){const{selectedPatients:e,selectedPatient:t,setSelectedPatient:a}=Object(n.useContext)(C),[r,o]=Object(n.useState)(""),[i,c]=Object(n.useState)("ipsurl"),[m,d]=Object(n.useState)(!1),[u,p]=Object(n.useState)(0),{startLoading:h,stopLoading:g}=D();Object(n.useEffect)(()=>{if(t){let e;if(e="ipsbeerwithdelim"===i?`/ipsbeer/${t._id}/pipe`:`/${i}/${t._id}`,"ipsurl"===i){const e=`${window.location.origin}/ips/${t.packageUUID}`;o(e),p(e.length),d(!1),g()}else E.a.get(e).then(e=>{let t;t="ipsminimal"===i||"ipsbeer"===i||"ipsbeerwithdelim"===i||"ipshl72x"===i?e.data:JSON.stringify(e.data);const a=(new TextEncoder).encode(t).length;p(a),console.log("Response data length:",a),a>3e3?d(!0):(o(t),console.log("QR Data:",t),d(!1))}).catch(e=>{console.error("Error fetching IPS record:",e)}).finally(()=>{g()})}},[t,i,g]);const v=Math.min(.8*window.innerWidth,.8*window.innerHeight,600);return l.a.createElement("div",{className:"app"},l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"header-container"},l.a.createElement("h3",null,"Generate QR Code ","ipsurl"!==i&&l.a.createElement("span",{className:"response-size"}," - ",u," bytes"))),e.length>0&&t&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"dropdown-container"},l.a.createElement(_.a,{id:"dropdown-record",title:`Patient: ${t.patient.given} ${t.patient.name}`,onSelect:t=>{const n=e.find(e=>e._id===t);h(),a(n)},className:"dropdown-button"},e.map(e=>l.a.createElement(U.a.Item,{key:e._id,eventKey:e._id,active:t&&t._id===e._id},e.patient.given," ",e.patient.name)))),l.a.createElement("div",{className:"dropdown-container"},l.a.createElement(_.a,{id:"dropdown-mode",title:"Mode: "+i,onSelect:e=>{h(),c(e)},className:"dropdown-button"},l.a.createElement(U.a.Item,{eventKey:"ipsurl"},"IPS URL"),l.a.createElement(U.a.Item,{eventKey:"ipsunified"},"IPS Unified JSON Bundle"),l.a.createElement(U.a.Item,{eventKey:"ips"},"IPS JSON Bundle"),l.a.createElement(U.a.Item,{eventKey:"ipsbasic"},"IPS Minimal"),l.a.createElement(U.a.Item,{eventKey:"ipsmongo"},"IPS MongoDB"),l.a.createElement(U.a.Item,{eventKey:"ipslegacy"},"IPS Legacy JSON Bundle"),l.a.createElement(U.a.Item,{eventKey:"ipsbeer"},"IPS BEER (newline)"),l.a.createElement(U.a.Item,{eventKey:"ipsbeerwithdelim"},"IPS BEER with Delimiter (pipe |)"),l.a.createElement(U.a.Item,{eventKey:"ipshl72x"},"IPS HL7 v2.3")))),m?l.a.createElement(G.a,{variant:"danger"},"Data is too large to display. Please try a different mode."):l.a.createElement("div",{className:"qr-container"},l.a.createElement(M.a,{id:"qr-canvas",value:r,size:v})),l.a.createElement("br",null),l.a.createElement("div",{className:"button-container"},l.a.createElement(s.a,{className:"mb-3",onClick:()=>{const e=document.getElementById("qr-canvas").toDataURL("image/png"),t=document.createElement("a");t.href=e,t.download="ips_qr_code.png",document.body.appendChild(t),t.click(),document.body.removeChild(t)}},"Download QR Code"))))};var F=function(){const[e,t]=Object(n.useState)(""),[a,r]=Object(n.useState)([]),[o,i]=Object(n.useState)(!1),[c,d]=Object(n.useState)(!1),{startLoading:u,stopLoading:p}=D(),h=e=>/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e);return l.a.createElement("div",{className:"app"},l.a.createElement("div",{className:"container"},l.a.createElement("h3",null,"Bulk Upload of DMICP Data for IPS"),l.a.createElement("div",{className:"text-area"},l.a.createElement(m.a.Control,{as:"textarea",rows:10,value:e,onChange:e=>{t(e.target.value)},placeholder:"Paste your DMICP data here...\r\n(This should be the CSV format created using the IPS SmartDoc)"})),l.a.createElement("br",null),l.a.createElement(s.a,{className:"mb-3",onClick:()=>{if(!e.trim())return;const t=e.split("\n").map(e=>{const t=e.split(",");if(10!==t.length)return console.error("Invalid number of fields:",t),null;const[a,n,l,r,o,i,c,...m]=t;if(!a||!n||!l||!r||!o||!i||!c)return console.error("Missing required fields:",t),null;if(!h(a))return console.error("Invalid UUID format for packageUUID:",a),null;if(!/^\d{4}-\d{2}-\d{2}$/.test(r))return console.error("Invalid date format for dob:",r),null;let s=o;const d={f:"Female",m:"Male",u:"Unknown",o:"Other"}[o.toLowerCase()];d&&(s=d);const u=(new Date).toISOString(),E=[];if(m[0]){const e=m[0].split(";");if(e.length%3!==0)return console.error("Invalid medication data:",m[0]),null;for(let t=0;t<e.length;t+=3){const[a,n,l]=e.slice(t,t+3);if(!a||!n||!l)return console.error("Missing medication field:",e.slice(t,t+3)),null;if(!/^\d{4}-\d{2}-\d{2}$/.test(n))return console.error("Invalid date format for medication date:",n),null;E.push({name:a,date:n,dosage:l})}}const p=[];if(m[1]){const e=m[1].split(";");if(e.length%3!==0)return console.error("Invalid allergies data:",m[1]),null;for(let t=0;t<e.length;t+=3){const[a,n,l]=e.slice(t,t+3);if(!a||!n||!l)return console.error("Missing allergy field:",e.slice(t,t+3)),null;if(!/^\d{4}-\d{2}-\d{2}$/.test(l))return console.error("Invalid date format for allergy date:",l),null;const r=a.trim();p.find(e=>e.name===r)||p.push({name:r,criticality:n,date:l})}}const g=[];if(m[2]){const e=m[2].split(";");if(e.length%2!==0)return console.error("Invalid conditions data:",m[2]),null;for(let t=0;t<e.length;t+=2){const[a,n]=e.slice(t,t+2);if(!a||!n)return console.error("Missing condition field:",e.slice(t,t+2)),null;if(!/^\d{4}-\d{2}-\d{2}$/.test(n))return console.error("Invalid date format for condition date:",n),null;const l=a.trim();g.find(e=>e.name===l)||g.push({name:l,date:n})}}return{packageUUID:a,timeStamp:u,patient:{name:n,given:l,dob:r,gender:s,nation:i,practitioner:c},medication:E,allergies:p,conditions:g}}).filter(e=>null!==e);console.log("IPS Records:",t),console.log(JSON.stringify(t,null,2)),0===t.length?d(!0):(r(t),i(!0))}},"Convert Pasted Data into IPS Records")),l.a.createElement(f.a,{show:c,onHide:()=>d(!1)},l.a.createElement(f.a.Header,{closeButton:!0},l.a.createElement(f.a.Title,null,"IPS Import Error")),l.a.createElement(f.a.Body,null,l.a.createElement("p",null,"No records passed validation. Please check your data and try again.")),l.a.createElement(f.a.Footer,null,l.a.createElement(s.a,{variant:"primary",onClick:()=>d(!1)},"Close"))),l.a.createElement(f.a,{show:o,onHide:()=>i(!1)},l.a.createElement(f.a.Header,{closeButton:!0},l.a.createElement(f.a.Title,null,"IPS Record Submission Confirmation")),l.a.createElement(f.a.Body,null,a.length>0&&l.a.createElement("p",null,a.length," records have passed validation. Do you want to submit?")),l.a.createElement(f.a.Footer,null,l.a.createElement(s.a,{variant:"secondary",onClick:()=>i(!1)},"Cancel"),l.a.createElement(s.a,{variant:"primary",onClick:()=>{i(!1),u(),E.a.post("/ipsmany",a).then(e=>{console.log("Data uploaded successfully:",e.data)}).catch(e=>{console.error("Error uploading data:",e)}).finally(()=>{p()}),t("")}},"Submit"))))},j=a(362);var V=function(){return l.a.createElement(j.a,{className:"mt-5"},l.a.createElement(S.a,null,l.a.createElement(P.a,null,l.a.createElement("h3",null,"About International Patient Summary (IPS)"),l.a.createElement("p",null,"The International Patient Summary (IPS) is a standardized health data format designed to facilitate the exchange of patient health information across different healthcare systems and countries. It aims to improve interoperability and enable seamless sharing of medical records, ensuring better patient care and safety."),l.a.createElement("p",null,"IPS contains essential health information such as patient demographics, medical history, medications, allergies, and more, in a structured and standardized format."))),l.a.createElement(S.a,{className:"mt-4"},l.a.createElement(P.a,null,l.a.createElement("h3",null,"Useful Links"),l.a.createElement(d.a,null,l.a.createElement(d.a.Body,null,l.a.createElement(d.a.Title,null,"IPS Implementation Guide"),l.a.createElement(d.a.Text,null,"Explore the IPS implementation guide for detailed information on data elements, standards, and implementation best practices."),l.a.createElement(d.a.Link,{href:"https://www.hl7.org/fhir/uv/ips/"},"IPS Implementation Guide"))),l.a.createElement(d.a,null,l.a.createElement(d.a.Body,null,l.a.createElement(d.a.Title,null,"IPS Website"),l.a.createElement(d.a.Text,null,"Visit the official website of the International Patient Summary (IPS) to learn more about the standard and its implementation."),l.a.createElement(d.a.Link,{href:"https://international-patient-summary.net"},"IPS Website"))))))},z=a(366),H=a(372),q=a(363);a(352);const $=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_API_BASE_URL?E.a.create({baseURL:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_API_BASE_URL}):E.a.create({});var K=function(e){let{collapseNavbar:t}=e;const[a,r]=Object(n.useState)(""),{setSelectedPatients:o,setSelectedPatient:i}=Object(n.useContext)(C),{startLoading:c,stopLoading:d}=D();return l.a.createElement(m.a,{inline:!0,onSubmit:e=>{e.preventDefault(),c(),$.get("/ips/search/"+a).then(e=>e.data).then(e=>{e&&(o(e),e.length>0&&(i(e[0]),t()))}).catch(e=>{console.log("Error",e)}).finally(()=>{d()})},className:"search-form"},l.a.createElement(m.a.Control,{type:"text",placeholder:"Find Patient",value:a,onChange:e=>{r(e.target.value)},className:"mr-sm-2 form-control"}),l.a.createElement(s.a,{variant:"outline-light",type:"submit"},"Search"))};var Q=function(){const{selectedPatients:e,setSelectedPatient:t,selectedPatient:a}=Object(n.useContext)(C),[r,o]=Object(n.useState)(!1),{startLoading:m}=D(),s=Object(c.m)();Object(n.useEffect)(()=>{e.length>0&&t(e[0])},[e,t]);const d=e=>{o(!1),e&&a&&m()},u=window.location.href.includes("d2s");return l.a.createElement(z.a,{expanded:r,expand:"lg",bg:"dark",variant:"dark",fixed:"top"},l.a.createElement(j.a,null,l.a.createElement(z.a.Brand,{as:i.b,to:"/",onClick:()=>d(!1)},l.a.createElement("img",{src:"/ipsnavbar.ico",width:"25",height:"25",className:"d-inline-block align-center",alt:"IPS Logo",style:{marginRight:"10px"}}),"IPS SERN",u?l.a.createElement(l.a.Fragment,null," "," D2S "," "):l.a.createElement(l.a.Fragment,null," "," Local "," "),"0_52"),l.a.createElement(z.a.Toggle,{"aria-controls":"basic-navbar-nav",onClick:()=>o(!r)}),l.a.createElement(z.a.Collapse,{id:"basic-navbar-nav"},l.a.createElement(H.a,{className:"me-auto"},l.a.createElement(H.a.Link,{as:i.b,to:"/api",onClick:()=>d(!0)},l.a.createElement(N.a,{icon:I.f})," API"),l.a.createElement(H.a.Link,{as:i.b,to:"/qr",onClick:()=>d(!0)},l.a.createElement(N.a,{icon:I.g})," QR"),l.a.createElement(H.a.Link,{as:i.b,to:"/bulkupload",onClick:()=>d(!1)},l.a.createElement(N.a,{icon:I.i})," DMICP"),l.a.createElement(H.a.Link,{as:i.b,to:"/beergarden",onClick:()=>d(!0)},l.a.createElement(N.a,{icon:I.a})," BEER"),l.a.createElement(q.a,{title:l.a.createElement("span",null,l.a.createElement(N.a,{icon:I.b})," External API"),id:"basic-nav-dropdown"},l.a.createElement(q.a.Item,{as:i.b,to:"/fetchips",onClick:()=>d(!1)},l.a.createElement(N.a,{icon:I.i})," External GET"),l.a.createElement(q.a.Item,{as:i.b,to:"/puships",onClick:()=>d(!0)},l.a.createElement(N.a,{icon:I.c})," External POST")),l.a.createElement(q.a,{title:"Info",id:"basic-nav-dropdown"},l.a.createElement(q.a.Item,{as:i.b,to:"/about",onClick:()=>d(!1)},"About IPS"),l.a.createElement(q.a.Item,{as:i.b,to:"/aboutwebapp",onClick:()=>d(!1)},"About Web App"),l.a.createElement(q.a.Divider,null),l.a.createElement(q.a.Item,{as:i.b,to:"/changelog",onClick:()=>d(!1)},"Change Log"),l.a.createElement(q.a.Divider,null),l.a.createElement(q.a.Item,{as:i.b,to:"/apidocumentation",onClick:()=>d(!1)},"API Documentation"))),e.length>0&&l.a.createElement(H.a,null,l.a.createElement(q.a,{title:a?`${a.patient.given} ${a.patient.name}`:"Selected Patients",id:"selected-patients-dropdown"},e.map(e=>l.a.createElement(q.a.Item,{key:e._id,onClick:()=>(e=>{t(e),o(!1);const a=s.pathname;["/api","/qr","/beergarden","/offroadpost"].includes(a)&&m()})(e)},e.patient.given," ",e.patient.name)))),l.a.createElement(K,{collapseNavbar:()=>{o(!1)}}))))};var X=function(){return l.a.createElement(j.a,{className:"mt-5"},l.a.createElement(S.a,null,l.a.createElement(P.a,null,l.a.createElement("h3",null,"ChangeLog - Versions refer to Cloud Deployments"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("h5",null,"Version 0_1 (Initial Release) - 2nd May 2024"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("strong",null,"Implemented basic functionality for the MERN web app.")),l.a.createElement("li",null,"Single page with data entry and previous data display"),l.a.createElement("li",null,"Previous data display has simple delete button"),l.a.createElement("li",null,"Only API GET call is /ips/all which displays all records"))),l.a.createElement("li",null,l.a.createElement("h5",null,"Version 0_2 - 3rd May 2024"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("strong",null,"Improved data presentation, delete confirm and IPS API additions")),l.a.createElement("li",null,"Data presented in compact form with expand mechanism"),l.a.createElement("li",null,"Delete button now has confirmation prompt - to avoid accidental deletion"),l.a.createElement("li",null,"Added API GET calls for /ips/:id (IPS Bundle - JSON) and /ipsraw/:id (MongoDb Native format - JSON)"))),l.a.createElement("li",null,l.a.createElement("h5",null,"Version 0_3 - 4th May 2024"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("strong",null,"Implemented QR Generator, (non-functional) Data Upload page and Navigation.")),l.a.createElement("li",null,"QR code Generation of IPS Bundle and MongoDb record format."),l.a.createElement("li",null,"Data Upload page just a stub for later development"),l.a.createElement("li",null,"Navigation Bar added for easy access to all pages"))),l.a.createElement("li",null,l.a.createElement("h5",null,"Version 0_4 - 4th May 2024"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("strong",null,"Per-record QR Button, new data format for both API and QR Generator")),l.a.createElement("li",null,"QR Button added to previous record display to jump to QR Generator Page for that record"),l.a.createElement("li",null,"Minimised IPS data format - Plain Text. Same format as generated by SmartDoc (DMICP) and read by FUB-QR (SmartPhone App)"),l.a.createElement("li",null,"QR Generator now uses the new format as additional option -checked is indeed readable by FUB-QR"),l.a.createElement("li",null,"API GET call for minimised format is /ipsbasic/:id"))),l.a.createElement("li",null,l.a.createElement("h5",null,"Version 0_5 - 4th May 2024"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("strong",null,"Better Navigation format and QR URL for Patient")),l.a.createElement("li",null,"QR Generator includes new mode representing - in Plain Text - the API endpoint for the IPS Bundle"),l.a.createElement("li",null,"Concept would be to download QR image and give/send patient"))),l.a.createElement("li",null,l.a.createElement("h5",null,"Version 0_6 - 5th May 2024"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("strong",null,"Added About IPS and ChangeLog page, Hide data entry form")),l.a.createElement("li",null,"About IPS page to give brief context - non-sensitive"),l.a.createElement("li",null,"ChangeLog page to track project updates and improvements."),l.a.createElement("li",null,"Hide data entry form button to allow more space for data display"),l.a.createElement("li",null,"Added additional data validation before submission"))),l.a.createElement("li",null,l.a.createElement("h5",null,"Version 0_7 - 6th May 2024"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("strong",null,"Added real functionality to Bulk Upload page")),l.a.createElement("li",null,"Bulk Upload page to allow pasting of multiple records for conversion"),l.a.createElement("li",null,"Format expected is that generated by accompanying DMICP SmartDoc"),l.a.createElement("li",null,"Main fields are comma separated, medication and allergies are then semicolon separated"),l.a.createElement("li",null,"Validation of data and confirmation before submission"),l.a.createElement("li",null,"Process allows valid records to be submitted whilst skipping invalid ones"))),l.a.createElement("li",null,l.a.createElement("h5",null,"Version 0_8 - 6th May 2024"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("strong",null,"Added UUID validator for Bulk Upload")),l.a.createElement("li",null,"UUID validator is basic regex - so not true validator - but will suffice for now"),l.a.createElement("li",null,"SmartDoc will generate valid UUIDs by default, so validator just to avoid incorrect manual efforts"),l.a.createElement("li",null,"Separate message if no supplied records pass validation"))),l.a.createElement("li",null,l.a.createElement("h5",null,"Version 0_9 - 6th May 2024"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("strong",null,"Logo and Navbar Changes")),l.a.createElement("li",null,"Added new logo to replace stock React App one"),l.a.createElement("li",null,"Navbar is now fixed at top"))),l.a.createElement("li",null,l.a.createElement("h5",null,"Version 0_10 - 8th May 2024"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("strong",null,"QR Code Size Check")),l.a.createElement("li",null,"QR Code data size check - and user feedback - to avoid display errors"),l.a.createElement("li",null,"Threshold set to 3000 but most codes at this size unreadable except on most recent SmartPhones"))),l.a.createElement("li",null,l.a.createElement("h5",null,"Version 0_11 - 9th May 2024"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("strong",null,"New XML Format and IPS JSON Format change")),l.a.createElement("li",null,"IPS Bundle format now compatible with the ",l.a.createElement("a",{href:"https://ipsviewer.com",target:"_blank",rel:"noopener noreferrer"},"IPS Viewer")),l.a.createElement("li",null,"This is closer to the IPS.net ",l.a.createElement("a",{href:"https://github.com/jddamore/IPSviewer/tree/main/samples",target:"_blank",rel:"noopener noreferrer"},"samples and examples")),l.a.createElement("li",null,"In particular it leads with a Composition resource"),l.a.createElement("li",null,"XML format added to API - modelled on JSON format"),l.a.createElement("li",null,"API GET is /ipsxml/:id"))),l.a.createElement("li",null,l.a.createElement("h5",null,"Version 0_12 - 9th May 2024"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("strong",null,"Added API GET Data Viewer")),l.a.createElement("li",null,"Allows more convient viewing of data formats returned by the various API GET endpoints"),l.a.createElement("li",null,"API Button added to individual records on HomePage as quick link"))),l.a.createElement("li",null,l.a.createElement("h5",null,"Version 0_13 - 10th May 2024"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("strong",null,"Legacy IPS JSON and Screen Realestate")),l.a.createElement("li",null,"Added IPS Legacy format to API endpoints and API Page - based on version 2 of bundle"),l.a.createElement("li",null,"For illustration purposes only - as comparison to 'regular' version."),l.a.createElement("li",null,"API GET is /ipslegacy/:id"),l.a.createElement("li",null,"Various Screen realestate improvements for QR and API pages"))),l.a.createElement("li",null,l.a.createElement("h5",null,"Version 0_14 - 11th May 2024"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("strong",null,"Cosmetic changes and hyperlinks")),l.a.createElement("li",null,"Links in various places to aide testing"))),l.a.createElement("li",null,l.a.createElement("h5",null,"Version 0_15 - 17th May 2024"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("strong",null,"Added API GET and POST")),l.a.createElement("li",null,"API GET allows the return of an IPS Bundle using the endpoint /ipsbyname/:name/:given"),l.a.createElement("li",null,"API POST allows the creation of a new entry in the database from an IPS JSON Bundle"))),l.a.createElement("li",null,l.a.createElement("h5",null,"Version 0_16 - 18th May 2024"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("strong",null,"Added Gender and Conditions")),l.a.createElement("li",null,"Large update as entire schema changed"),l.a.createElement("li",null,"All input, import, export and generation code changed"),l.a.createElement("li",null,"Old entries against previous schema no longer valid as two fields have changed name"),l.a.createElement("li",null,"nationality to nation, and severity to criticality"),l.a.createElement("li",null,"Old database will be deleted"))),l.a.createElement("li",null,l.a.createElement("h5",null,"Version 0_17 - 19th May 2024"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("strong",null,"Replaced 'Display All' with Search Functionality")),l.a.createElement("li",null,"Search for IPS records based on patient's name"),l.a.createElement("li",null,"API GET call is /ips/search/:name"))),l.a.createElement("li",null,l.a.createElement("h5",null,"Version 0_18 - 19th May 2024"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("strong",null,"Patient Selection Preservation")),l.a.createElement("li",null,"Selected patients are preserved across the App"),l.a.createElement("li",null,"At least one patient needs to be selected to display anything on QR and API pages"),l.a.createElement("li",null,"'Select Records' dropdown is now confined to only those records returned by search"))),l.a.createElement("li",null,l.a.createElement("h5",null,"Version 0_19 - 19th May 2024"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("strong",null,"Optional :id endpoints")),l.a.createElement("li",null,"API GET endpoints that use /:id will now accept both MongoDB internal _id and IPS id (packageUUID)"),l.a.createElement("li",null,"Improvements to 'Active' Patient functionality throughout app"))),l.a.createElement("li",null,l.a.createElement("h5",null,"Version 0_20 - 22nd May 2024"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("strong",null,"Added VitalsIQ API Page")),l.a.createElement("li",null,"Page to allow direct access to the VitalsIQ API"),l.a.createElement("li",null,"API is at https://4202xiwc.offroadapps.dev:62444/Fhir/ips/json/surname/firstname"))),l.a.createElement("li",null,l.a.createElement("h5",null,"Version 0_21 - 23rd May 2024"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("strong",null,"API Comms Client-to-Server")),l.a.createElement("li",null,"Axios GET code moved to server-side to avoid BPS issues"),l.a.createElement("li",null,"API GET used internally - but could be used extenally - is /fetchipsora/surname/firstname"))),l.a.createElement("li",null,l.a.createElement("h5",null,"Version 0_22- 23rd May 2024"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("strong",null,"Record Creation from ORA IPS Bundle")),l.a.createElement("li",null,"Can now convert an VitalsIQ IPS Bundle to a MongoDb Record"),l.a.createElement("li",null,"Made the Condition Date optional - defaults to today's date - to facilate testing"))),l.a.createElement("li",null,l.a.createElement("h5",null,"Version 0_23- 23rd May 2024"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("strong",null,"Added API POST to ORA")),l.a.createElement("li",null,"API POST allows the sending IPS JSON Bundle to VitalsIQ WebApp"),l.a.createElement("li",null,"Internal API endpoint is /pushipsora"),l.a.createElement("li",null,"External API endpoint is at https://4202xiwc.offroadapps.dev:62444/Fhir/ips/json"))),l.a.createElement("li",null,l.a.createElement("h5",null,"Version 0_24 - 26th May 2024"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("strong",null,"Added API GET for BEER")),l.a.createElement("li",null,"API GET allows the return of an IPS Bundle with the BEER data format using the endpoint /ipsbeer/:id"),l.a.createElement("li",null,"Note: At this point BEER format is under development - so this represents an initial attempt"),l.a.createElement("li",null,"API and QR Page include BEER modes"),l.a.createElement("li",null,"QR Page displays the QR size in bites"))),l.a.createElement("li",null,l.a.createElement("h5",null,"Version 0_25 - 27th May 2024"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("strong",null,"Added BEER Garden Page")),l.a.createElement("li",null,"Page to allow conversion between MongoDb and BEER formats"),l.a.createElement("li",null,"BEER format is under development - so this represents an initial attempt"))),l.a.createElement("li",null,l.a.createElement("h5",null,"Version 0_26 - 27th May 2024"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("strong",null,"Added NavBar Search")),l.a.createElement("li",null,"Search for IPS records based on patient's family/surname"),l.a.createElement("li",null,"Removed HomePage from NavBar - as same functionality available from clicking on IPS Main Title and Logo"),l.a.createElement("li",null,"Creates more space for other NavBar items"))),l.a.createElement("li",null,l.a.createElement("h5",null,"Version 0_27 - 28th May 2024"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("strong",null,"Added Edit Functionality")),l.a.createElement("li",null,"Allows editing of existing IPS records"),l.a.createElement("li",null,"Added Edit button to individual records on HomePage"))),l.a.createElement("li",null,l.a.createElement("h5",null,"Version 0_28 - 29th May 2024"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("strong",null,"Added Spinner")),l.a.createElement("li",null,"Added Spinner to indicate loading for asynchronous functions"),l.a.createElement("li",null,"Spinner appears for any action that relies on fetching or posting data"),l.a.createElement("li",null,"Whether using the internal or external API"))),l.a.createElement("li",null,l.a.createElement("h5",null,"Version 0_29 - 30th May 2024"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("strong",null,"Added Observation Resource")),l.a.createElement("li",null,"Added Observation resource to IPS Bundle"),l.a.createElement("li",null,"Observation resource includes a code, value, and date"),l.a.createElement("li",null,"If value start numerical then valueQuantity, if just text then bodySite, if blank then simple ob e.g. symptom"))),l.a.createElement("li",null,l.a.createElement("h5",null,"Version 0_30 - 1st Jun 2024"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("strong",null,"Added TimeStamp")),l.a.createElement("li",null,"Added fixed TimeStamp - previously generated with IPS bundle"),l.a.createElement("li",null,"Closer to IPS concept and aides BEER format development - items can be added post-timestamp"),l.a.createElement("li",null,"Generated whether by manual addition or Data Upload."),l.a.createElement("li",null,"If API GET used then the TimeStamp is the that provided by the IPS JSON bundle fetched"))),l.a.createElement("li",null,l.a.createElement("h5",null,"Version 0_31 - 1st Jun 2024"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("strong",null,"Added Observation and Allergy Dropdowns")),l.a.createElement("li",null,"Observation dropdown for key vital signs - temperature, blood pressure, pulse, respiration etc"),l.a.createElement("li",null,"Allergy dropdown for criticality - low, medium, high"))),l.a.createElement("li",null,l.a.createElement("h5",null,"Version 0_32 - 3rd Jun 2024"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("strong",null,"Further BEER Format Development")),l.a.createElement("li",null,"Medication and Observations formatted differently depending on whether past or future relative to timestamp"),l.a.createElement("li",null,"Vital Sign observations in particular have a highly compact form"),l.a.createElement("li",null,"Design varies slightly from earlier concept but basic ideas remain"))),l.a.createElement("li",null,l.a.createElement("h5",null,"Version 0_33 - 6th June 2024"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("strong",null,"Added BEER - IPS JSON Conversion in BEER Garden")),l.a.createElement("li",null,"Manually edited BEER data can be converted to IPS JSON format or Native MongoDB"),l.a.createElement("li",null,"IPS JSON (converted internally from MongoDb) or manually edited - can be converted to BEER format"),l.a.createElement("li",null,"Byte size displayed for both formats"),l.a.createElement("li",null,"Neither option affects the stored record - just for display purposes"))),l.a.createElement("li",null,l.a.createElement("h5",null,"Version 0_34 - 9th June 2024"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("strong",null,"Added New Update/Edit Endpoint")),l.a.createElement("li",null,"Added new endpoint to allow updating of existing IPS records using UUID"),l.a.createElement("li",null,"API PUT call is /ipsuuid/:id"),l.a.createElement("li",null,"This means an external system that has POST/created a record - perhaps before patient id known - can then update it later"),l.a.createElement("li",null,"Changes to unique Patient data - e.g. name - are treated as edits, Medication, Allergies, Conditions and Observations are added to the record"))),l.a.createElement("li",null,l.a.createElement("h5",null,"Version 0_35 - 12th June 2024"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("strong",null,"Added API Documentation Page")),l.a.createElement("li",null,"Page to allow easy access to all API endpoints and their descriptions"),l.a.createElement("li",null,"API Documentation Page is accessible from the NavBar"),l.a.createElement("li",null,"/ipsbyname is now case-insensitive"))),l.a.createElement("li",null,l.a.createElement("h5",null,"Version 0_36 - 12th June 2024"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("strong",null,"Organization added")),l.a.createElement("li",null,"Organization field added to MongoDB record"),l.a.createElement("li",null,"Previously was not being read and was being automatically set in exports/conversions to 'UK DMS'"))),l.a.createElement("li",null,l.a.createElement("h5",null,"Version 0_37 - 13th June 2024"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("strong",null,"Added API POST to NLD")),l.a.createElement("li",null,"API POST allows the sending IPS JSON Bundle to NLD WebApp"),l.a.createElement("li",null,"Internal API endpoint is /pushipsnld"),l.a.createElement("li",null,"External API endpoint is at https://medicalcloud.orange-synapse.nl/api/fhir/1"))),l.a.createElement("li",null,l.a.createElement("h5",null,"Version 0_38 - 13th June 2024"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("strong",null,"IPS BEER Parsing Delimiter Improvements")),l.a.createElement("li",null,"IPS BEER format can use various delimiters - newline, semicolon, pipe, colon, and @"),l.a.createElement("li",null,"If no delimiter is specified then all are tried before failing"))),l.a.createElement("li",null,l.a.createElement("h5",null,"Version 0_39 - 14th June 2024"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("strong",null,"Added CDA Functionality")),l.a.createElement("li",null,"API POST to create MongoDb record from CDA XML - endpoint is /ipsfromcda"),l.a.createElement("li",null,"API POST to convert CDA XML to IPS JSON Bundle - endpoint is /convertcdatoips - service only, no record is created"),l.a.createElement("li",null,"API POST to convert CDS XML to BEER format - endpoint is /convertcdatobeer - service only, no record is created"))),l.a.createElement("li",null,l.a.createElement("h5",null,"Version 0_40 - 15th June 2024"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("strong",null,"Added API Calls for IPS HL7 v2.8")),l.a.createElement("li",null,"API GET allows the return of an IPS Bundle with the HL7 v2.8 data format using the endpoint /ipshl728/:id"),l.a.createElement("li",null,"API POST allows conversion of MongoDb record to HL7 v2.8 format - endpoint is /convertmongo2hl7"),l.a.createElement("li",null,"Further endpoints for HL7 v2.8 are planned - note: there are likely formatting errors in the current implementation"),l.a.createElement("li",null,"The idea is give an approximate HL7 v2.8 format - not a perfect one - to judge likely file size and content"))),l.a.createElement("li",null,l.a.createElement("h5",null,"Version 0_41 - 14th July 2024"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("strong",null,"MERN to SERN")),l.a.createElement("li",null,"Database element of stack changed from MongoDB to SQL (MySQL) - to faciltate deployment on D2S OpenShift"),l.a.createElement("li",null,"For simplicity and speed of development, the SQL is converted to and from MongoDB format on retreiving and storing"),l.a.createElement("li",null,"This allows most of the existing code to remain unchanged"),l.a.createElement("li",null,"This also allows the API calls to remain the same - both payloads and responses"))),l.a.createElement("li",null,l.a.createElement("h5",null,"Version 0_42 - 6th Aug 2024"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("strong",null,"Australian IPS Format")),l.a.createElement("li",null,"Ability to successfully POST /ipsbundle from IPS JSON Bundle generated by Australian Team"),l.a.createElement("li",null,"Note, interesting use of Medication resource embedded in MedicationRequest resource"),l.a.createElement("li",null,"Format passes IPSViewer checks"))),l.a.createElement("li",null,l.a.createElement("h5",null,"Version 0_43 - 1st September 2024"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("strong",null,"Added Immunization Resource")),l.a.createElement("li",null,"Integrated Immunization resource into the backend and frontend systems"),l.a.createElement("li",null,"Immunization resource includes a date, name, and system"),l.a.createElement("li",null,"Name can be either a textual entry or a code, with the system indicating the coding system used (e.g., SNOMED, WHO ATC) or a reference url"),l.a.createElement("li",null,"All conversions updated including 'from CDA', 'to HL7 2.8' and 'to and from BEER'"),l.a.createElement("li",null,"Note: HL7 2.8 message validation may show errors due to lack of data, but the data provided is in the correct positions. Please visit ",l.a.createElement("a",{href:"https://www.parsehog.com/hl7/parser",target:"_blank",rel:"noopener noreferrer"},"Parsehog HL7 Parser")," to validate and check the message structure yourself."))),l.a.createElement("li",null,l.a.createElement("h5",null,"Version 0_44 - 3rd September 2024"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("strong",null,"Added PDF Generation Feature")),l.a.createElement("li",null,"Implemented a new PDF generation function that allows patient reports to be viewed and downloaded as PDF documents"),l.a.createElement("li",null,"The PDF document is formatted to fit within A4 page dimensions, with automatic text wrapping to ensure readability"),l.a.createElement("li",null,"Patient data, including Medications, Allergies, Conditions, Observations, and Immunizations, are included in the PDF report"),l.a.createElement("li",null,"PDF opens in a new tab with a dynamic filename based on the patient's name, allowing for easy download and identification"))),l.a.createElement("li",null,l.a.createElement("h5",null,"Version 0_45 - 13th November 2024"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("strong",null,"HL7 2.8 Conversion Functionality")),l.a.createElement("li",null,"Added endpoints for chaining HL7 2.8 to MongoDB, then MongoDB to IPS JSON"),l.a.createElement("li",null,"Extended API documentation with complete list of available endpoints for CRUD operations, conversions, and integrations with external systems"),l.a.createElement("li",null,"API documentation pages updated to reflect latest changes"))),l.a.createElement("li",null,l.a.createElement("h5",null,"Version 0_46 - 26th November 2024"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("strong",null,"Gzip Compression Support")),l.a.createElement("li",null,"Introduced middleware to handle gzip-encoded requests and responses"),l.a.createElement("li",null,"API now supports gzip encoding for both incoming and outgoing data, optimizing bandwidth usage"),l.a.createElement("li",null,"Enhanced compatibility with external clients by allowing Content-Encoding and Accept-Encoding headers for gzip"),l.a.createElement("li",null,"Added safeguards to bypass compression for internal calls, ensuring seamless frontend-backend communication"))),l.a.createElement("li",null,l.a.createElement("h5",null,"Version 0_47 - 30th November 2024"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("strong",null,"Encryption Support with AES-256")),l.a.createElement("li",null,"Added middleware to handle AES-256 encrypted requests and responses"),l.a.createElement("li",null,"API now supports encrypted communication via `x-encrypted` and `accept-encryption` headers, ensuring secure data transfer"),l.a.createElement("li",null,"Implemented seamless integration of gzip compression and AES-256 encryption, allowing data to be compressed before encryption"),l.a.createElement("li",null,"Introduced a `/test` endpoint to facilitate testing of combined encryption and compression functionality"),l.a.createElement("li",null,"Enhanced logging and error handling to aid debugging and ensure robustness during data transformations"))),l.a.createElement("li",null,l.a.createElement("h5",null,"Version 0_48 - 1st December 2024"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("strong",null,"Encryption Support with AES-256 base64")),l.a.createElement("li",null,"Introduced support for Base64-encoded encryption via ",l.a.createElement("code",null,"content-encoding: base64")," and ",l.a.createElement("code",null,"accept-encoding: base64")," headers"))),l.a.createElement("li",null,l.a.createElement("h5",null,"Version 0_49 - 5th December 2024"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("strong",null,"Enhanced ID Handling and Compression/Encryption Preview")),l.a.createElement("li",null,"Implemented logic to seamlessly handle IPS records with non-UUID identifiers"),l.a.createElement("li",null,"All API endpoints now support retrieving records using non-UUID identifiers, resolving issues where such records could not be accessed after creation via API calls using those identifiers"),l.a.createElement("li",null,"New checkbox feature on API Page allows users to toggle encryption and compression for API responses"),l.a.createElement("li",null,"The existing file size display can then be used for comparisons"),l.a.createElement("li",null,"Likewise, the download feature can then be used for the compressed/encrypted versions"))),l.a.createElement("li",null,l.a.createElement("h5",null,"Version 0_50 - 10th Feburary 2025"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("strong",null,"Added Unified Schema Changes")),l.a.createElement("li",null,"API GET allows the return of an IPS Bundle with the unified schema using the endpoint /ipsunified/:id"),l.a.createElement("li",null,"Common Code System changes added - system + code - for all clinical resources"),l.a.createElement("li",null,"HL7 2.x is now 2.3 and not 2.8 but only difference is minor change to MSH segment"),l.a.createElement("li",null,"IPS FHiR Bundle to Schema conversion still accepts all variations so far used"),l.a.createElement("li",null,"UI changes made to better accomodate increased number of fields per resource"),l.a.createElement("li",null,l.a.createElement("strong",null,"Generic External GET and POST Pages")),l.a.createElement("li",null,"Added target drop-down for external endpoint selection (VitalsIQ, NLD, IPS SERN) and allowed manual endpoint editing"),l.a.createElement("li",null,"Implemented data format selection options: IPS Unified, IPS Prev JSON, and IPS Legacy"),l.a.createElement("li",null,"Introduced a HL7 wrapper toggle to optionally wrap fetched IPS data"),l.a.createElement("li",null,"Modified GET page to dynamically construct API calls based on selected data format and endpoint"),l.a.createElement("li",null,"Updated UI to conditionally render section headers (e.g. Medications, Allergies, Conditions, Observations, Immunizations) only when data is present"))),l.a.createElement("li",null,l.a.createElement("h5",null,"Version 0_51 - 15th February 2025"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("strong",null,"New HL7 2.x Format with Common Code System (CCS)")),l.a.createElement("li",null,"Added CCS elements to HL7 2.x format - both extraction and creation"),l.a.createElement("li",null,"Note: This will no longer be compatible with previous implementation"),l.a.createElement("li",null,"Added CCS element extraction from CDA XML format"))),l.a.createElement("li",null,l.a.createElement("h5",null,"Version 0_52 - 17th February 2025"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("strong",null,"FHiR XML to FHiR JSON Conversion Added")),l.a.createElement("li",null,"Developed a specialized conversion function that handles the nuances of FHiR XML (including capitalization, array enforcement, and HTML reassembly) to produce proper IPS JSON. (There is also a more generic version for other uses for not sufficient for FHiR)"),l.a.createElement("li",null,l.a.createElement("strong",null,"Expanded IPS Bundle Parser")),l.a.createElement("li",null,"Updated the IPS Bundle parser to accept additional XML formats and variations present in the 'SF' samples (e.g. MedicationAdministration resources used for the medication element)."),l.a.createElement("li",null,l.a.createElement("strong",null,"XML Support for IPS Bundle Endpoints")),l.a.createElement("li",null,"Endpoints that previously accepted only FHiR JSON now seamlessly process FHiR XML data without requiring special headers. That includes if the data has first been encrypted and/or compressed."),l.a.createElement("li",null,l.a.createElement("strong",null,"Enhanced /test Endpoint Functionality")),l.a.createElement("li",null,"The /test endpoint now supports decryption/encryption and compression/decompression of XML, returning the raw XML as plain text.")))))))};var W=function(){const e=window.location.href.includes("d2s");return l.a.createElement(j.a,{className:"mt-5"},l.a.createElement(S.a,null,l.a.createElement(P.a,null,l.a.createElement("h2",null,"About This Web Application"),l.a.createElement("p",null,"Built using the ",l.a.createElement("a",{href:"https://medium.com/@ksekwamote/how-to-build-a-sern-application-dc358b48defe",target:"_blank",rel:"noopener noreferrer"},"SERN Stack"),". SERN stands for SQL, Express.js, React, and Node.js."))),l.a.createElement(S.a,{className:"mt-4"},l.a.createElement(P.a,null,l.a.createElement("h3",null,"Development Pipeline"),l.a.createElement(d.a,null,l.a.createElement(d.a.Body,null,l.a.createElement(d.a.Text,null,"The development pipeline involves the following steps:",l.a.createElement("ol",null,l.a.createElement("li",null,"Development Environment Until 0_18: Linux ubuntu-like distribution (",l.a.createElement("a",{href:"https://www.bodhilinux.com",target:"_blank",rel:"noopener noreferrer"},"Bodhi"),") running on a virtual machine (VM)."),l.a.createElement("li",null,"Development Environment 0_19 and Beyond: Docker - Node 22 Bookworm"),l.a.createElement("li",null,"Version Control: ",l.a.createElement("a",{href:"https://github.com/MikeForde/mern-azure",target:"_blank",rel:"noopener noreferrer"},"GitHub"),"."),l.a.createElement("li",null,"Continuous Deployment: GitHub Actions, which automates the deployment process to a cloud instance whenever changes are pushed to the ",l.a.createElement("a",{href:"https://github.com/MikeForde/mern-azure",target:"_blank",rel:"noopener noreferrer"},"GitHub Repository"),"."))))))),l.a.createElement(S.a,{className:"mt-4"},l.a.createElement(P.a,null,l.a.createElement("h3",null,"Hosting Options"),l.a.createElement(d.a,null,l.a.createElement(d.a.Body,null,l.a.createElement(d.a.Text,null,e?l.a.createElement(l.a.Fragment,null,"This web application is currently being hosted on a cloud service.",l.a.createElement("br",null),"It can be hosted easily on a closed network, and stood-up via standalone Linux, virtual machine (VM), or a container e.g. Docker."):l.a.createElement(l.a.Fragment,null,"This web application is currently being hosted on a closed network.",l.a.createElement("br",null),"It can be hosted easily on a cloud service, for example OpenShift (incl. D2S), Microsoft Azure etc.")))))),l.a.createElement(S.a,{className:"mt-4"},l.a.createElement(P.a,null,l.a.createElement("h3",null,"Future Development and Experimentation"),l.a.createElement(d.a,null,l.a.createElement(d.a.Body,null,l.a.createElement(d.a.Text,null,"Many features of this prototype web application are designed for demonstration and experimentation. Certain aspects would therefore either not be included or implemented in the same manner in a production-ready version. Feedback and ideas are always welcome."))))))};var Y=function(){const{selectedPatients:e,selectedPatient:t,setSelectedPatient:a}=Object(n.useContext)(C),{startLoading:r,stopLoading:o}=D(),[i,c]=Object(n.useState)(""),[d,u]=Object(n.useState)("ipsunified"),[p,h]=Object(n.useState)("IPS Unified JSON Bundle - /ipsunified/:id"),[g,v]=Object(n.useState)(!1),[b,y]=Object(n.useState)(0),[f,S]=Object(n.useState)(!1),[P,I]=Object(n.useState)(!1);Object(n.useEffect)(()=>{if(t){(async()=>{let e;e="ipsbeerwithdelim"===d?`/ipsbeer/${t._id}/pipe`:`/${d}/${t._id}`,console.log("Fetching data from:",e);try{const t={};f&&(t["Accept-Extra"]="insomzip, base64",t["Accept-Encryption"]="aes256",P&&(t["Accept-Extra"]="insomzip, base64, includeKey"));const a=await E.a.get(e,{headers:t});let n;f?(y(JSON.stringify(a.data).length),n=JSON.stringify(a.data,null,2)):"ipsbasic"===d||"ipsbeer"===d||"ipsbeerwithdelim"===d||"ipshl72x"===d?(n=a.data,y(n.length)):"ipsxml"===d?(n=N(a.data),y(n.length)):(y(JSON.stringify(a.data).length),n=JSON.stringify(a.data,null,2)),c(n),console.log("Data:",n),v(!1)}catch(a){console.error("Error fetching IPS record:",a)}finally{o()}})()}},[t,d,f,o,r,P]);const N=e=>e.replace(/></g,">\n<");return l.a.createElement("div",{className:"app"},l.a.createElement("div",{className:"container"},l.a.createElement("h3",null,"API GET - IPS Data: ",b,l.a.createElement("div",{className:"noteFont"},"- /:id can be the IPS id (the main UUID) or the internal MongoDB _id")),e.length>0&&t&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"dropdown-container"},l.a.createElement(_.a,{id:"dropdown-record",title:`Patient: ${t.patient.given} ${t.patient.name}`,onSelect:t=>{const n=e.find(e=>e._id===t);r(),a(n)},className:"dropdown-button"},e.map(e=>l.a.createElement(U.a.Item,{key:e._id,eventKey:e._id,active:t&&t._id===e._id},e.patient.given," ",e.patient.name)))),l.a.createElement("div",{className:"dropdown-container"},l.a.createElement(_.a,{id:"dropdown-mode",title:"API: "+p,onSelect:e=>{switch(r(),u(e),e){case"ips":h("IPS Prev JSON Bundle - /ips/:id or /ipsbyname/:name/:given");break;case"ipsxml":h("IPS Prev XML Bundle - /ipsxml/:id");break;case"ipslegacy":h("IPS Legacy JSON Bundle - /ipslegacy/:id");break;case"ipsunified":h("IPS Unified JSON Bundle - /ipsunified/:id");break;case"ipsmongo":h("IPS NoSQL - /ipsmongo/:id");break;case"ipsbasic":h("IPS Minimal - /ipsbasic/:id");break;case"ipsbeer":h("IPS BEER - /ipsbeer/:id");break;case"ipsbeerwithdelim":h("IPS BEER - /ipsbeer/:id/pipe)");break;case"ipshl72x":h("IPS HL7 2.x - /ipshl72x/:id");break;default:h("IPS Unified JSON Bundle - /ipsunified/:id")}},className:"dropdown-button"},l.a.createElement(U.a.Item,{eventKey:"ipsunified"},"IPS Unified JSON Bundle - /ipsunified/:id"),l.a.createElement(U.a.Item,{eventKey:"ipshl72x"},"IPS HL7 2.3 - /ipshl72x/:id"),l.a.createElement(U.a.Item,{eventKey:"ipsmongo"},"IPS NoSQL - /ipsmongo/:id"),l.a.createElement(U.a.Item,{eventKey:"ipsbeer"},"IPS BEER - /ipsbeer/:id"),l.a.createElement(U.a.Item,{eventKey:"ipsbeerwithdelim"},"IPS BEER - /ipsbeer/:id/pipe"),l.a.createElement(U.a.Item,{eventKey:"ipsbasic"},"IPS Minimal - /ipsbasic/:id"),l.a.createElement(U.a.Item,{eventKey:"ips"},"IPS Prev JSON Bundle - /ips/:id or /ipsbyname/:name/:given"),l.a.createElement(U.a.Item,{eventKey:"ipsxml"},"IPS Prev XML Bundle - /ipsxml/:id"),l.a.createElement(U.a.Item,{eventKey:"ipslegacy"},"IPS Legacy JSON Bundle - /ipslegacy/:id"))),l.a.createElement("div",{className:"form-check"},l.a.createElement("input",{type:"checkbox",className:"form-check-input",id:"compressionEncryption",checked:f,onChange:e=>S(e.target.checked)}),l.a.createElement("label",{className:"form-check-label",htmlFor:"compressionEncryption"},"Compress (gzip) and Encrypt (aes256 base 64)")),l.a.createElement("div",{className:"form-check"},l.a.createElement("input",{type:"checkbox",className:"form-check-input",id:"includeKey",checked:P,onChange:e=>I(e.target.checked)}),l.a.createElement("label",{className:"form-check-label",htmlFor:"includeKey"},"Include key in response"))),g?l.a.createElement(G.a,{variant:"danger"},"Data is too large to display. Please try a different mode."):l.a.createElement("div",{className:"text-area"},l.a.createElement(m.a.Control,{as:"textarea",rows:10,value:i,readOnly:!0})),l.a.createElement("br",null),l.a.createElement("div",{className:"button-container"},l.a.createElement(s.a,{className:"mb-3",onClick:()=>{const e=new Blob([i],{type:"text/plain"}),t=window.URL.createObjectURL(e),a=document.createElement("a");a.href=t,a.setAttribute("download","ips_data.txt"),document.body.appendChild(a),a.click(),document.body.removeChild(a)}},"Download Data"),"ips"===d&&l.a.createElement(s.a,{variant:"primary",className:"mb-3",onClick:()=>window.open("https://ipsviewer.com","_blank")},"Open IPS Viewer"))))};var Z=function(){const{selectedPatients:e,selectedPatient:t,setSelectedPatient:a}=Object(n.useContext)(C),[r,o]=Object(n.useState)(""),[i,c]=Object(n.useState)(""),[d,u]=Object(n.useState)(!1),[p,h]=Object(n.useState)("IPS MERN"),{startLoading:g,stopLoading:v}=D(),[b,y]=Object(n.useState)("https://ipsmern-dep.azurewebsites.net/ipsbundle"),[f,S]=Object(n.useState)("ipsunified"),[P,I]=Object(n.useState)(!1);return Object(n.useEffect)(()=>{if(t){const e=`/${f}/${t._id}`;E.a.get(e).then(e=>{let t=JSON.stringify(e.data,null,2);P&&(t=`{\n  "hl7": ${t}\n}`),o(t),u(!1)}).catch(e=>{console.error("Error fetching IPS record:",e)}).finally(()=>{v()})}},[t,f,P,v]),l.a.createElement("div",{className:"app"},l.a.createElement("div",{className:"container"},l.a.createElement("h3",null,"External IPS API Page - POST (Push)"),e.length>0&&t&&l.a.createElement("div",{className:"dropdown-container"},l.a.createElement(_.a,{id:"dropdown-record",title:`Patient: ${t.patient.given} ${t.patient.name}`,onSelect:t=>{const n=e.find(e=>e._id===t);g(),a(n)},className:"dropdown-button"},e.map(e=>l.a.createElement(U.a.Item,{key:e._id,eventKey:e._id,active:t&&t._id===e._id},e.patient.given," ",e.patient.name)))),l.a.createElement("div",{className:"dropdown-container"},l.a.createElement(_.a,{id:"dropdown-target",title:"Target Endpoint: "+p,onSelect:e=>{h(e),"VitalsIQ"===e?y("https://4202xiwc.offroadapps.dev:62444/Fhir/ips/json"):"NLD"===e?y("https://medicalcloud.orange-synapse.nl/api/fhir/1"):"IPS MERN"===e&&y("https://ipsmern-dep.azurewebsites.net/ipsbundle")},className:"dropdown-button"},l.a.createElement(U.a.Item,{eventKey:"IPS MERN",active:"IPS MERN"===p},"IPS MERN"),l.a.createElement(U.a.Item,{eventKey:"NLD",active:"NLD"===p},"NLD"),l.a.createElement(U.a.Item,{eventKey:"VitalsIQ",active:"VitalsIQ"===p},"VitalsIQ"))),l.a.createElement("div",{className:"dropdown-container"},l.a.createElement(_.a,{id:"dropdown-dataFormat",title:"Data Format: "+("ipsunified"===f?"IPS Unified":"ips"===f?"IPS Prev JSON":"IPS Legacy"),onSelect:e=>S(e),className:"dropdown-button"},l.a.createElement(U.a.Item,{eventKey:"ipsunified",active:"ipsunified"===f},"IPS Unified"),l.a.createElement(U.a.Item,{eventKey:"ips",active:"ips"===f},"IPS Prev JSON"),l.a.createElement(U.a.Item,{eventKey:"ipslegacy",active:"ipslegacy"===f},"IPS Legacy")),l.a.createElement(m.a.Check,{type:"checkbox",id:"hl7-wrapper-checkbox",label:"Surround with HL7 Wrapper",checked:P,onChange:e=>I(e.target.checked),className:"mt-2"})),l.a.createElement("div",{className:"endpoint-container mt-2"},l.a.createElement(m.a.Group,{controlId:"endpointInput"},l.a.createElement(m.a.Label,null,"Endpoint"),l.a.createElement(m.a.Control,{type:"text",value:b,onChange:e=>y(e.target.value)}))),d?l.a.createElement(G.a,{variant:"danger"},"Error pushing IPS data. Please try again."):l.a.createElement("div",{className:"text-area"},l.a.createElement(m.a.Control,{as:"textarea",rows:10,value:r,readOnly:!0})),l.a.createElement("br",null),i&&l.a.createElement(G.a,{variant:"success"},i),l.a.createElement("div",{className:"button-container"},t&&r&&l.a.createElement(s.a,{className:"mb-3",variant:"danger",onClick:async()=>{g();try{const e=JSON.parse(r);await E.a.post("/puships",{ipsBundle:e,endpoint:b,dataFormat:f,hl7Wrapper:P}),c("IPS data successfully pushed to the external server"),u(!1)}catch(e){console.error("Error pushing IPS data:",e),u(!0)}finally{v()}}},"Push IPS JSON Data to ",p," WebApp"))))};var ee=()=>{const[e,t]=Object(n.useState)(""),[a,r]=Object(n.useState)(""),[o,i]=Object(n.useState)(null),[c,d]=Object(n.useState)(null),[u,p]=Object(n.useState)(""),{startLoading:h,stopLoading:g}=D(),[v,b]=Object(n.useState)("IPS MERN"),[y,f]=Object(n.useState)("https://ipsmern-dep.azurewebsites.net/ipsbyname");return l.a.createElement("div",{className:"app"},l.a.createElement("div",{className:"container"},l.a.createElement("h3",null,"External IPS API - GET (Pull)"),l.a.createElement(m.a,{onSubmit:async t=>{t.preventDefault(),h();try{const t=await E.a.get("/fetchips",{params:{endpoint:y,name:e,givenName:a}});i(t.data),d(null)}catch(n){d("Failed to fetch IPS data"),i(null)}finally{g()}}},l.a.createElement(m.a.Group,{controlId:"name"},l.a.createElement(m.a.Control,{type:"text",placeholder:"Family/Surname",value:e,onChange:e=>t(e.target.value),required:!0})),l.a.createElement(m.a.Group,{controlId:"givenName"},l.a.createElement(m.a.Control,{type:"text",placeholder:"First/Given Name",value:a,onChange:e=>r(e.target.value),required:!0})),l.a.createElement("div",{className:"dropdown-container mb-2"},l.a.createElement(_.a,{id:"dropdown-target-get",title:"Target Endpoint: "+v,onSelect:e=>{b(e),"VitalsIQ"===e?f("https://4202xiwc.offroadapps.dev:62444/Fhir/ips/json"):"IPS SERN"===e&&f("https://ipsmern-dep.azurewebsites.net/ipsbyname")},className:"dropdown-button"},l.a.createElement(U.a.Item,{eventKey:"IPS MERN",active:"IPS MERN"===v},"IPS MERN"),l.a.createElement(U.a.Item,{eventKey:"VitalsIQ",active:"VitalsIQ"===v},"VitalsIQ"))),l.a.createElement(m.a.Group,{controlId:"endpointInput",className:"mb-2"},l.a.createElement(m.a.Label,null,"Endpoint"),l.a.createElement(m.a.Control,{type:"text",value:y,onChange:e=>f(e.target.value)})),l.a.createElement(s.a,{variant:"primary",type:"submit"},"Submit GET Request")),c&&l.a.createElement("p",{style:{color:"red"}},c),o&&l.a.createElement("div",null,l.a.createElement("h4",null,"IPS Data"),l.a.createElement("div",{className:"text-area"},l.a.createElement(m.a.Control,{as:"textarea",rows:10,value:JSON.stringify(o,null,2),readOnly:!0})),l.a.createElement(s.a,{variant:"success",onClick:async()=>{try{await E.a.post("/ipsbundle",o),p("IPS record successfully transformed and saved to MongoDB"),d(null)}catch(e){p(e.message),d("Failed to transform IPS record")}}},"Transform to IPS MERN Record")),u&&l.a.createElement("p",{style:{color:"green"}},u)))};var te=function(){const{selectedPatients:e,selectedPatient:t,setSelectedPatient:a}=Object(n.useContext)(C),[r,o]=Object(n.useState)(""),[i,c]=Object(n.useState)(""),[d,u]=Object(n.useState)(!1),[p,h]=Object(n.useState)(""),{startLoading:g,stopLoading:v}=D(),b=Object(n.useRef)(!1),[y,f]=Object(n.useState)(0),[S,P]=Object(n.useState)(0),[I,N]=Object(n.useState)("IPS JSON"),[w,O]=Object(n.useState)("IPS JSON");return Object(n.useEffect)(()=>{if(t&&!b.current){const e="/ips/"+t._id;E.a.get(e).then(e=>{const t=(new TextEncoder).encode(JSON.stringify(e.data)).length,a=JSON.stringify(e.data,null,2);o(a),u(!1),f(t),O("IPS JSON"),h(""),c(""),P(0)}).catch(e=>{console.error("Error fetching IPS record:",e),h("Error fetching IPS record"),u(!0)}).finally(()=>{v()})}},[t,v]),l.a.createElement("div",{className:"app"},l.a.createElement("div",{className:"container"},l.a.createElement("h3",null,"BEER ",l.a.createElement("div",{className:"noteFont"},"(Basic Emergency Exchange Record)")),e.length>0&&t&&l.a.createElement("div",{className:"dropdown-container"},l.a.createElement(_.a,{id:"dropdown-record",title:`Patient: ${t.patient.given} ${t.patient.name}`,className:"dropdown-button"},e.map(n=>l.a.createElement(U.a.Item,{key:n._id,onClick:()=>(t=>{const n=e.find(e=>e._id===t);b.current=!1,g(),a(n)})(n._id),active:t&&t._id===n._id},n.patient.given," ",n.patient.name)))),d&&!p&&l.a.createElement(G.a,{variant:"danger"},"Error processing data. Please try again."),l.a.createElement("div",{className:"text-area-container"},l.a.createElement("div",{className:"text-area"},l.a.createElement("h5",null,`Format: ${w} - ${y} bytes`),l.a.createElement(m.a.Control,{as:"textarea",rows:10,value:r,onChange:e=>o(e.target.value)}),l.a.createElement(s.a,{className:"mt-3",variant:"secondary",onClick:"MongoDB"===I?async()=>{if(""!==r&&"{}"!==r){console.log("mongoData:",r),b.current=!0,g();try{const e=await E.a.post("/convertmongo2beer",{data:r});c(e.data);const t=(new TextEncoder).encode(e.data.trim()).length;P(t),h("Successfully converted to BEER format"),u(!1)}catch(e){console.error("Error converting to BEER format from MongoDB:",e),h("Error converting to BEER format from MongoDB"),u(!0)}finally{v()}}}:()=>{if(""===r||"{}"===r)return;b.current=!0,g();E.a.post("/convertips2beer",{data:r}).then(e=>{c(e.data);const t=(new TextEncoder).encode(e.data.trim()).length;P(t),h("Successfully converted to BEER format"),u(!1)}).catch(e=>{console.error("Error converting to BEER format from IPS JSON:",e),h("Error converting to BEER format from IPS JSON"),u(!0)}).finally(()=>{v()})}},"Convert to BEER Format")),l.a.createElement("div",{className:"text-area"},l.a.createElement("h5",null,"BEER Format - ",S," bytes"),l.a.createElement(m.a.Control,{as:"textarea",rows:10,value:i,onChange:e=>c(e.target.value)}),l.a.createElement(_.a,{id:"dropdown-format",title:"Conversion Mode: "+I,onSelect:e=>{N(e),O(e)},className:"mt-3"},l.a.createElement(U.a.Item,{eventKey:"MongoDB"},"MongoDB"),l.a.createElement(U.a.Item,{eventKey:"IPS JSON"},"IPS JSON")),l.a.createElement(s.a,{className:"mt-3",variant:"secondary",onClick:"MongoDB"===I?async()=>{if(""!==i&&"{}"!==i){g(),b.current=!0;try{const e=await E.a.post("/convertbeer2mongo",{data:i});o(JSON.stringify(e.data,null,2));const t=(new TextEncoder).encode(JSON.stringify(e.data)).length;f(t);const a=(new TextEncoder).encode(i.trim()).length;P(a),h("Successfully converted to MongoDB format"),O("MongoDB"),u(!1)}catch(e){console.error("Error converting to MongoDB format:",e),h("Error converting to MongoDB format"),u(!0)}finally{v()}}}:async()=>{if(""!==i&&"{}"!==i){g(),b.current=!0;try{const e=await E.a.post("/convertbeer2ips",{data:i});o(JSON.stringify(e.data,null,2));const t=(new TextEncoder).encode(JSON.stringify(e.data)).length;f(t);const a=(new TextEncoder).encode(i.trim()).length;P(a),h("Successfully converted to IPS JSON format"),O("IPS JSON"),u(!1)}catch(e){console.error("Error converting to IPS JSON format:",e),h("Error converting to IPS JSON format"),u(!0)}finally{v()}}}},"Convert to ",I," Format"))),l.a.createElement("div",null,p&&l.a.createElement(G.a,{variant:d?"danger":"success",className:"message"},p))))},ae=a(364);var ne=function(){const e=[{feature:"Gzip Compression",incoming:l.a.createElement(l.a.Fragment,null,"- Include the header ",l.a.createElement("code",null,"Content-Encoding: gzip")," for incoming requests.",l.a.createElement("br",null),"- Compress your payload using gzip before sending."),outgoing:l.a.createElement(l.a.Fragment,null,"- Include the header ",l.a.createElement("code",null,"Accept-Encoding: gzip")," for responses.",l.a.createElement("br",null),"- The response will be returned in gzip format if supported.")},{feature:"AES-256 Encryption",incoming:l.a.createElement(l.a.Fragment,null,"- Include the header ",l.a.createElement("code",null,"X-Encrypted: true")," for incoming requests.",l.a.createElement("br",null),"- Encrypt your payload using AES-256 before sending.",l.a.createElement("br",null),"- Default format for the encrypted payload and IV is ",l.a.createElement("code",null,"hex"),".",l.a.createElement("br",null),"- To send in Base64 format, include the header ",l.a.createElement("code",null,"Content-Encoding: base64"),". Ensure both ",l.a.createElement("code",null,"encryptedData")," and ",l.a.createElement("code",null,"iv")," are Base64-encoded."),outgoing:l.a.createElement(l.a.Fragment,null,"- Include the header ",l.a.createElement("code",null,"Accept-Encryption: aes256")," for responses.",l.a.createElement("br",null),"- The response will be encrypted using AES-256 if supported.",l.a.createElement("br",null),"- Default format for the encrypted payload and IV is ",l.a.createElement("code",null,"hex"),".",l.a.createElement("br",null),"- To receive in Base64 format, include the header ",l.a.createElement("code",null,"Accept-Encoding: base64"),".")},{feature:"Combined (AES-256 + Gzip)",incoming:l.a.createElement(l.a.Fragment,null,"- Use both ",l.a.createElement("code",null,"Content-Encoding: gzip")," and ",l.a.createElement("code",null,"X-Encrypted: true"),".",l.a.createElement("br",null),"- Compress your payload with gzip first, then encrypt with AES-256.",l.a.createElement("br",null),"- To send in Base64 format, include ",l.a.createElement("code",null,"Content-Encoding: gzip, base64"),"."),outgoing:l.a.createElement(l.a.Fragment,null,"- Use both ",l.a.createElement("code",null,"Accept-Encoding: gzip")," and ",l.a.createElement("code",null,"Accept-Encryption: aes256"),".",l.a.createElement("br",null),"- The response will first be compressed with gzip, then encrypted with AES-256.",l.a.createElement("br",null),"- To receive in Base64 format, include ",l.a.createElement("code",null,"Accept-Encoding: gzip, base64"),".")}];return l.a.createElement(j.a,{className:"mt-5"},l.a.createElement("h2",null,"API Documentation"),l.a.createElement(ae.a,{striped:!0,bordered:!0,hover:!0,responsive:!0},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Method"),l.a.createElement("th",null,"Endpoint"),l.a.createElement("th",null,"Description"),l.a.createElement("th",null,"Request"),l.a.createElement("th",null,"Response"))),l.a.createElement("tbody",null,[{method:"POST",endpoint:"/ips",description:"Create a new IPS record.",request:"MongoDb JSON object representing the new IPS record.",response:"MongoDb JSON object of the created IPS record."},{method:"POST",endpoint:"/ipsmany",description:"Create multiple IPS records.",request:"Array of MongoDb JSON objects representing the new IPS records",response:"Array of MongoDb JSON objects of the created IPS records."},{method:"POST",endpoint:"/ipsbundle",description:"Create IPS records from an IPS Bundle.",request:"IPS Bundle - FHiR JSON or XML",response:"MongoDb - JSON as confirmation of record creation."},{method:"POST",endpoint:"/pushipsora",description:"Push IPS data to an external ORA system.",request:"IPS Bundle - JSON",response:"Response from the ORA system."},{method:"POST",endpoint:"/pushipsnld",description:"Push IPS data to an external NLD system.",request:"IPS Bundle - JSON",response:"Response from the NLD system."},{method:"POST",endpoint:"/ipsfrombeer",description:"Create MongoDb IPS records from BEER format.",request:"BEER - Plain Text",response:"MongoDb - JSON as confirmation of record creation."},{method:"POST",endpoint:"/ipsfromcda",description:"Create MongoDb IPS records from CDA XML format.",request:"CDA - XML",response:"MongoDb - JSON as confirmation of record creation."},{method:"POST",endpoint:"/ipsfromhl72x",description:"Create MongoDb IPS records from HL7 2.x format.",request:"HL7 2.x - Plain Text",response:"MongoDb - JSON as confirmation of record creation."},{method:"POST",endpoint:"/convertmongo2beer",description:"Convert MongoDB format to BEER format.",request:"MongoDB - JSON",response:"BEER - Plain Text"},{method:"POST",endpoint:"/convertmongo2hl7",description:"Convert MongoDB format to HL7 2.3 format.",request:"MongoDB - JSON",response:"HL7 2.3 - Plain Text"},{method:"POST",endpoint:"/convertbeer2mongo",description:"Convert BEER format to MongoDB format.",request:"BEER - Plain Text",response:"MongoDB - JSON"},{method:"POST",endpoint:"/convertbeer2ips",description:"Convert BEER format to IPS JSON format.",request:"BEER - Plain Text",response:"IPS Bundle - JSON"},{method:"POST",endpoint:"/convertips2beer",description:"Convert IPS JSON format to BEER format.",request:"IPS Bundle - FHiR JSON or XML",response:"BEER - Plain Text"},{method:"POST",endpoint:"/convertcdatoips",description:"Convert CDA XML format to IPS JSON format.",request:"CDA - XML",response:"IPS Bundle - JSON"},{method:"POST",endpoint:"/convertcdatobeer",description:"Convert CDA XML format to BEER format.",request:"CDA - XML",response:"BEER - Plain Text"},{method:"POST",endpoint:"/convertcdatomongo",description:"Convert CDA XML format to MongoDB format.",request:"CDA - XML",response:"MongoDB - JSON"},{method:"POST",endpoint:"/converthl72xtomongo",description:"Convert HL7 2.x format to MongoDB format.",request:"HL7 2.x - Plain Text",response:"MongoDB - JSON"},{method:"POST",endpoint:"/converthl72xtoips",description:"Convert HL7 2.x format to IPS JSON format.",request:"HL7 2.x - Plain Text",response:"IPS Bundle - JSON"},{method:"POST",endpoint:"/convertxml",description:"Generic convert XML format to JSON format.",request:"XML",response:"JSON"},{method:"POST",endpoint:"/convertfhirxml",description:"Convert FHIR XML format to FHIR JSON format.",request:"FHIR XML",response:"FHIR JSON"},{method:"GET",endpoint:"/ips/all",description:"Retrieve all IPS records.",request:"None.",response:"Array of JSON objects representing IPS records."},{method:"GET",endpoint:"/ipsraw/:id",description:"Retrieve raw IPS record by ID.",request:"IPS record ID as URL parameter.",response:"JSON object of the raw IPS record."},{method:"GET",endpoint:"/ipsmongo/:id",description:"Retrieve IPS record in MongoDB format by ID.",request:"IPS record ID as URL parameter.",response:"MongoDB - JSON"},{method:"GET",endpoint:"/ips/:id",description:"Retrieve IPS record in expanded format by ID.",request:"IPS record ID as URL parameter.",response:"Expanded IPS - FHiR JSON"},{method:"GET",endpoint:"/ipsbasic/:id",description:"Retrieve IPS record in basic format by ID.",request:"IPS record ID as URL parameter.",response:"Basic format - Plain Text"},{method:"GET",endpoint:"/ipsbeer/:id/:delim?",description:"Retrieve IPS record in BEER format by ID with optional delimiter.",request:"IPS record ID and optional delimiter as URL parameters.",response:"BEER - Plain Text"},{method:"GET",endpoint:"/ipshl72x/:id",description:"Retrieve IPS record in HL7 2.3 format by ID.",request:"IPS record ID as URL parameter.",response:"HL7 2.3 - Plain Text"},{method:"GET",endpoint:"/ipsxml/:id",description:"Retrieve IPS record in expanded FHiR XML format by ID.",request:"IPS record ID as URL parameter.",response:"IPS Bundle - FHiR XML"},{method:"GET",endpoint:"/ipslegacy/:id",description:"Retrieve IPS record in legacy format by ID.",request:"IPS record ID as URL parameter.",response:"Legacy format of the IPS record - FHiR JSON"},{method:"GET",endpoint:"/ipsunified/:id",description:"Retrieve IPS record in compact unified format by ID.",request:"IPS record ID as URL parameter.",response:"Compact unified format of the IPS record - FHiR JSON"},{method:"GET",endpoint:"/ipsbyname/:name/:given",description:"Retrieve expanded IPS FHiR by patient name and given name. Case insensitive.",request:"Patient name and given name as URL parameters.",response:"Expanded IPS Bundle - FHiR JSON"},{method:"GET",endpoint:"/ips/search/:name",description:"Search IPS records by patient name.",request:"Patient name as URL parameter.",response:"Array of JSON objects representing IPS records."},{method:"GET",endpoint:"/fetchipsora/:name/:givenName",description:"Fetch IPS data from ORA by patient name and given name.",request:"Patient name and given name as URL parameters.",response:"JSON object from ORA system."},{method:"PUT",endpoint:"/ips/:id",description:"Update an IPS record by ID.",request:"Partial JSON object representing the updated IPS record.",response:"MongoDB object of the updated IPS record - JSON"},{method:"PUT",endpoint:"/ipsuuid/:uuid",description:"Update an IPS record by UUID.",request:"Partial JSON object representing the updated IPS record.",response:"MongoDB object of the updated IPS record - JSON"},{method:"DELETE",endpoint:"/ips/:id",description:"Delete an IPS record by ID.",request:"IPS record ID as URL parameter.",response:"Confirmation of deletion."}].map((e,t)=>l.a.createElement("tr",{key:t},l.a.createElement("td",null,e.method),l.a.createElement("td",null,e.endpoint),l.a.createElement("td",null,e.description),l.a.createElement("td",null,e.request),l.a.createElement("td",null,e.response))))),l.a.createElement("h3",{className:"mt-5"},"Encoding and Encryption Usage"),l.a.createElement(ae.a,{striped:!0,bordered:!0,hover:!0,responsive:!0},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Feature"),l.a.createElement("th",null,"Instructions for Incoming Requests"),l.a.createElement("th",null,"Instructions for Outgoing Responses"))),l.a.createElement("tbody",null,e.map((e,t)=>l.a.createElement("tr",{key:t},l.a.createElement("td",null,e.feature),l.a.createElement("td",null,e.incoming),l.a.createElement("td",null,e.outgoing))))))};a(355);var le=()=>{const{isLoading:e}=D();return e?l.a.createElement("div",{className:"loading-spinner-overlay"},l.a.createElement("div",{className:"spinner-border text-primary",role:"status"},l.a.createElement("span",{className:"sr-only"},"Loading..."))):null};var re=function(){return l.a.createElement(w,null,l.a.createElement(A,null,l.a.createElement(i.a,null,l.a.createElement("div",{style:{paddingTop:"56px"}}," ",l.a.createElement(Q,null),l.a.createElement(le,null),l.a.createElement(c.c,null,l.a.createElement(c.a,{path:"/",element:l.a.createElement(k,null)}),l.a.createElement(c.a,{path:"/qr/:id?",element:l.a.createElement(J,null)}),l.a.createElement(c.a,{path:"/bulkupload",element:l.a.createElement(F,null)}),l.a.createElement(c.a,{path:"/about",element:l.a.createElement(V,null)}),l.a.createElement(c.a,{path:"/changelog",element:l.a.createElement(X,null)}),l.a.createElement(c.a,{path:"/aboutwebapp",element:l.a.createElement(W,null)}),l.a.createElement(c.a,{path:"/api/:id?",element:l.a.createElement(Y,null)}),l.a.createElement(c.a,{path:"/beergarden/:id?",element:l.a.createElement(te,null)}),l.a.createElement(c.a,{path:"/apidocumentation",element:l.a.createElement(ne,null)}),l.a.createElement(c.a,{path:"/puships",element:l.a.createElement(Z,null)}),l.a.createElement(c.a,{path:"/fetchips",element:l.a.createElement(ee,null)}))))))};o.a.render(l.a.createElement(w,null,l.a.createElement(re,null)),document.getElementById("root"))},64:function(e,t,a){}},[[224,1,2]]]);
//# sourceMappingURL=main.d41b390a.chunk.js.map